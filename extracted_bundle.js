(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();function d0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var vu={exports:{}},ii={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function kg(){if(dp)return ii;dp=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(l,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var m in c)m!=="key"&&(u[m]=c[m])}else u=c;return c=u.ref,{$$typeof:s,type:l,key:f,ref:c!==void 0?c:null,props:u}}return ii.Fragment=a,ii.jsx=n,ii.jsxs=n,ii}var hp;function Eg(){return hp||(hp=1,vu.exports=kg()),vu.exports}var i=Eg(),wu={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function Tg(){if(fp)return je;fp=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),j=Symbol.iterator;function E(R){return R===null||typeof R!="object"?null:(R=j&&R[j]||R["@@iterator"],typeof R=="function"?R:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function S(R,X,ie){this.props=R,this.context=X,this.refs=_,this.updater=ie||k}S.prototype.isReactComponent={},S.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=S.prototype;function A(R,X,ie){this.props=R,this.context=X,this.refs=_,this.updater=ie||k}var M=A.prototype=new T;M.constructor=A,N(M,S.prototype),M.isPureReactComponent=!0;var K=Array.isArray;function z(){}var O={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function q(R,X,ie){var F=ie.ref;return{$$typeof:s,type:R,key:X,ref:F!==void 0?F:null,props:ie}}function re(R,X){return q(R.type,X,R.props)}function P(R){return typeof R=="object"&&R!==null&&R.$$typeof===s}function Q(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ie){return X[ie]})}var oe=/\/+/g;function ge(R,X){return typeof R=="object"&&R!==null&&R.key!=null?Q(""+R.key):X.toString(36)}function Ae(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(z,z):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function V(R,X,ie,F,I){var ae=typeof R;(ae==="undefined"||ae==="boolean")&&(R=null);var B=!1;if(R===null)B=!0;else switch(ae){case"bigint":case"string":case"number":B=!0;break;case"object":switch(R.$$typeof){case s:case a:B=!0;break;case g:return B=R._init,V(B(R._payload),X,ie,F,I)}}if(B)return I=I(R),B=F===""?"."+ge(R,0):F,K(I)?(ie="",B!=null&&(ie=B.replace(oe,"$&/")+"/"),V(I,X,ie,"",function(ue){return ue})):I!=null&&(P(I)&&(I=re(I,ie+(I.key==null||R&&R.key===I.key?"":(""+I.key).replace(oe,"$&/")+"/")+B)),X.push(I)),1;B=0;var ne=F===""?".":F+":";if(K(R))for(var le=0;le<R.length;le++)F=R[le],ae=ne+ge(F,le),B+=V(F,X,ie,ae,I);else if(le=E(R),typeof le=="function")for(R=le.call(R),le=0;!(F=R.next()).done;)F=F.value,ae=ne+ge(F,le++),B+=V(F,X,ie,ae,I);else if(ae==="object"){if(typeof R.then=="function")return V(Ae(R),X,ie,F,I);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return B}function se(R,X,ie){if(R==null)return R;var F=[],I=0;return V(R,F,"","",function(ae){return X.call(ie,ae,I++)}),F}function he(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(ie){(R._status===0||R._status===-1)&&(R._status=1,R._result=ie)},function(ie){(R._status===0||R._status===-1)&&(R._status=2,R._result=ie)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var ce=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},pe={map:se,forEach:function(R,X,ie){se(R,function(){X.apply(this,arguments)},ie)},count:function(R){var X=0;return se(R,function(){X++}),X},toArray:function(R){return se(R,function(X){return X})||[]},only:function(R){if(!P(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return je.Activity=y,je.Children=pe,je.Component=S,je.Fragment=n,je.Profiler=c,je.PureComponent=A,je.StrictMode=l,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,je.__COMPILER_RUNTIME={__proto__:null,c:function(R){return O.H.useMemoCache(R)}},je.cache=function(R){return function(){return R.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(R,X,ie){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var F=N({},R.props),I=R.key;if(X!=null)for(ae in X.key!==void 0&&(I=""+X.key),X)!L.call(X,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&X.ref===void 0||(F[ae]=X[ae]);var ae=arguments.length-2;if(ae===1)F.children=ie;else if(1<ae){for(var B=Array(ae),ne=0;ne<ae;ne++)B[ne]=arguments[ne+2];F.children=B}return q(R.type,I,F)},je.createContext=function(R){return R={$$typeof:f,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},je.createElement=function(R,X,ie){var F,I={},ae=null;if(X!=null)for(F in X.key!==void 0&&(ae=""+X.key),X)L.call(X,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(I[F]=X[F]);var B=arguments.length-2;if(B===1)I.children=ie;else if(1<B){for(var ne=Array(B),le=0;le<B;le++)ne[le]=arguments[le+2];I.children=ne}if(R&&R.defaultProps)for(F in B=R.defaultProps,B)I[F]===void 0&&(I[F]=B[F]);return q(R,ae,I)},je.createRef=function(){return{current:null}},je.forwardRef=function(R){return{$$typeof:m,render:R}},je.isValidElement=P,je.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:he}},je.memo=function(R,X){return{$$typeof:x,type:R,compare:X===void 0?null:X}},je.startTransition=function(R){var X=O.T,ie={};O.T=ie;try{var F=R(),I=O.S;I!==null&&I(ie,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(z,ce)}catch(ae){ce(ae)}finally{X!==null&&ie.types!==null&&(X.types=ie.types),O.T=X}},je.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},je.use=function(R){return O.H.use(R)},je.useActionState=function(R,X,ie){return O.H.useActionState(R,X,ie)},je.useCallback=function(R,X){return O.H.useCallback(R,X)},je.useContext=function(R){return O.H.useContext(R)},je.useDebugValue=function(){},je.useDeferredValue=function(R,X){return O.H.useDeferredValue(R,X)},je.useEffect=function(R,X){return O.H.useEffect(R,X)},je.useEffectEvent=function(R){return O.H.useEffectEvent(R)},je.useId=function(){return O.H.useId()},je.useImperativeHandle=function(R,X,ie){return O.H.useImperativeHandle(R,X,ie)},je.useInsertionEffect=function(R,X){return O.H.useInsertionEffect(R,X)},je.useLayoutEffect=function(R,X){return O.H.useLayoutEffect(R,X)},je.useMemo=function(R,X){return O.H.useMemo(R,X)},je.useOptimistic=function(R,X){return O.H.useOptimistic(R,X)},je.useReducer=function(R,X,ie){return O.H.useReducer(R,X,ie)},je.useRef=function(R){return O.H.useRef(R)},je.useState=function(R){return O.H.useState(R)},je.useSyncExternalStore=function(R,X,ie){return O.H.useSyncExternalStore(R,X,ie)},je.useTransition=function(){return O.H.useTransition()},je.version="19.2.3",je}var mp;function ad(){return mp||(mp=1,wu.exports=Tg()),wu.exports}var v=ad();const Ag=d0(v);var ju={exports:{}},li={},_u={exports:{}},Nu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function Cg(){return pp||(pp=1,(function(s){function a(V,se){var he=V.length;V.push(se);e:for(;0<he;){var ce=he-1>>>1,pe=V[ce];if(0<c(pe,se))V[ce]=se,V[he]=pe,he=ce;else break e}}function n(V){return V.length===0?null:V[0]}function l(V){if(V.length===0)return null;var se=V[0],he=V.pop();if(he!==se){V[0]=he;e:for(var ce=0,pe=V.length,R=pe>>>1;ce<R;){var X=2*(ce+1)-1,ie=V[X],F=X+1,I=V[F];if(0>c(ie,he))F<pe&&0>c(I,ie)?(V[ce]=I,V[F]=he,ce=F):(V[ce]=ie,V[X]=he,ce=X);else if(F<pe&&0>c(I,he))V[ce]=I,V[F]=he,ce=F;else break e}}return se}function c(V,se){var he=V.sortIndex-se.sortIndex;return he!==0?he:V.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],x=[],g=1,y=null,j=3,E=!1,k=!1,N=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(V){for(var se=n(x);se!==null;){if(se.callback===null)l(x);else if(se.startTime<=V)l(x),se.sortIndex=se.expirationTime,a(p,se);else break;se=n(x)}}function K(V){if(N=!1,M(V),!k)if(n(p)!==null)k=!0,z||(z=!0,Q());else{var se=n(x);se!==null&&Ae(K,se.startTime-V)}}var z=!1,O=-1,L=5,q=-1;function re(){return _?!0:!(s.unstable_now()-q<L)}function P(){if(_=!1,z){var V=s.unstable_now();q=V;var se=!0;try{e:{k=!1,N&&(N=!1,T(O),O=-1),E=!0;var he=j;try{t:{for(M(V),y=n(p);y!==null&&!(y.expirationTime>V&&re());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,j=y.priorityLevel;var pe=ce(y.expirationTime<=V);if(V=s.unstable_now(),typeof pe=="function"){y.callback=pe,M(V),se=!0;break t}y===n(p)&&l(p),M(V)}else l(p);y=n(p)}if(y!==null)se=!0;else{var R=n(x);R!==null&&Ae(K,R.startTime-V),se=!1}}break e}finally{y=null,j=he,E=!1}se=void 0}}finally{se?Q():z=!1}}}var Q;if(typeof A=="function")Q=function(){A(P)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ge=oe.port2;oe.port1.onmessage=P,Q=function(){ge.postMessage(null)}}else Q=function(){S(P,0)};function Ae(V,se){O=S(function(){V(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(V){V.callback=null},s.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<V?Math.floor(1e3/V):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(V){switch(j){case 1:case 2:case 3:var se=3;break;default:se=j}var he=j;j=se;try{return V()}finally{j=he}},s.unstable_requestPaint=function(){_=!0},s.unstable_runWithPriority=function(V,se){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var he=j;j=V;try{return se()}finally{j=he}},s.unstable_scheduleCallback=function(V,se,he){var ce=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ce+he:ce):he=ce,V){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=he+pe,V={id:g++,callback:se,priorityLevel:V,startTime:he,expirationTime:pe,sortIndex:-1},he>ce?(V.sortIndex=he,a(x,V),n(p)===null&&V===n(x)&&(N?(T(O),O=-1):N=!0,Ae(K,he-ce))):(V.sortIndex=pe,a(p,V),k||E||(k=!0,z||(z=!0,Q()))),V},s.unstable_shouldYield=re,s.unstable_wrapCallback=function(V){var se=j;return function(){var he=j;j=se;try{return V.apply(this,arguments)}finally{j=he}}}})(Nu)),Nu}var xp;function Og(){return xp||(xp=1,_u.exports=Cg()),_u.exports}var Su={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Rg(){if(bp)return Ct;bp=1;var s=ad();function a(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)x+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(p,x,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:p,containerInfo:x,implementation:g}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Ct.createPortal=function(p,x){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return u(p,x,null,g)},Ct.flushSync=function(p){var x=f.T,g=l.p;try{if(f.T=null,l.p=2,p)return p()}finally{f.T=x,l.p=g,l.d.f()}},Ct.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,l.d.C(p,x))},Ct.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},Ct.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var g=x.as,y=m(g,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,E=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;g==="style"?l.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:y,integrity:j,fetchPriority:E}):g==="script"&&l.d.X(p,{crossOrigin:y,integrity:j,fetchPriority:E,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ct.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var g=m(x.as,x.crossOrigin);l.d.M(p,{crossOrigin:g,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&l.d.M(p)},Ct.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var g=x.as,y=m(g,x.crossOrigin);l.d.L(p,g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ct.preloadModule=function(p,x){if(typeof p=="string")if(x){var g=m(x.as,x.crossOrigin);l.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:g,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else l.d.m(p)},Ct.requestFormReset=function(p){l.d.r(p)},Ct.unstable_batchedUpdates=function(p,x){return p(x)},Ct.useFormState=function(p,x,g){return f.H.useFormState(p,x,g)},Ct.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ct.version="19.2.3",Ct}var gp;function Dg(){if(gp)return Su.exports;gp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Su.exports=Rg(),Su.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function Mg(){if(yp)return li;yp=1;var s=Og(),a=ad(),n=Dg();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function x(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(l(188));return t!==e?null:e}for(var r=e,o=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return p(d),e;if(h===o)return p(d),t;h=h.sibling}throw Error(l(188))}if(r.return!==o.return)r=d,o=h;else{for(var b=!1,w=d.child;w;){if(w===r){b=!0,r=d,o=h;break}if(w===o){b=!0,o=d,r=h;break}w=w.sibling}if(!b){for(w=h.child;w;){if(w===r){b=!0,r=h,o=d;break}if(w===o){b=!0,o=h,r=d;break}w=w.sibling}if(!b)throw Error(l(189))}}if(r.alternate!==o)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,j=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case S:return"Profiler";case _:return"StrictMode";case K:return"Suspense";case z:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case A:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}var Ae=Array.isArray,V=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ce=[],pe=-1;function R(e){return{current:e}}function X(e){0>pe||(e.current=ce[pe],ce[pe]=null,pe--)}function ie(e,t){pe++,ce[pe]=e.current,e.current=t}var F=R(null),I=R(null),ae=R(null),B=R(null);function ne(e,t){switch(ie(ae,t),ie(I,e),ie(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mm(t),e=Lm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}X(F),ie(F,e)}function le(){X(F),X(I),X(ae)}function ue(e){e.memoizedState!==null&&ie(B,e);var t=F.current,r=Lm(t,e.type);t!==r&&(ie(I,e),ie(F,r))}function me(e){I.current===e&&(X(F),X(I)),B.current===e&&(X(B),ai._currentValue=he)}var Be,We;function lt(e){if(Be===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Be=t&&t[1]||"",We=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+e+We}var Zt=!1;function Ge(e,t){if(!e||Zt)return"";Zt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(J){var G=J}Reflect.construct(e,[],te)}else{try{te.call()}catch(J){G=J}e.call(te.prototype)}}else{try{throw Error()}catch(J){G=J}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(J){if(J&&G&&typeof J.stack=="string")return[J.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),b=h[0],w=h[1];if(b&&w){var C=b.split(`
`),H=w.split(`
`);for(d=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(o===C.length||d===H.length)for(o=C.length-1,d=H.length-1;1<=o&&0<=d&&C[o]!==H[d];)d--;for(;1<=o&&0<=d;o--,d--)if(C[o]!==H[d]){if(o!==1||d!==1)do if(o--,d--,0>d||C[o]!==H[d]){var Z=`
`+C[o].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=o&&0<=d);break}}}finally{Zt=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?lt(r):""}function ha(e,t){switch(e.tag){case 26:case 27:case 5:return lt(e.type);case 16:return lt("Lazy");case 13:return e.child!==t&&t!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return Ge(e.type,!1);case 11:return Ge(e.type.render,!1);case 1:return Ge(e.type,!0);case 31:return lt("Activity");default:return""}}function et(e){try{var t="",r=null;do t+=ha(e,r),r=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Wt=Object.prototype.hasOwnProperty,Ot=s.unstable_scheduleCallback,_a=s.unstable_cancelCallback,Rt=s.unstable_shouldYield,Na=s.unstable_requestPaint,jt=s.unstable_now,ee=s.unstable_getCurrentPriorityLevel,Re=s.unstable_ImmediatePriority,Qe=s.unstable_UserBlockingPriority,mt=s.unstable_NormalPriority,fa=s.unstable_LowPriority,yt=s.unstable_IdlePriority,Sa=s.log,qa=s.unstable_setDisableYieldValue,ma=null,pt=null;function Mt(e){if(typeof Sa=="function"&&qa(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(ma,e)}catch{}}var xt=Math.clz32?Math.clz32:za,Oe=Math.log,pa=Math.LN2;function za(e){return e>>>=0,e===0?32:31-(Oe(e)/pa|0)|0}var ka=256,Ea=262144,zs=4194304;function Ta(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Us(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var d=0,h=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~h,o!==0?d=Ta(o):(b&=w,b!==0?d=Ta(b):r||(r=w&~e,r!==0&&(d=Ta(r))))):(w=o&~h,w!==0?d=Ta(w):b!==0?d=Ta(b):r||(r=o&~e,r!==0&&(d=Ta(r)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,r=t&-t,h>=r||h===32&&(r&4194048)!==0)?t:d}function is(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ei(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pn(){var e=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),e}function lo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mx(e,t,r,o,d,h){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var w=e.entanglements,C=e.expirationTimes,H=e.hiddenUpdates;for(r=b&~r;0<r;){var Z=31-xt(r),te=1<<Z;w[Z]=0,C[Z]=-1;var G=H[Z];if(G!==null)for(H[Z]=null,Z=0;Z<G.length;Z++){var J=G[Z];J!==null&&(J.lane&=-536870913)}r&=~te}o!==0&&pd(e,o,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(b&~t))}function pd(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-xt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function xd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-xt(r),d=1<<o;d&t|e[o]&t&&(e[o]|=t),r&=~d}}function bd(e,t){var r=t&-t;return r=(r&42)!==0?1:oo(r),(r&(e.suspendedLanes|t))!==0?0:r}function oo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function co(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gd(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:rp(e.type))}function yd(e,t){var r=se.p;try{return se.p=e,t()}finally{se.p=r}}var ls=Math.random().toString(36).slice(2),_t="__reactFiber$"+ls,Lt="__reactProps$"+ls,pr="__reactContainer$"+ls,uo="__reactEvents$"+ls,px="__reactListeners$"+ls,xx="__reactHandles$"+ls,vd="__reactResources$"+ls,bn="__reactMarker$"+ls;function ho(e){delete e[_t],delete e[Lt],delete e[uo],delete e[px],delete e[xx]}function xr(e){var t=e[_t];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pr]||r[_t]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hm(e);e!==null;){if(r=e[_t])return r;e=Hm(e)}return t}e=r,r=e.parentNode}return null}function br(e){if(e=e[_t]||e[pr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function gn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function gr(e){var t=e[vd];return t||(t=e[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function vt(e){e[bn]=!0}var wd=new Set,jd={};function Bs(e,t){yr(e,t),yr(e+"Capture",t)}function yr(e,t){for(jd[e]=t,e=0;e<t.length;e++)wd.add(t[e])}var bx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_d={},Nd={};function gx(e){return Wt.call(Nd,e)?!0:Wt.call(_d,e)?!1:bx.test(e)?Nd[e]=!0:(_d[e]=!0,!1)}function Ti(e,t,r){if(gx(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ai(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Ua(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}function ea(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yx(e,t,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(b){r=""+b,h.call(this,b)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fo(e){if(!e._valueTracker){var t=Sd(e)?"checked":"value";e._valueTracker=yx(e,t,""+e[t])}}function kd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=Sd(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vx=/[\n"\\]/g;function ta(e){return e.replace(vx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function mo(e,t,r,o,d,h,b,w){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ea(t)):e.value!==""+ea(t)&&(e.value=""+ea(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?po(e,b,ea(t)):r!=null?po(e,b,ea(r)):o!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+ea(w):e.removeAttribute("name")}function Ed(e,t,r,o,d,h,b,w){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){fo(e);return}r=r!=null?""+ea(r):"",t=t!=null?""+ea(t):r,w||t===e.value||(e.value=t),e.defaultValue=t}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),fo(e)}function po(e,t,r){t==="number"&&Ci(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function vr(e,t,r,o){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&o&&(e[r].defaultSelected=!0)}else{for(r=""+ea(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Td(e,t,r){if(t!=null&&(t=""+ea(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+ea(r):""}function Ad(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(l(92));if(Ae(o)){if(1<o.length)throw Error(l(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=ea(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),fo(e)}function wr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||wx.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Od(e,t,r){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in t)o=t[d],t.hasOwnProperty(d)&&r[d]!==o&&Cd(e,d,o)}else for(var h in t)t.hasOwnProperty(h)&&Cd(e,h,t[h])}function xo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_x=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oi(e){return _x.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ba(){}var bo=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jr=null,_r=null;function Rd(e){var t=br(e);if(t&&(e=t.stateNode)){var r=e[Lt]||null;e:switch(e=t.stateNode,t.type){case"input":if(mo(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ta(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var d=o[Lt]||null;if(!d)throw Error(l(90));mo(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&kd(o)}break e;case"textarea":Td(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&vr(e,!!r.multiple,t,!1)}}}var yo=!1;function Dd(e,t,r){if(yo)return e(t,r);yo=!0;try{var o=e(t);return o}finally{if(yo=!1,(jr!==null||_r!==null)&&(gl(),jr&&(t=jr,e=_r,_r=jr=null,Rd(t),e)))for(t=0;t<e.length;t++)Rd(e[t])}}function yn(e,t){var r=e.stateNode;if(r===null)return null;var o=r[Lt]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(l(231,t,typeof r));return r}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if($a)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){vo=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{vo=!1}var os=null,wo=null,Ri=null;function Md(){if(Ri)return Ri;var e,t=wo,r=t.length,o,d="value"in os?os.value:os.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var b=r-e;for(o=1;o<=b&&t[r-o]===d[h-o];o++);return Ri=d.slice(e,1<o?1-o:void 0)}function Di(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function Ld(){return!1}function qt(e){function t(r,o,d,h,b){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Mi:Ld,this.isPropagationStopped=Ld,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=qt($s),wn=y({},$s,{view:0,detail:0}),Nx=qt(wn),jo,_o,jn,qi=y({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jn&&(jn&&e.type==="mousemove"?(jo=e.screenX-jn.screenX,_o=e.screenY-jn.screenY):_o=jo=0,jn=e),jo)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),qd=qt(qi),Sx=y({},qi,{dataTransfer:0}),kx=qt(Sx),Ex=y({},wn,{relatedTarget:0}),No=qt(Ex),Tx=y({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),Ax=qt(Tx),Cx=y({},$s,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ox=qt(Cx),Rx=y({},$s,{data:0}),zd=qt(Rx),Dx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lx[e])?!!t[e]:!1}function So(){return qx}var zx=y({},wn,{key:function(e){if(e.key){var t=Dx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(e){return e.type==="keypress"?Di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ux=qt(zx),Bx=y({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ud=qt(Bx),$x=y({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),Px=qt($x),Hx=y({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=qt(Hx),Ix=y({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=qt(Ix),Kx=y({},$s,{newState:0,oldState:0}),Yx=qt(Kx),Jx=[9,13,27,32],ko=$a&&"CompositionEvent"in window,_n=null;$a&&"documentMode"in document&&(_n=document.documentMode);var Fx=$a&&"TextEvent"in window&&!_n,Bd=$a&&(!ko||_n&&8<_n&&11>=_n),$d=" ",Pd=!1;function Hd(e,t){switch(e){case"keyup":return Jx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function Qx(e,t){switch(e){case"compositionend":return Gd(t);case"keypress":return t.which!==32?null:(Pd=!0,$d);case"textInput":return e=t.data,e===$d&&Pd?null:e;default:return null}}function Xx(e,t){if(Nr)return e==="compositionend"||!ko&&Hd(e,t)?(e=Md(),Ri=wo=os=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bd&&t.locale!=="ko"?null:t.data;default:return null}}var Zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zx[e.type]:t==="textarea"}function Vd(e,t,r,o){jr?_r?_r.push(o):_r=[o]:jr=o,t=Sl(t,"onChange"),0<t.length&&(r=new Li("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Nn=null,Sn=null;function Wx(e){Tm(e,0)}function zi(e){var t=gn(e);if(kd(t))return e}function Kd(e,t){if(e==="change")return t}var Yd=!1;if($a){var Eo;if($a){var To="oninput"in document;if(!To){var Jd=document.createElement("div");Jd.setAttribute("oninput","return;"),To=typeof Jd.oninput=="function"}Eo=To}else Eo=!1;Yd=Eo&&(!document.documentMode||9<document.documentMode)}function Fd(){Nn&&(Nn.detachEvent("onpropertychange",Qd),Sn=Nn=null)}function Qd(e){if(e.propertyName==="value"&&zi(Sn)){var t=[];Vd(t,Sn,e,go(e)),Dd(Wx,t)}}function eb(e,t,r){e==="focusin"?(Fd(),Nn=t,Sn=r,Nn.attachEvent("onpropertychange",Qd)):e==="focusout"&&Fd()}function tb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zi(Sn)}function ab(e,t){if(e==="click")return zi(t)}function sb(e,t){if(e==="input"||e==="change")return zi(t)}function rb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:rb;function kn(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!Wt.call(t,d)||!Ht(e[d],t[d]))return!1}return!0}function Xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zd(e,t){var r=Xd(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xd(r)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ci(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ci(e.document)}return t}function Ao(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var nb=$a&&"documentMode"in document&&11>=document.documentMode,Sr=null,Co=null,En=null,Oo=!1;function th(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oo||Sr==null||Sr!==Ci(o)||(o=Sr,"selectionStart"in o&&Ao(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),En&&kn(En,o)||(En=o,o=Sl(Co,"onSelect"),0<o.length&&(t=new Li("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Sr)))}function Ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kr={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Ro={},ah={};$a&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function Hs(e){if(Ro[e])return Ro[e];if(!kr[e])return e;var t=kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ah)return Ro[e]=t[r];return e}var sh=Hs("animationend"),rh=Hs("animationiteration"),nh=Hs("animationstart"),ib=Hs("transitionrun"),lb=Hs("transitionstart"),ob=Hs("transitioncancel"),ih=Hs("transitionend"),lh=new Map,Do="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Do.push("scrollEnd");function xa(e,t){lh.set(e,t),Bs(t,[e])}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},aa=[],Er=0,Mo=0;function Bi(){for(var e=Er,t=Mo=Er=0;t<e;){var r=aa[t];aa[t++]=null;var o=aa[t];aa[t++]=null;var d=aa[t];aa[t++]=null;var h=aa[t];if(aa[t++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}h!==0&&oh(r,d,h)}}function $i(e,t,r,o){aa[Er++]=e,aa[Er++]=t,aa[Er++]=r,aa[Er++]=o,Mo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Lo(e,t,r,o){return $i(e,t,r,o),Pi(e)}function Gs(e,t){return $i(e,null,null,t),Pi(e)}function oh(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var d=!1,h=e.return;h!==null;)h.childLanes|=r,o=h.alternate,o!==null&&(o.childLanes|=r),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-xt(r),e=h.hiddenUpdates,o=e[d],o===null?e[d]=[t]:o.push(t),t.lane=r|536870912),h):null}function Pi(e){if(50<Fn)throw Fn=0,Ic=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tr={};function cb(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,r,o){return new cb(e,t,r,o)}function qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pa(e,t){var r=e.alternate;return r===null?(r=Gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ch(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hi(e,t,r,o,d,h){var b=0;if(o=e,typeof e=="function")qo(e)&&(b=1);else if(typeof e=="string")b=mg(e,r,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=Gt(31,r,t,d),e.elementType=q,e.lanes=h,e;case N:return Is(r.children,d,h,t);case _:b=8,d|=24;break;case S:return e=Gt(12,r,t,d|2),e.elementType=S,e.lanes=h,e;case K:return e=Gt(13,r,t,d),e.elementType=K,e.lanes=h,e;case z:return e=Gt(19,r,t,d),e.elementType=z,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:b=10;break e;case T:b=9;break e;case M:b=11;break e;case O:b=14;break e;case L:b=16,o=null;break e}b=29,r=Error(l(130,e===null?"null":typeof e,"")),o=null}return t=Gt(b,r,t,d),t.elementType=e,t.type=o,t.lanes=h,t}function Is(e,t,r,o){return e=Gt(7,e,o,t),e.lanes=r,e}function zo(e,t,r){return e=Gt(6,e,null,t),e.lanes=r,e}function uh(e){var t=Gt(18,null,null,0);return t.stateNode=e,t}function Uo(e,t,r){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var dh=new WeakMap;function sa(e,t){if(typeof e=="object"&&e!==null){var r=dh.get(e);return r!==void 0?r:(t={value:e,source:t,stack:et(t)},dh.set(e,t),t)}return{value:e,source:t,stack:et(t)}}var Ar=[],Cr=0,Gi=null,Tn=0,ra=[],na=0,cs=null,Aa=1,Ca="";function Ha(e,t){Ar[Cr++]=Tn,Ar[Cr++]=Gi,Gi=e,Tn=t}function hh(e,t,r){ra[na++]=Aa,ra[na++]=Ca,ra[na++]=cs,cs=e;var o=Aa;e=Ca;var d=32-xt(o)-1;o&=~(1<<d),r+=1;var h=32-xt(t)+d;if(30<h){var b=d-d%5;h=(o&(1<<b)-1).toString(32),o>>=b,d-=b,Aa=1<<32-xt(t)+d|r<<d|o,Ca=h+e}else Aa=1<<h|r<<d|o,Ca=e}function Bo(e){e.return!==null&&(Ha(e,1),hh(e,1,0))}function $o(e){for(;e===Gi;)Gi=Ar[--Cr],Ar[Cr]=null,Tn=Ar[--Cr],Ar[Cr]=null;for(;e===cs;)cs=ra[--na],ra[na]=null,Ca=ra[--na],ra[na]=null,Aa=ra[--na],ra[na]=null}function fh(e,t){ra[na++]=Aa,ra[na++]=Ca,ra[na++]=cs,Aa=t.id,Ca=t.overflow,cs=e}var Nt=null,Ye=null,Ce=!1,us=null,ia=!1,Po=Error(l(519));function ds(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw An(sa(t,e)),Po}function mh(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[_t]=e,t[Lt]=o,r){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(r=0;r<Xn.length;r++)ke(Xn[r],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),Ed(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),Ad(t,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||Rm(t.textContent,r)?(o.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),o.onScroll!=null&&ke("scroll",t),o.onScrollEnd!=null&&ke("scrollend",t),o.onClick!=null&&(t.onclick=Ba),t=!0):t=!1,t||ds(e,!0)}function ph(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:Nt=Nt.return}}function Or(e){if(e!==Nt)return!1;if(!Ce)return ph(e),Ce=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||nu(e.type,e.memoizedProps)),r=!r),r&&Ye&&ds(e),ph(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ye=Pm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Ye=Pm(e)}else t===27?(t=Ye,Ss(e.type)?(e=uu,uu=null,Ye=e):Ye=t):Ye=Nt?oa(e.stateNode.nextSibling):null;return!0}function Vs(){Ye=Nt=null,Ce=!1}function Ho(){var e=us;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),us=null),e}function An(e){us===null?us=[e]:us.push(e)}var Go=R(null),Ks=null,Ga=null;function hs(e,t,r){ie(Go,t._currentValue),t._currentValue=r}function Ia(e){e._currentValue=Go.current,X(Go)}function Io(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Vo(e,t,r,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var b=d.child;h=h.firstContext;e:for(;h!==null;){var w=h;h=d;for(var C=0;C<t.length;C++)if(w.context===t[C]){h.lanes|=r,w=h.alternate,w!==null&&(w.lanes|=r),Io(h.return,r,e),o||(b=null);break e}h=w.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(l(341));b.lanes|=r,h=b.alternate,h!==null&&(h.lanes|=r),Io(b,r,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Rr(e,t,r,o){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(l(387));if(b=b.memoizedProps,b!==null){var w=d.type;Ht(d.pendingProps.value,b.value)||(e!==null?e.push(w):e=[w])}}else if(d===B.current){if(b=d.alternate,b===null)throw Error(l(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ai):e=[ai])}d=d.return}e!==null&&Vo(t,e,r,o),t.flags|=262144}function Ii(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){Ks=e,Ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function St(e){return xh(Ks,e)}function Vi(e,t){return Ks===null&&Ys(e),xh(e,t)}function xh(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},Ga===null){if(e===null)throw Error(l(308));Ga=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ga=Ga.next=t;return r}var ub=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},db=s.unstable_scheduleCallback,hb=s.unstable_NormalPriority,ot={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ko(){return{controller:new ub,data:new Map,refCount:0}}function Cn(e){e.refCount--,e.refCount===0&&db(hb,function(){e.controller.abort()})}var On=null,Yo=0,Dr=0,Mr=null;function fb(e,t){if(On===null){var r=On=[];Yo=0,Dr=Qc(),Mr={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Yo++,t.then(bh,bh),t}function bh(){if(--Yo===0&&On!==null){Mr!==null&&(Mr.status="fulfilled");var e=On;On=null,Dr=0,Mr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function mb(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var d=0;d<r.length;d++)(0,r[d])(t)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var gh=V.S;V.S=function(e,t){am=jt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&fb(e,t),gh!==null&&gh(e,t)};var Js=R(null);function Jo(){var e=Js.current;return e!==null?e:Ie.pooledCache}function Ki(e,t){t===null?ie(Js,Js.current):ie(Js,t.pool)}function yh(){var e=Jo();return e===null?null:{parent:ot._currentValue,pool:e}}var Lr=Error(l(460)),Fo=Error(l(474)),Yi=Error(l(542)),Ji={then:function(){}};function vh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wh(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Ba,Ba),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_h(e),e;default:if(typeof t.status=="string")t.then(Ba,Ba);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=o}},function(o){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_h(e),e}throw Qs=t,Lr}}function Fs(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Qs=r,Lr):r}}var Qs=null;function jh(){if(Qs===null)throw Error(l(459));var e=Qs;return Qs=null,e}function _h(e){if(e===Lr||e===Yi)throw Error(l(483))}var qr=null,Rn=0;function Fi(e){var t=Rn;return Rn+=1,qr===null&&(qr=[]),wh(qr,e,t)}function Dn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Qi(e,t){throw t.$$typeof===j?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Nh(e){function t(U,D){if(e){var $=U.deletions;$===null?(U.deletions=[D],U.flags|=16):$.push(D)}}function r(U,D){if(!e)return null;for(;D!==null;)t(U,D),D=D.sibling;return null}function o(U){for(var D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function d(U,D){return U=Pa(U,D),U.index=0,U.sibling=null,U}function h(U,D,$){return U.index=$,e?($=U.alternate,$!==null?($=$.index,$<D?(U.flags|=67108866,D):$):(U.flags|=67108866,D)):(U.flags|=1048576,D)}function b(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function w(U,D,$,W){return D===null||D.tag!==6?(D=zo($,U.mode,W),D.return=U,D):(D=d(D,$),D.return=U,D)}function C(U,D,$,W){var be=$.type;return be===N?Z(U,D,$.props.children,W,$.key):D!==null&&(D.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===L&&Fs(be)===D.type)?(D=d(D,$.props),Dn(D,$),D.return=U,D):(D=Hi($.type,$.key,$.props,null,U.mode,W),Dn(D,$),D.return=U,D)}function H(U,D,$,W){return D===null||D.tag!==4||D.stateNode.containerInfo!==$.containerInfo||D.stateNode.implementation!==$.implementation?(D=Uo($,U.mode,W),D.return=U,D):(D=d(D,$.children||[]),D.return=U,D)}function Z(U,D,$,W,be){return D===null||D.tag!==7?(D=Is($,U.mode,W,be),D.return=U,D):(D=d(D,$),D.return=U,D)}function te(U,D,$){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=zo(""+D,U.mode,$),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case E:return $=Hi(D.type,D.key,D.props,null,U.mode,$),Dn($,D),$.return=U,$;case k:return D=Uo(D,U.mode,$),D.return=U,D;case L:return D=Fs(D),te(U,D,$)}if(Ae(D)||Q(D))return D=Is(D,U.mode,$,null),D.return=U,D;if(typeof D.then=="function")return te(U,Fi(D),$);if(D.$$typeof===A)return te(U,Vi(U,D),$);Qi(U,D)}return null}function G(U,D,$,W){var be=D!==null?D.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return be!==null?null:w(U,D,""+$,W);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return $.key===be?C(U,D,$,W):null;case k:return $.key===be?H(U,D,$,W):null;case L:return $=Fs($),G(U,D,$,W)}if(Ae($)||Q($))return be!==null?null:Z(U,D,$,W,null);if(typeof $.then=="function")return G(U,D,Fi($),W);if($.$$typeof===A)return G(U,D,Vi(U,$),W);Qi(U,$)}return null}function J(U,D,$,W,be){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return U=U.get($)||null,w(D,U,""+W,be);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return U=U.get(W.key===null?$:W.key)||null,C(D,U,W,be);case k:return U=U.get(W.key===null?$:W.key)||null,H(D,U,W,be);case L:return W=Fs(W),J(U,D,$,W,be)}if(Ae(W)||Q(W))return U=U.get($)||null,Z(D,U,W,be,null);if(typeof W.then=="function")return J(U,D,$,Fi(W),be);if(W.$$typeof===A)return J(U,D,$,Vi(D,W),be);Qi(D,W)}return null}function de(U,D,$,W){for(var be=null,De=null,fe=D,Ne=D=0,Te=null;fe!==null&&Ne<$.length;Ne++){fe.index>Ne?(Te=fe,fe=null):Te=fe.sibling;var Me=G(U,fe,$[Ne],W);if(Me===null){fe===null&&(fe=Te);break}e&&fe&&Me.alternate===null&&t(U,fe),D=h(Me,D,Ne),De===null?be=Me:De.sibling=Me,De=Me,fe=Te}if(Ne===$.length)return r(U,fe),Ce&&Ha(U,Ne),be;if(fe===null){for(;Ne<$.length;Ne++)fe=te(U,$[Ne],W),fe!==null&&(D=h(fe,D,Ne),De===null?be=fe:De.sibling=fe,De=fe);return Ce&&Ha(U,Ne),be}for(fe=o(fe);Ne<$.length;Ne++)Te=J(fe,U,Ne,$[Ne],W),Te!==null&&(e&&Te.alternate!==null&&fe.delete(Te.key===null?Ne:Te.key),D=h(Te,D,Ne),De===null?be=Te:De.sibling=Te,De=Te);return e&&fe.forEach(function(Cs){return t(U,Cs)}),Ce&&Ha(U,Ne),be}function ye(U,D,$,W){if($==null)throw Error(l(151));for(var be=null,De=null,fe=D,Ne=D=0,Te=null,Me=$.next();fe!==null&&!Me.done;Ne++,Me=$.next()){fe.index>Ne?(Te=fe,fe=null):Te=fe.sibling;var Cs=G(U,fe,Me.value,W);if(Cs===null){fe===null&&(fe=Te);break}e&&fe&&Cs.alternate===null&&t(U,fe),D=h(Cs,D,Ne),De===null?be=Cs:De.sibling=Cs,De=Cs,fe=Te}if(Me.done)return r(U,fe),Ce&&Ha(U,Ne),be;if(fe===null){for(;!Me.done;Ne++,Me=$.next())Me=te(U,Me.value,W),Me!==null&&(D=h(Me,D,Ne),De===null?be=Me:De.sibling=Me,De=Me);return Ce&&Ha(U,Ne),be}for(fe=o(fe);!Me.done;Ne++,Me=$.next())Me=J(fe,U,Ne,Me.value,W),Me!==null&&(e&&Me.alternate!==null&&fe.delete(Me.key===null?Ne:Me.key),D=h(Me,D,Ne),De===null?be=Me:De.sibling=Me,De=Me);return e&&fe.forEach(function(Sg){return t(U,Sg)}),Ce&&Ha(U,Ne),be}function He(U,D,$,W){if(typeof $=="object"&&$!==null&&$.type===N&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E:e:{for(var be=$.key;D!==null;){if(D.key===be){if(be=$.type,be===N){if(D.tag===7){r(U,D.sibling),W=d(D,$.props.children),W.return=U,U=W;break e}}else if(D.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===L&&Fs(be)===D.type){r(U,D.sibling),W=d(D,$.props),Dn(W,$),W.return=U,U=W;break e}r(U,D);break}else t(U,D);D=D.sibling}$.type===N?(W=Is($.props.children,U.mode,W,$.key),W.return=U,U=W):(W=Hi($.type,$.key,$.props,null,U.mode,W),Dn(W,$),W.return=U,U=W)}return b(U);case k:e:{for(be=$.key;D!==null;){if(D.key===be)if(D.tag===4&&D.stateNode.containerInfo===$.containerInfo&&D.stateNode.implementation===$.implementation){r(U,D.sibling),W=d(D,$.children||[]),W.return=U,U=W;break e}else{r(U,D);break}else t(U,D);D=D.sibling}W=Uo($,U.mode,W),W.return=U,U=W}return b(U);case L:return $=Fs($),He(U,D,$,W)}if(Ae($))return de(U,D,$,W);if(Q($)){if(be=Q($),typeof be!="function")throw Error(l(150));return $=be.call($),ye(U,D,$,W)}if(typeof $.then=="function")return He(U,D,Fi($),W);if($.$$typeof===A)return He(U,D,Vi(U,$),W);Qi(U,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,D!==null&&D.tag===6?(r(U,D.sibling),W=d(D,$),W.return=U,U=W):(r(U,D),W=zo($,U.mode,W),W.return=U,U=W),b(U)):r(U,D)}return function(U,D,$,W){try{Rn=0;var be=He(U,D,$,W);return qr=null,be}catch(fe){if(fe===Lr||fe===Yi)throw fe;var De=Gt(29,fe,null,U.mode);return De.lanes=W,De.return=U,De}finally{}}}var Xs=Nh(!0),Sh=Nh(!1),fs=!1;function Qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ms(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ps(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Le&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,t=Pi(e),oh(e,null,r),t}return $i(e,o,t,r),Pi(e)}function Mn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,xd(e,r)}}function Zo(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?d=h=b:h=h.next=b,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Wo=!1;function Ln(){if(Wo){var e=Mr;if(e!==null)throw e}}function qn(e,t,r,o){Wo=!1;var d=e.updateQueue;fs=!1;var h=d.firstBaseUpdate,b=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var C=w,H=C.next;C.next=null,b===null?h=H:b.next=H,b=C;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==b&&(w===null?Z.firstBaseUpdate=H:w.next=H,Z.lastBaseUpdate=C))}if(h!==null){var te=d.baseState;b=0,Z=H=C=null,w=h;do{var G=w.lane&-536870913,J=G!==w.lane;if(J?(Ee&G)===G:(o&G)===G){G!==0&&G===Dr&&(Wo=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=e,ye=w;G=t;var He=r;switch(ye.tag){case 1:if(de=ye.payload,typeof de=="function"){te=de.call(He,te,G);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ye.payload,G=typeof de=="function"?de.call(He,te,G):de,G==null)break e;te=y({},te,G);break e;case 2:fs=!0}}G=w.callback,G!==null&&(e.flags|=64,J&&(e.flags|=8192),J=d.callbacks,J===null?d.callbacks=[G]:J.push(G))}else J={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(H=Z=J,C=te):Z=Z.next=J,b|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;J=w,w=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);Z===null&&(C=te),d.baseState=C,d.firstBaseUpdate=H,d.lastBaseUpdate=Z,h===null&&(d.shared.lanes=0),vs|=b,e.lanes=b,e.memoizedState=te}}function kh(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Eh(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)kh(r[e],t)}var zr=R(null),Xi=R(0);function Th(e,t){e=Wa,ie(Xi,e),ie(zr,t),Wa=e|t.baseLanes}function ec(){ie(Xi,Wa),ie(zr,zr.current)}function tc(){Wa=Xi.current,X(zr),X(Xi)}var It=R(null),la=null;function xs(e){var t=e.alternate;ie(nt,nt.current&1),ie(It,e),la===null&&(t===null||zr.current!==null||t.memoizedState!==null)&&(la=e)}function ac(e){ie(nt,nt.current),ie(It,e),la===null&&(la=e)}function Ah(e){e.tag===22?(ie(nt,nt.current),ie(It,e),la===null&&(la=e)):bs()}function bs(){ie(nt,nt.current),ie(It,It.current)}function Vt(e){X(It),la===e&&(la=null),X(nt)}var nt=R(0);function Zi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||ou(r)||cu(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=0,_e=null,$e=null,ct=null,Wi=!1,Ur=!1,Zs=!1,el=0,zn=0,Br=null,pb=0;function tt(){throw Error(l(321))}function sc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ht(e[r],t[r]))return!1;return!0}function rc(e,t,r,o,d,h){return Va=h,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,V.H=e===null||e.memoizedState===null?ff:yc,Zs=!1,h=r(o,d),Zs=!1,Ur&&(h=Oh(t,r,o,d)),Ch(e),h}function Ch(e){V.H=$n;var t=$e!==null&&$e.next!==null;if(Va=0,ct=$e=_e=null,Wi=!1,zn=0,Br=null,t)throw Error(l(300));e===null||ut||(e=e.dependencies,e!==null&&Ii(e)&&(ut=!0))}function Oh(e,t,r,o){_e=e;var d=0;do{if(Ur&&(Br=null),zn=0,Ur=!1,25<=d)throw Error(l(301));if(d+=1,ct=$e=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}V.H=mf,h=t(r,o)}while(Ur);return h}function xb(){var e=V.H,t=e.useState()[0];return t=typeof t.then=="function"?Un(t):t,e=e.useState()[0],($e!==null?$e.memoizedState:null)!==e&&(_e.flags|=1024),t}function nc(){var e=el!==0;return el=0,e}function ic(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function lc(e){if(Wi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Wi=!1}Va=0,ct=$e=_e=null,Ur=!1,zn=el=0,Br=null}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?_e.memoizedState=ct=e:ct=ct.next=e,ct}function it(){if($e===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=ct===null?_e.memoizedState:ct.next;if(t!==null)ct=t,$e=e;else{if(e===null)throw _e.alternate===null?Error(l(467)):Error(l(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},ct===null?_e.memoizedState=ct=e:ct=ct.next=e}return ct}function tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Un(e){var t=zn;return zn+=1,Br===null&&(Br=[]),e=wh(Br,e,t),t=_e,(ct===null?t.memoizedState:ct.next)===null&&(t=t.alternate,V.H=t===null||t.memoizedState===null?ff:yc),e}function al(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Un(e);if(e.$$typeof===A)return St(e)}throw Error(l(438,String(e)))}function oc(e){var t=null,r=_e.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=_e.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=tl(),_e.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=re;return t.index++,r}function Ka(e,t){return typeof t=="function"?t(e):t}function sl(e){var t=it();return cc(t,$e,e)}function cc(e,t,r){var o=e.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=r;var d=e.baseQueue,h=o.pending;if(h!==null){if(d!==null){var b=d.next;d.next=h.next,h.next=b}t.baseQueue=d=h,o.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var w=b=null,C=null,H=t,Z=!1;do{var te=H.lane&-536870913;if(te!==H.lane?(Ee&te)===te:(Va&te)===te){var G=H.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),te===Dr&&(Z=!0);else if((Va&G)===G){H=H.next,G===Dr&&(Z=!0);continue}else te={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(w=C=te,b=h):C=C.next=te,_e.lanes|=G,vs|=G;te=H.action,Zs&&r(h,te),h=H.hasEagerState?H.eagerState:r(h,te)}else G={lane:te,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(w=C=G,b=h):C=C.next=G,_e.lanes|=te,vs|=te;H=H.next}while(H!==null&&H!==t);if(C===null?b=h:C.next=w,!Ht(h,e.memoizedState)&&(ut=!0,Z&&(r=Mr,r!==null)))throw r;e.memoizedState=h,e.baseState=b,e.baseQueue=C,o.lastRenderedState=h}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function uc(e){var t=it(),r=t.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=e;var o=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var b=d=d.next;do h=e(h,b.action),b=b.next;while(b!==d);Ht(h,t.memoizedState)||(ut=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,o]}function Rh(e,t,r){var o=_e,d=it(),h=Ce;if(h){if(r===void 0)throw Error(l(407));r=r()}else r=t();var b=!Ht(($e||d).memoizedState,r);if(b&&(d.memoizedState=r,ut=!0),d=d.queue,fc(Lh.bind(null,o,d,e),[e]),d.getSnapshot!==t||b||ct!==null&&ct.memoizedState.tag&1){if(o.flags|=2048,$r(9,{destroy:void 0},Mh.bind(null,o,d,r,t),null),Ie===null)throw Error(l(349));h||(Va&127)!==0||Dh(o,t,r)}return r}function Dh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_e.updateQueue,t===null?(t=tl(),_e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Mh(e,t,r,o){t.value=r,t.getSnapshot=o,qh(t)&&zh(e)}function Lh(e,t,r){return r(function(){qh(t)&&zh(e)})}function qh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ht(e,r)}catch{return!0}}function zh(e){var t=Gs(e,2);t!==null&&Pt(t,e,2)}function dc(e){var t=Dt();if(typeof e=="function"){var r=e;if(e=r(),Zs){Mt(!0);try{r()}finally{Mt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:e},t}function Uh(e,t,r,o){return e.baseState=r,cc(e,$e,typeof o=="function"?o:Ka)}function bb(e,t,r,o,d){if(il(e))throw Error(l(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};V.T!==null?r(!0):h.isTransition=!1,o(h),r=t.pending,r===null?(h.next=t.pending=h,Bh(t,h)):(h.next=r.next,t.pending=r.next=h)}}function Bh(e,t){var r=t.action,o=t.payload,d=e.state;if(t.isTransition){var h=V.T,b={};V.T=b;try{var w=r(d,o),C=V.S;C!==null&&C(b,w),$h(e,t,w)}catch(H){hc(e,t,H)}finally{h!==null&&b.types!==null&&(h.types=b.types),V.T=h}}else try{h=r(d,o),$h(e,t,h)}catch(H){hc(e,t,H)}}function $h(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Ph(e,t,o)},function(o){return hc(e,t,o)}):Ph(e,t,r)}function Ph(e,t,r){t.status="fulfilled",t.value=r,Hh(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,Bh(e,r)))}function hc(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,Hh(t),t=t.next;while(t!==o)}e.action=null}function Hh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gh(e,t){return t}function Ih(e,t){if(Ce){var r=Ie.formState;if(r!==null){e:{var o=_e;if(Ce){if(Ye){t:{for(var d=Ye,h=ia;d.nodeType!==8;){if(!h){d=null;break t}if(d=oa(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ye=oa(d.nextSibling),o=d.data==="F!";break e}}ds(o)}o=!1}o&&(t=r[0])}}return r=Dt(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:t},r.queue=o,r=uf.bind(null,_e,o),o.dispatch=r,o=dc(!1),h=gc.bind(null,_e,!1,o.queue),o=Dt(),d={state:t,dispatch:null,action:e,pending:null},o.queue=d,r=bb.bind(null,_e,d,h,r),d.dispatch=r,o.memoizedState=e,[t,r,!1]}function Vh(e){var t=it();return Kh(t,$e,e)}function Kh(e,t,r){if(t=cc(e,t,Gh)[0],e=sl(Ka)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Un(t)}catch(b){throw b===Lr?Yi:b}else o=t;t=it();var d=t.queue,h=d.dispatch;return r!==t.memoizedState&&(_e.flags|=2048,$r(9,{destroy:void 0},gb.bind(null,d,r),null)),[o,h,e]}function gb(e,t){e.action=t}function Yh(e){var t=it(),r=$e;if(r!==null)return Kh(t,r,e);it(),t=t.memoizedState,r=it();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function $r(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=_e.updateQueue,t===null&&(t=tl(),_e.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Jh(){return it().memoizedState}function rl(e,t,r,o){var d=Dt();_e.flags|=e,d.memoizedState=$r(1|t,{destroy:void 0},r,o===void 0?null:o)}function nl(e,t,r,o){var d=it();o=o===void 0?null:o;var h=d.memoizedState.inst;$e!==null&&o!==null&&sc(o,$e.memoizedState.deps)?d.memoizedState=$r(t,h,r,o):(_e.flags|=e,d.memoizedState=$r(1|t,h,r,o))}function Fh(e,t){rl(8390656,8,e,t)}function fc(e,t){nl(2048,8,e,t)}function yb(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=tl(),_e.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Qh(e){var t=it().memoizedState;return yb({ref:t,nextImpl:e}),function(){if((Le&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Xh(e,t){return nl(4,2,e,t)}function Zh(e,t){return nl(4,4,e,t)}function Wh(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ef(e,t,r){r=r!=null?r.concat([e]):null,nl(4,4,Wh.bind(null,t,e),r)}function mc(){}function tf(e,t){var r=it();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&sc(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function af(e,t){var r=it();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&sc(t,o[1]))return o[0];if(o=e(),Zs){Mt(!0);try{e()}finally{Mt(!1)}}return r.memoizedState=[o,t],o}function pc(e,t,r){return r===void 0||(Va&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=rm(),_e.lanes|=e,vs|=e,r)}function sf(e,t,r,o){return Ht(r,t)?r:zr.current!==null?(e=pc(e,r,o),Ht(e,t)||(ut=!0),e):(Va&42)===0||(Va&1073741824)!==0&&(Ee&261930)===0?(ut=!0,e.memoizedState=r):(e=rm(),_e.lanes|=e,vs|=e,t)}function rf(e,t,r,o,d){var h=se.p;se.p=h!==0&&8>h?h:8;var b=V.T,w={};V.T=w,gc(e,!1,t,r);try{var C=d(),H=V.S;if(H!==null&&H(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Z=mb(C,o);Bn(e,t,Z,Jt(e))}else Bn(e,t,o,Jt(e))}catch(te){Bn(e,t,{then:function(){},status:"rejected",reason:te},Jt())}finally{se.p=h,b!==null&&w.types!==null&&(b.types=w.types),V.T=b}}function vb(){}function xc(e,t,r,o){if(e.tag!==5)throw Error(l(476));var d=nf(e).queue;rf(e,d,t,he,r===null?vb:function(){return lf(e),r(o)})}function nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:he},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ka,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lf(e){var t=nf(e);t.next===null&&(t=e.alternate.memoizedState),Bn(e,t.next.queue,{},Jt())}function bc(){return St(ai)}function of(){return it().memoizedState}function cf(){return it().memoizedState}function wb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Jt();e=ms(r);var o=ps(t,e,r);o!==null&&(Pt(o,t,r),Mn(o,t,r)),t={cache:Ko()},e.payload=t;return}t=t.return}}function jb(e,t,r){var o=Jt();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},il(e)?df(t,r):(r=Lo(e,t,r,o),r!==null&&(Pt(r,e,o),hf(r,t,o)))}function uf(e,t,r){var o=Jt();Bn(e,t,r,o)}function Bn(e,t,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(il(e))df(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var b=t.lastRenderedState,w=h(b,r);if(d.hasEagerState=!0,d.eagerState=w,Ht(w,b))return $i(e,t,d,0),Ie===null&&Bi(),!1}catch{}finally{}if(r=Lo(e,t,d,o),r!==null)return Pt(r,e,o),hf(r,t,o),!0}return!1}function gc(e,t,r,o){if(o={lane:2,revertLane:Qc(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},il(e)){if(t)throw Error(l(479))}else t=Lo(e,r,o,2),t!==null&&Pt(t,e,2)}function il(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function df(e,t){Ur=Wi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function hf(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,xd(e,r)}}var $n={readContext:St,use:al,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};$n.useEffectEvent=tt;var ff={readContext:St,use:al,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Fh,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,rl(4194308,4,Wh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return rl(4194308,4,e,t)},useInsertionEffect:function(e,t){rl(4,2,e,t)},useMemo:function(e,t){var r=Dt();t=t===void 0?null:t;var o=e();if(Zs){Mt(!0);try{e()}finally{Mt(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=Dt();if(r!==void 0){var d=r(t);if(Zs){Mt(!0);try{r(t)}finally{Mt(!1)}}}else d=t;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=jb.bind(null,_e,e),[o.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:function(e){e=dc(e);var t=e.queue,r=uf.bind(null,_e,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:mc,useDeferredValue:function(e,t){var r=Dt();return pc(r,e,t)},useTransition:function(){var e=dc(!1);return e=rf.bind(null,_e,e.queue,!0,!1),Dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=_e,d=Dt();if(Ce){if(r===void 0)throw Error(l(407));r=r()}else{if(r=t(),Ie===null)throw Error(l(349));(Ee&127)!==0||Dh(o,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,Fh(Lh.bind(null,o,h,e),[e]),o.flags|=2048,$r(9,{destroy:void 0},Mh.bind(null,o,h,r,t),null),r},useId:function(){var e=Dt(),t=Ie.identifierPrefix;if(Ce){var r=Ca,o=Aa;r=(o&~(1<<32-xt(o)-1)).toString(32)+r,t="_"+t+"R_"+r,r=el++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=pb++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:bc,useFormState:Ih,useActionState:Ih,useOptimistic:function(e){var t=Dt();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=gc.bind(null,_e,!0,r),r.dispatch=t,[e,t]},useMemoCache:oc,useCacheRefresh:function(){return Dt().memoizedState=wb.bind(null,_e)},useEffectEvent:function(e){var t=Dt(),r={impl:e};return t.memoizedState=r,function(){if((Le&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},yc={readContext:St,use:al,useCallback:tf,useContext:St,useEffect:fc,useImperativeHandle:ef,useInsertionEffect:Xh,useLayoutEffect:Zh,useMemo:af,useReducer:sl,useRef:Jh,useState:function(){return sl(Ka)},useDebugValue:mc,useDeferredValue:function(e,t){var r=it();return sf(r,$e.memoizedState,e,t)},useTransition:function(){var e=sl(Ka)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:Rh,useId:of,useHostTransitionStatus:bc,useFormState:Vh,useActionState:Vh,useOptimistic:function(e,t){var r=it();return Uh(r,$e,e,t)},useMemoCache:oc,useCacheRefresh:cf};yc.useEffectEvent=Qh;var mf={readContext:St,use:al,useCallback:tf,useContext:St,useEffect:fc,useImperativeHandle:ef,useInsertionEffect:Xh,useLayoutEffect:Zh,useMemo:af,useReducer:uc,useRef:Jh,useState:function(){return uc(Ka)},useDebugValue:mc,useDeferredValue:function(e,t){var r=it();return $e===null?pc(r,e,t):sf(r,$e.memoizedState,e,t)},useTransition:function(){var e=uc(Ka)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Un(e),t]},useSyncExternalStore:Rh,useId:of,useHostTransitionStatus:bc,useFormState:Yh,useActionState:Yh,useOptimistic:function(e,t){var r=it();return $e!==null?Uh(r,$e,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:oc,useCacheRefresh:cf};mf.useEffectEvent=Qh;function vc(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:y({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var wc={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Jt(),d=ms(o);d.payload=t,r!=null&&(d.callback=r),t=ps(e,d,o),t!==null&&(Pt(t,e,o),Mn(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Jt(),d=ms(o);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=ps(e,d,o),t!==null&&(Pt(t,e,o),Mn(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jt(),o=ms(r);o.tag=2,t!=null&&(o.callback=t),t=ps(e,o,r),t!==null&&(Pt(t,e,r),Mn(t,e,r))}};function pf(e,t,r,o,d,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,b):t.prototype&&t.prototype.isPureReactComponent?!kn(r,o)||!kn(d,h):!0}function xf(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&wc.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=y({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}function bf(e){Ui(e)}function gf(e){console.error(e)}function yf(e){Ui(e)}function ll(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function vf(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function jc(e,t,r){return r=ms(r),r.tag=3,r.payload={element:null},r.callback=function(){ll(e,t)},r}function wf(e){return e=ms(e),e.tag=3,e}function jf(e,t,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;e.payload=function(){return d(h)},e.callback=function(){vf(t,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){vf(t,r,o),typeof d!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function _b(e,t,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&Rr(t,r,d,!0),r=It.current,r!==null){switch(r.tag){case 31:case 13:return la===null?yl():r.alternate===null&&at===0&&(at=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Ji?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),Yc(e,o,d)),!1;case 22:return r.flags|=65536,o===Ji?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),Yc(e,o,d)),!1}throw Error(l(435,r.tag))}return Yc(e,o,d),yl(),!1}if(Ce)return t=It.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,o!==Po&&(e=Error(l(422),{cause:o}),An(sa(e,r)))):(o!==Po&&(t=Error(l(423),{cause:o}),An(sa(t,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=sa(o,r),d=jc(e.stateNode,o,d),Zo(e,d),at!==4&&(at=2)),!1;var h=Error(l(520),{cause:o});if(h=sa(h,r),Jn===null?Jn=[h]:Jn.push(h),at!==4&&(at=2),t===null)return!0;o=sa(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=jc(r.stateNode,o,e),Zo(r,e),!1;case 1:if(t=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ws===null||!ws.has(h))))return r.flags|=65536,d&=-d,r.lanes|=d,d=wf(d),jf(d,e,r,o),Zo(r,d),!1}r=r.return}while(r!==null);return!1}var _c=Error(l(461)),ut=!1;function kt(e,t,r,o){t.child=e===null?Sh(t,null,r,o):Xs(t,e.child,r,o)}function _f(e,t,r,o,d){r=r.render;var h=t.ref;if("ref"in o){var b={};for(var w in o)w!=="ref"&&(b[w]=o[w])}else b=o;return Ys(t),o=rc(e,t,r,b,h,d),w=nc(),e!==null&&!ut?(ic(e,t,d),Ya(e,t,d)):(Ce&&w&&Bo(t),t.flags|=1,kt(e,t,o,d),t.child)}function Nf(e,t,r,o,d){if(e===null){var h=r.type;return typeof h=="function"&&!qo(h)&&h.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=h,Sf(e,t,h,o,d)):(e=Hi(r.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Oc(e,d)){var b=h.memoizedProps;if(r=r.compare,r=r!==null?r:kn,r(b,o)&&e.ref===t.ref)return Ya(e,t,d)}return t.flags|=1,e=Pa(h,o),e.ref=t.ref,e.return=t,t.child=e}function Sf(e,t,r,o,d){if(e!==null){var h=e.memoizedProps;if(kn(h,o)&&e.ref===t.ref)if(ut=!1,t.pendingProps=o=h,Oc(e,d))(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Ya(e,t,d)}return Nc(e,t,r,o,d)}function kf(e,t,r,o){var d=o.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|r:r,e!==null){for(o=t.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,t.child=null;return Ef(e,t,h,r,o)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ki(t,h!==null?h.cachePool:null),h!==null?Th(t,h):ec(),Ah(t);else return o=t.lanes=536870912,Ef(e,t,h!==null?h.baseLanes|r:r,r,o)}else h!==null?(Ki(t,h.cachePool),Th(t,h),bs(),t.memoizedState=null):(e!==null&&Ki(t,null),ec(),bs());return kt(e,t,d,r),t.child}function Pn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ef(e,t,r,o,d){var h=Jo();return h=h===null?null:{parent:ot._currentValue,pool:h},t.memoizedState={baseLanes:r,cachePool:h},e!==null&&Ki(t,null),ec(),Ah(t),e!==null&&Rr(e,t,o,!0),t.childLanes=d,null}function ol(e,t){return t=ul({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Tf(e,t,r){return Xs(t,e.child,null,r),e=ol(t,t.pendingProps),e.flags|=2,Vt(t),t.memoizedState=null,e}function Nb(e,t,r){var o=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(o.mode==="hidden")return e=ol(t,o),t.lanes=536870912,Pn(null,e);if(ac(t),(e=Ye)?(e=$m(e,ia),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:cs!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},r=uh(e),r.return=t,t.child=r,Nt=t,Ye=null)):e=null,e===null)throw ds(t);return t.lanes=536870912,null}return ol(t,o)}var h=e.memoizedState;if(h!==null){var b=h.dehydrated;if(ac(t),d)if(t.flags&256)t.flags&=-257,t=Tf(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(ut||Rr(e,t,r,!1),d=(r&e.childLanes)!==0,ut||d){if(o=Ie,o!==null&&(b=bd(o,r),b!==0&&b!==h.retryLane))throw h.retryLane=b,Gs(e,b),Pt(o,e,b),_c;yl(),t=Tf(e,t,r)}else e=h.treeContext,Ye=oa(b.nextSibling),Nt=t,Ce=!0,us=null,ia=!1,e!==null&&fh(t,e),t=ol(t,o),t.flags|=4096;return t}return e=Pa(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function cl(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Nc(e,t,r,o,d){return Ys(t),r=rc(e,t,r,o,void 0,d),o=nc(),e!==null&&!ut?(ic(e,t,d),Ya(e,t,d)):(Ce&&o&&Bo(t),t.flags|=1,kt(e,t,r,d),t.child)}function Af(e,t,r,o,d,h){return Ys(t),t.updateQueue=null,r=Oh(t,o,r,d),Ch(e),o=nc(),e!==null&&!ut?(ic(e,t,h),Ya(e,t,h)):(Ce&&o&&Bo(t),t.flags|=1,kt(e,t,r,h),t.child)}function Cf(e,t,r,o,d){if(Ys(t),t.stateNode===null){var h=Tr,b=r.contextType;typeof b=="object"&&b!==null&&(h=St(b)),h=new r(o,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=wc,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=o,h.state=t.memoizedState,h.refs={},Qo(t),b=r.contextType,h.context=typeof b=="object"&&b!==null?St(b):Tr,h.state=t.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(vc(t,r,b,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&wc.enqueueReplaceState(h,h.state,null),qn(t,o,h,d),Ln(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){h=t.stateNode;var w=t.memoizedProps,C=Ws(r,w);h.props=C;var H=h.context,Z=r.contextType;b=Tr,typeof Z=="object"&&Z!==null&&(b=St(Z));var te=r.getDerivedStateFromProps;Z=typeof te=="function"||typeof h.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,Z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(w||H!==b)&&xf(t,h,o,b),fs=!1;var G=t.memoizedState;h.state=G,qn(t,o,h,d),Ln(),H=t.memoizedState,w||G!==H||fs?(typeof te=="function"&&(vc(t,r,te,o),H=t.memoizedState),(C=fs||pf(t,r,C,o,G,H,b))?(Z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=H),h.props=o,h.state=H,h.context=b,o=C):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{h=t.stateNode,Xo(e,t),b=t.memoizedProps,Z=Ws(r,b),h.props=Z,te=t.pendingProps,G=h.context,H=r.contextType,C=Tr,typeof H=="object"&&H!==null&&(C=St(H)),w=r.getDerivedStateFromProps,(H=typeof w=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==te||G!==C)&&xf(t,h,o,C),fs=!1,G=t.memoizedState,h.state=G,qn(t,o,h,d),Ln();var J=t.memoizedState;b!==te||G!==J||fs||e!==null&&e.dependencies!==null&&Ii(e.dependencies)?(typeof w=="function"&&(vc(t,r,w,o),J=t.memoizedState),(Z=fs||pf(t,r,Z,o,G,J,C)||e!==null&&e.dependencies!==null&&Ii(e.dependencies))?(H||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,J,C),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,J,C)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=J),h.props=o,h.state=J,h.context=C,o=Z):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),o=!1)}return h=o,cl(e,t),o=(t.flags&128)!==0,h||o?(h=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&o?(t.child=Xs(t,e.child,null,d),t.child=Xs(t,null,r,d)):kt(e,t,r,d),t.memoizedState=h.state,e=t.child):e=Ya(e,t,d),e}function Of(e,t,r,o){return Vs(),t.flags|=256,kt(e,t,r,o),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:yh()}}function Ec(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Yt),e}function Rf(e,t,r){var o=t.pendingProps,d=!1,h=(t.flags&128)!==0,b;if((b=h)||(b=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),b&&(d=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(d?xs(t):bs(),(e=Ye)?(e=$m(e,ia),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:cs!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},r=uh(e),r.return=t,t.child=r,Nt=t,Ye=null)):e=null,e===null)throw ds(t);return cu(e)?t.lanes=32:t.lanes=536870912,null}var w=o.children;return o=o.fallback,d?(bs(),d=t.mode,w=ul({mode:"hidden",children:w},d),o=Is(o,d,r,null),w.return=t,o.return=t,w.sibling=o,t.child=w,o=t.child,o.memoizedState=kc(r),o.childLanes=Ec(e,b,r),t.memoizedState=Sc,Pn(null,o)):(xs(t),Tc(t,w))}var C=e.memoizedState;if(C!==null&&(w=C.dehydrated,w!==null)){if(h)t.flags&256?(xs(t),t.flags&=-257,t=Ac(e,t,r)):t.memoizedState!==null?(bs(),t.child=e.child,t.flags|=128,t=null):(bs(),w=o.fallback,d=t.mode,o=ul({mode:"visible",children:o.children},d),w=Is(w,d,r,null),w.flags|=2,o.return=t,w.return=t,o.sibling=w,t.child=o,Xs(t,e.child,null,r),o=t.child,o.memoizedState=kc(r),o.childLanes=Ec(e,b,r),t.memoizedState=Sc,t=Pn(null,o));else if(xs(t),cu(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var H=b.dgst;b=H,o=Error(l(419)),o.stack="",o.digest=b,An({value:o,source:null,stack:null}),t=Ac(e,t,r)}else if(ut||Rr(e,t,r,!1),b=(r&e.childLanes)!==0,ut||b){if(b=Ie,b!==null&&(o=bd(b,r),o!==0&&o!==C.retryLane))throw C.retryLane=o,Gs(e,o),Pt(b,e,o),_c;ou(w)||yl(),t=Ac(e,t,r)}else ou(w)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Ye=oa(w.nextSibling),Nt=t,Ce=!0,us=null,ia=!1,e!==null&&fh(t,e),t=Tc(t,o.children),t.flags|=4096);return t}return d?(bs(),w=o.fallback,d=t.mode,C=e.child,H=C.sibling,o=Pa(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,H!==null?w=Pa(H,w):(w=Is(w,d,r,null),w.flags|=2),w.return=t,o.return=t,o.sibling=w,t.child=o,Pn(null,o),o=t.child,w=e.child.memoizedState,w===null?w=kc(r):(d=w.cachePool,d!==null?(C=ot._currentValue,d=d.parent!==C?{parent:C,pool:C}:d):d=yh(),w={baseLanes:w.baseLanes|r,cachePool:d}),o.memoizedState=w,o.childLanes=Ec(e,b,r),t.memoizedState=Sc,Pn(e.child,o)):(xs(t),r=e.child,e=r.sibling,r=Pa(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=r,t.memoizedState=null,r)}function Tc(e,t){return t=ul({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ul(e,t){return e=Gt(22,e,null,t),e.lanes=0,e}function Ac(e,t,r){return Xs(t,e.child,null,r),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Df(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Io(e.return,t,r)}function Cc(e,t,r,o,d,h){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:h}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=r,b.tailMode=d,b.treeForkCount=h)}function Mf(e,t,r){var o=t.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var b=nt.current,w=(b&2)!==0;if(w?(b=b&1|2,t.flags|=128):b&=1,ie(nt,b),kt(e,t,o,r),o=Ce?Tn:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Df(e,r,t);else if(e.tag===19)Df(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Zi(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Cc(t,!1,d,r,h,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Zi(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Cc(t,!0,r,null,h,o);break;case"together":Cc(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Ya(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vs|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Rr(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,r=Pa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Oc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ii(e)))}function Sb(e,t,r){switch(t.tag){case 3:ne(t,t.stateNode.containerInfo),hs(t,ot,e.memoizedState.cache),Vs();break;case 27:case 5:ue(t);break;case 4:ne(t,t.stateNode.containerInfo);break;case 10:hs(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ac(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(xs(t),t.flags|=128,null):(r&t.child.childLanes)!==0?Rf(e,t,r):(xs(t),e=Ya(e,t,r),e!==null?e.sibling:null);xs(t);break;case 19:var d=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(Rr(e,t,r,!1),o=(r&t.childLanes)!==0),d){if(o)return Mf(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ie(nt,nt.current),o)break;return null;case 22:return t.lanes=0,kf(e,t,r,t.pendingProps);case 24:hs(t,ot,e.memoizedState.cache)}return Ya(e,t,r)}function Lf(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)ut=!0;else{if(!Oc(e,r)&&(t.flags&128)===0)return ut=!1,Sb(e,t,r);ut=(e.flags&131072)!==0}else ut=!1,Ce&&(t.flags&1048576)!==0&&hh(t,Tn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Fs(t.elementType),t.type=e,typeof e=="function")qo(e)?(o=Ws(e,o),t.tag=1,t=Cf(null,t,e,o,r)):(t.tag=0,t=Nc(null,t,e,o,r));else{if(e!=null){var d=e.$$typeof;if(d===M){t.tag=11,t=_f(null,t,e,o,r);break e}else if(d===O){t.tag=14,t=Nf(null,t,e,o,r);break e}}throw t=ge(e)||e,Error(l(306,t,""))}}return t;case 0:return Nc(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,d=Ws(o,t.pendingProps),Cf(e,t,o,d,r);case 3:e:{if(ne(t,t.stateNode.containerInfo),e===null)throw Error(l(387));o=t.pendingProps;var h=t.memoizedState;d=h.element,Xo(e,t),qn(t,o,null,r);var b=t.memoizedState;if(o=b.cache,hs(t,ot,o),o!==h.cache&&Vo(t,[ot],r,!0),Ln(),o=b.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=Of(e,t,o,r);break e}else if(o!==d){d=sa(Error(l(424)),t),An(d),t=Of(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ye=oa(e.firstChild),Nt=t,Ce=!0,us=null,ia=!0,r=Sh(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Vs(),o===d){t=Ya(e,t,r);break e}kt(e,t,o,r)}t=t.child}return t;case 26:return cl(e,t),e===null?(r=Km(t.type,null,t.pendingProps,null))?t.memoizedState=r:Ce||(r=t.type,e=t.pendingProps,o=kl(ae.current).createElement(r),o[_t]=t,o[Lt]=e,Et(o,r,e),vt(o),t.stateNode=o):t.memoizedState=Km(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ue(t),e===null&&Ce&&(o=t.stateNode=Gm(t.type,t.pendingProps,ae.current),Nt=t,ia=!0,d=Ye,Ss(t.type)?(uu=d,Ye=oa(o.firstChild)):Ye=d),kt(e,t,t.pendingProps.children,r),cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((d=o=Ye)&&(o=tg(o,t.type,t.pendingProps,ia),o!==null?(t.stateNode=o,Nt=t,Ye=oa(o.firstChild),ia=!1,d=!0):d=!1),d||ds(t)),ue(t),d=t.type,h=t.pendingProps,b=e!==null?e.memoizedProps:null,o=h.children,nu(d,h)?o=null:b!==null&&nu(d,b)&&(t.flags|=32),t.memoizedState!==null&&(d=rc(e,t,xb,null,null,r),ai._currentValue=d),cl(e,t),kt(e,t,o,r),t.child;case 6:return e===null&&Ce&&((e=r=Ye)&&(r=ag(r,t.pendingProps,ia),r!==null?(t.stateNode=r,Nt=t,Ye=null,e=!0):e=!1),e||ds(t)),null;case 13:return Rf(e,t,r);case 4:return ne(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Xs(t,null,o,r):kt(e,t,o,r),t.child;case 11:return _f(e,t,t.type,t.pendingProps,r);case 7:return kt(e,t,t.pendingProps,r),t.child;case 8:return kt(e,t,t.pendingProps.children,r),t.child;case 12:return kt(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,hs(t,t.type,o.value),kt(e,t,o.children,r),t.child;case 9:return d=t.type._context,o=t.pendingProps.children,Ys(t),d=St(d),o=o(d),t.flags|=1,kt(e,t,o,r),t.child;case 14:return Nf(e,t,t.type,t.pendingProps,r);case 15:return Sf(e,t,t.type,t.pendingProps,r);case 19:return Mf(e,t,r);case 31:return Nb(e,t,r);case 22:return kf(e,t,r,t.pendingProps);case 24:return Ys(t),o=St(ot),e===null?(d=Jo(),d===null&&(d=Ie,h=Ko(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=r),d=h),t.memoizedState={parent:o,cache:d},Qo(t),hs(t,ot,d)):((e.lanes&r)!==0&&(Xo(e,t),qn(t,null,null,r),Ln()),d=e.memoizedState,h=t.memoizedState,d.parent!==o?(d={parent:o,cache:o},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),hs(t,ot,o)):(o=h.cache,hs(t,ot,o),o!==d.cache&&Vo(t,[ot],r,!0))),kt(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ja(e){e.flags|=4}function Rc(e,t,r,o,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(om())e.flags|=8192;else throw Qs=Ji,Fo}else e.flags&=-16777217}function qf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Xm(t))if(om())e.flags|=8192;else throw Qs=Ji,Fo}function dl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pn():536870912,e.lanes|=t,Ir|=t)}function Hn(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function kb(e,t,r){var o=t.pendingProps;switch($o(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return Je(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Ia(ot),le(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Or(t)?Ja(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ho())),Je(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(Ja(t),h!==null?(Je(t),qf(t,h)):(Je(t),Rc(t,d,null,o,r))):h?h!==e.memoizedState?(Ja(t),Je(t),qf(t,h)):(Je(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ja(t),Je(t),Rc(t,d,e,o,r)),null;case 27:if(me(t),r=ae.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ja(t);else{if(!o){if(t.stateNode===null)throw Error(l(166));return Je(t),null}e=F.current,Or(t)?mh(t):(e=Gm(d,o,r),t.stateNode=e,Ja(t))}return Je(t),null;case 5:if(me(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ja(t);else{if(!o){if(t.stateNode===null)throw Error(l(166));return Je(t),null}if(h=F.current,Or(t))mh(t);else{var b=kl(ae.current);switch(h){case 1:h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=b.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}h[_t]=t,h[Lt]=o;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=h;e:switch(Et(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ja(t)}}return Je(t),Rc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Ja(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(l(166));if(e=ae.current,Or(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,d=Nt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[_t]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Rm(e.nodeValue,r)),e||ds(t,!0)}else e=kl(e).createTextNode(o),e[_t]=t,t.stateNode=e}return Je(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(o=Or(t),r!==null){if(e===null){if(!o)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[_t]=t}else Vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),e=!1}else r=Ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(Vt(t),t):(Vt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Je(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Or(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[_t]=t}else Vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),d=!1}else d=Ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Vt(t),t):(Vt(t),null)}return Vt(t),(t.flags&128)!==0?(t.lanes=r,t):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=t.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),dl(t,t.updateQueue),Je(t),null);case 4:return le(),e===null&&eu(t.stateNode.containerInfo),Je(t),null;case 10:return Ia(t.type),Je(t),null;case 19:if(X(nt),o=t.memoizedState,o===null)return Je(t),null;if(d=(t.flags&128)!==0,h=o.rendering,h===null)if(d)Hn(o,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Zi(e),h!==null){for(t.flags|=128,Hn(o,!1),e=h.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)ch(r,e),r=r.sibling;return ie(nt,nt.current&1|2),Ce&&Ha(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&jt()>xl&&(t.flags|=128,d=!0,Hn(o,!1),t.lanes=4194304)}else{if(!d)if(e=Zi(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),Hn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Ce)return Je(t),null}else 2*jt()-o.renderingStartTime>xl&&r!==536870912&&(t.flags|=128,d=!0,Hn(o,!1),t.lanes=4194304);o.isBackwards?(h.sibling=t.child,t.child=h):(e=o.last,e!==null?e.sibling=h:t.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=jt(),e.sibling=null,r=nt.current,ie(nt,d?r&1|2:r&1),Ce&&Ha(t,o.treeForkCount),e):(Je(t),null);case 22:case 23:return Vt(t),tc(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),r=t.updateQueue,r!==null&&dl(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&X(Js),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ia(ot),Je(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Eb(e,t){switch($o(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ia(ot),le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return me(t),null;case 31:if(t.memoizedState!==null){if(Vt(t),t.alternate===null)throw Error(l(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Vt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(nt),null;case 4:return le(),null;case 10:return Ia(t.type),null;case 22:case 23:return Vt(t),tc(),e!==null&&X(Js),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ia(ot),null;case 25:return null;default:return null}}function zf(e,t){switch($o(t),t.tag){case 3:Ia(ot),le();break;case 26:case 27:case 5:me(t);break;case 4:le();break;case 31:t.memoizedState!==null&&Vt(t);break;case 13:Vt(t);break;case 19:X(nt);break;case 10:Ia(t.type);break;case 22:case 23:Vt(t),tc(),e!==null&&X(Js);break;case 24:Ia(ot)}}function Gn(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&e)===e){o=void 0;var h=r.create,b=r.inst;o=h(),b.destroy=o}r=r.next}while(r!==d)}}catch(w){ze(t,t.return,w)}}function gs(e,t,r){try{var o=t.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&e)===e){var b=o.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,d=t;var C=r,H=w;try{H()}catch(Z){ze(d,C,Z)}}}o=o.next}while(o!==h)}}catch(Z){ze(t,t.return,Z)}}function Uf(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Eh(t,r)}catch(o){ze(e,e.return,o)}}}function Bf(e,t,r){r.props=Ws(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){ze(e,t,o)}}function In(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(d){ze(e,t,d)}}function Oa(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){ze(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){ze(e,t,d)}else r.current=null}function $f(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){ze(e,e.return,d)}}function Dc(e,t,r){try{var o=e.stateNode;Fb(o,e.type,r,t),o[Lt]=t}catch(d){ze(e,e.return,d)}}function Pf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ss(e.type)||e.tag===4}function Mc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Pf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ss(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ba));else if(o!==4&&(o===27&&Ss(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Lc(e,t,r),e=e.sibling;e!==null;)Lc(e,t,r),e=e.sibling}function hl(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&Ss(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(hl(e,t,r),e=e.sibling;e!==null;)hl(e,t,r),e=e.sibling}function Hf(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Et(t,o,r),t[_t]=e,t[Lt]=r}catch(h){ze(e,e.return,h)}}var Fa=!1,dt=!1,qc=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Tb(e,t){if(e=e.containerInfo,su=Dl,e=eh(e),Ao(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var b=0,w=-1,C=-1,H=0,Z=0,te=e,G=null;t:for(;;){for(var J;te!==r||d!==0&&te.nodeType!==3||(w=b+d),te!==h||o!==0&&te.nodeType!==3||(C=b+o),te.nodeType===3&&(b+=te.nodeValue.length),(J=te.firstChild)!==null;)G=te,te=J;for(;;){if(te===e)break t;if(G===r&&++H===d&&(w=b),G===h&&++Z===o&&(C=b),(J=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=J}r=w===-1||C===-1?null:{start:w,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(ru={focusedElem:e,selectionRange:r},Dl=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){switch(t=wt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)d=e[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,r=t,d=h.memoizedProps,h=h.memoizedState,o=r.stateNode;try{var de=Ws(r.type,d);e=o.getSnapshotBeforeUpdate(de,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(ye){ze(r,r.return,ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)lu(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}}function If(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Xa(e,r),o&4&&Gn(5,r);break;case 1:if(Xa(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(b){ze(r,r.return,b)}else{var d=Ws(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){ze(r,r.return,b)}}o&64&&Uf(r),o&512&&In(r,r.return);break;case 3:if(Xa(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Eh(e,t)}catch(b){ze(r,r.return,b)}}break;case 27:t===null&&o&4&&Hf(r);case 26:case 5:Xa(e,r),t===null&&o&4&&$f(r),o&512&&In(r,r.return);break;case 12:Xa(e,r);break;case 31:Xa(e,r),o&4&&Yf(e,r);break;case 13:Xa(e,r),o&4&&Jf(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=zb.bind(null,r),sg(e,r))));break;case 22:if(o=r.memoizedState!==null||Fa,!o){t=t!==null&&t.memoizedState!==null||dt,d=Fa;var h=dt;Fa=o,(dt=t)&&!h?Za(e,r,(r.subtreeFlags&8772)!==0):Xa(e,r),Fa=d,dt=h}break;case 30:break;default:Xa(e,r)}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ho(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,zt=!1;function Qa(e,t,r){for(r=r.child;r!==null;)Kf(e,t,r),r=r.sibling}function Kf(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(ma,r)}catch{}switch(r.tag){case 26:dt||Oa(r,t),Qa(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:dt||Oa(r,t);var o=Fe,d=zt;Ss(r.type)&&(Fe=r.stateNode,zt=!1),Qa(e,t,r),Wn(r.stateNode),Fe=o,zt=d;break;case 5:dt||Oa(r,t);case 6:if(o=Fe,d=zt,Fe=null,Qa(e,t,r),Fe=o,zt=d,Fe!==null)if(zt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(r.stateNode)}catch(h){ze(r,t,h)}else try{Fe.removeChild(r.stateNode)}catch(h){ze(r,t,h)}break;case 18:Fe!==null&&(zt?(e=Fe,Um(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Zr(e)):Um(Fe,r.stateNode));break;case 4:o=Fe,d=zt,Fe=r.stateNode.containerInfo,zt=!0,Qa(e,t,r),Fe=o,zt=d;break;case 0:case 11:case 14:case 15:gs(2,r,t),dt||gs(4,r,t),Qa(e,t,r);break;case 1:dt||(Oa(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Bf(r,t,o)),Qa(e,t,r);break;case 21:Qa(e,t,r);break;case 22:dt=(o=dt)||r.memoizedState!==null,Qa(e,t,r),dt=o;break;default:Qa(e,t,r)}}function Yf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Zr(e)}catch(r){ze(t,t.return,r)}}}function Jf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Zr(e)}catch(r){ze(t,t.return,r)}}function Ab(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gf),t;default:throw Error(l(435,e.tag))}}function fl(e,t){var r=Ab(e);t.forEach(function(o){if(!r.has(o)){r.add(o);var d=Ub.bind(null,e,o);o.then(d,d)}})}function Ut(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],h=e,b=t,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(Ss(w.type)){Fe=w.stateNode,zt=!1;break e}break;case 5:Fe=w.stateNode,zt=!1;break e;case 3:case 4:Fe=w.stateNode.containerInfo,zt=!0;break e}w=w.return}if(Fe===null)throw Error(l(160));Kf(h,b,d),Fe=null,zt=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ff(t,e),t=t.sibling}var ba=null;function Ff(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(t,e),Bt(e),o&4&&(gs(3,e,e.return),Gn(3,e),gs(5,e,e.return));break;case 1:Ut(t,e),Bt(e),o&512&&(dt||r===null||Oa(r,r.return)),o&64&&Fa&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=ba;if(Ut(t,e),Bt(e),o&512&&(dt||r===null||Oa(r,r.return)),o&4){var h=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[bn]||h[_t]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),Et(h,o,r),h[_t]=e,vt(h),o=h;break e;case"link":var b=Fm("link","href",d).get(o+(r.href||""));if(b){for(var w=0;w<b.length;w++)if(h=b[w],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(w,1);break t}}h=d.createElement(o),Et(h,o,r),d.head.appendChild(h);break;case"meta":if(b=Fm("meta","content",d).get(o+(r.content||""))){for(w=0;w<b.length;w++)if(h=b[w],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(w,1);break t}}h=d.createElement(o),Et(h,o,r),d.head.appendChild(h);break;default:throw Error(l(468,o))}h[_t]=e,vt(h),o=h}e.stateNode=o}else Qm(d,e.type,e.stateNode);else e.stateNode=Jm(d,o,e.memoizedProps);else h!==o?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,o===null?Qm(d,e.type,e.stateNode):Jm(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Dc(e,e.memoizedProps,r.memoizedProps)}break;case 27:Ut(t,e),Bt(e),o&512&&(dt||r===null||Oa(r,r.return)),r!==null&&o&4&&Dc(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Ut(t,e),Bt(e),o&512&&(dt||r===null||Oa(r,r.return)),e.flags&32){d=e.stateNode;try{wr(d,"")}catch(de){ze(e,e.return,de)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Dc(e,d,r!==null?r.memoizedProps:d)),o&1024&&(qc=!0);break;case 6:if(Ut(t,e),Bt(e),o&4){if(e.stateNode===null)throw Error(l(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(de){ze(e,e.return,de)}}break;case 3:if(Al=null,d=ba,ba=El(t.containerInfo),Ut(t,e),ba=d,Bt(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Zr(t.containerInfo)}catch(de){ze(e,e.return,de)}qc&&(qc=!1,Qf(e));break;case 4:o=ba,ba=El(e.stateNode.containerInfo),Ut(t,e),Bt(e),ba=o;break;case 12:Ut(t,e),Bt(e);break;case 31:Ut(t,e),Bt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,fl(e,o)));break;case 13:Ut(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(pl=jt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,fl(e,o)));break;case 22:d=e.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,H=Fa,Z=dt;if(Fa=H||d,dt=Z||C,Ut(t,e),dt=Z,Fa=H,Bt(e),o&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(r===null||C||Fa||dt||er(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){C=r=t;try{if(h=C.stateNode,d)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=C.stateNode;var te=C.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(de){ze(C,C.return,de)}}}else if(t.tag===6){if(r===null){C=t;try{C.stateNode.nodeValue=d?"":C.memoizedProps}catch(de){ze(C,C.return,de)}}}else if(t.tag===18){if(r===null){C=t;try{var J=C.stateNode;d?Bm(J,!0):Bm(C.stateNode,!1)}catch(de){ze(C,C.return,de)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,fl(e,r))));break;case 19:Ut(t,e),Bt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,fl(e,o)));break;case 30:break;case 21:break;default:Ut(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(Pf(o)){r=o;break}o=o.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var d=r.stateNode,h=Mc(e);hl(e,h,d);break;case 5:var b=r.stateNode;r.flags&32&&(wr(b,""),r.flags&=-33);var w=Mc(e);hl(e,w,b);break;case 3:case 4:var C=r.stateNode.containerInfo,H=Mc(e);Lc(e,H,C);break;default:throw Error(l(161))}}catch(Z){ze(e,e.return,Z)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)If(e,t.alternate,t),t=t.sibling}function er(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:gs(4,t,t.return),er(t);break;case 1:Oa(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Bf(t,t.return,r),er(t);break;case 27:Wn(t.stateNode);case 26:case 5:Oa(t,t.return),er(t);break;case 22:t.memoizedState===null&&er(t);break;case 30:er(t);break;default:er(t)}e=e.sibling}}function Za(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,d=e,h=t,b=h.flags;switch(h.tag){case 0:case 11:case 15:Za(d,h,r),Gn(4,h);break;case 1:if(Za(d,h,r),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){ze(o,o.return,H)}if(o=h,d=o.updateQueue,d!==null){var w=o.stateNode;try{var C=d.shared.hiddenCallbacks;if(C!==null)for(d.shared.hiddenCallbacks=null,d=0;d<C.length;d++)kh(C[d],w)}catch(H){ze(o,o.return,H)}}r&&b&64&&Uf(h),In(h,h.return);break;case 27:Hf(h);case 26:case 5:Za(d,h,r),r&&o===null&&b&4&&$f(h),In(h,h.return);break;case 12:Za(d,h,r);break;case 31:Za(d,h,r),r&&b&4&&Yf(d,h);break;case 13:Za(d,h,r),r&&b&4&&Jf(d,h);break;case 22:h.memoizedState===null&&Za(d,h,r),In(h,h.return);break;case 30:break;default:Za(d,h,r)}t=t.sibling}}function zc(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Cn(r))}function Uc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cn(e))}function ga(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xf(e,t,r,o),t=t.sibling}function Xf(e,t,r,o){var d=t.flags;switch(t.tag){case 0:case 11:case 15:ga(e,t,r,o),d&2048&&Gn(9,t);break;case 1:ga(e,t,r,o);break;case 3:ga(e,t,r,o),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cn(e)));break;case 12:if(d&2048){ga(e,t,r,o),e=t.stateNode;try{var h=t.memoizedProps,b=h.id,w=h.onPostCommit;typeof w=="function"&&w(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){ze(t,t.return,C)}}else ga(e,t,r,o);break;case 31:ga(e,t,r,o);break;case 13:ga(e,t,r,o);break;case 23:break;case 22:h=t.stateNode,b=t.alternate,t.memoizedState!==null?h._visibility&2?ga(e,t,r,o):Vn(e,t):h._visibility&2?ga(e,t,r,o):(h._visibility|=2,Pr(e,t,r,o,(t.subtreeFlags&10256)!==0||!1)),d&2048&&zc(b,t);break;case 24:ga(e,t,r,o),d&2048&&Uc(t.alternate,t);break;default:ga(e,t,r,o)}}function Pr(e,t,r,o,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,b=t,w=r,C=o,H=b.flags;switch(b.tag){case 0:case 11:case 15:Pr(h,b,w,C,d),Gn(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?Pr(h,b,w,C,d):Vn(h,b):(Z._visibility|=2,Pr(h,b,w,C,d)),d&&H&2048&&zc(b.alternate,b);break;case 24:Pr(h,b,w,C,d),d&&H&2048&&Uc(b.alternate,b);break;default:Pr(h,b,w,C,d)}t=t.sibling}}function Vn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,d=o.flags;switch(o.tag){case 22:Vn(r,o),d&2048&&zc(o.alternate,o);break;case 24:Vn(r,o),d&2048&&Uc(o.alternate,o);break;default:Vn(r,o)}t=t.sibling}}var Kn=8192;function Hr(e,t,r){if(e.subtreeFlags&Kn)for(e=e.child;e!==null;)Zf(e,t,r),e=e.sibling}function Zf(e,t,r){switch(e.tag){case 26:Hr(e,t,r),e.flags&Kn&&e.memoizedState!==null&&pg(r,ba,e.memoizedState,e.memoizedProps);break;case 5:Hr(e,t,r);break;case 3:case 4:var o=ba;ba=El(e.stateNode.containerInfo),Hr(e,t,r),ba=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Kn,Kn=16777216,Hr(e,t,r),Kn=o):Hr(e,t,r));break;default:Hr(e,t,r)}}function Wf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Yn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];wt=o,tm(o,e)}Wf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)em(e),e=e.sibling}function em(e){switch(e.tag){case 0:case 11:case 15:Yn(e),e.flags&2048&&gs(9,e,e.return);break;case 3:Yn(e);break;case 12:Yn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ml(e)):Yn(e);break;default:Yn(e)}}function ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];wt=o,tm(o,e)}Wf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:gs(8,t,t.return),ml(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,ml(t));break;default:ml(t)}e=e.sibling}}function tm(e,t){for(;wt!==null;){var r=wt;switch(r.tag){case 0:case 11:case 15:gs(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Cn(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,wt=o;else e:for(r=e;wt!==null;){o=wt;var d=o.sibling,h=o.return;if(Vf(o),o===r){wt=null;break e}if(d!==null){d.return=h,wt=d;break e}wt=h}}}var Cb={getCacheForType:function(e){var t=St(ot),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return St(ot).controller.signal}},Ob=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ie=null,Se=null,Ee=0,qe=0,Kt=null,ys=!1,Gr=!1,Bc=!1,Wa=0,at=0,vs=0,tr=0,$c=0,Yt=0,Ir=0,Jn=null,$t=null,Pc=!1,pl=0,am=0,xl=1/0,bl=null,ws=null,bt=0,js=null,Vr=null,es=0,Hc=0,Gc=null,sm=null,Fn=0,Ic=null;function Jt(){return(Le&2)!==0&&Ee!==0?Ee&-Ee:V.T!==null?Qc():gd()}function rm(){if(Yt===0)if((Ee&536870912)===0||Ce){var e=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Yt=e}else Yt=536870912;return e=It.current,e!==null&&(e.flags|=32),Yt}function Pt(e,t,r){(e===Ie&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(Kr(e,0),_s(e,Ee,Yt,!1)),xn(e,r),((Le&2)===0||e!==Ie)&&(e===Ie&&((Le&2)===0&&(tr|=r),at===4&&_s(e,Ee,Yt,!1)),Ra(e))}function nm(e,t,r){if((Le&6)!==0)throw Error(l(327));var o=!r&&(t&127)===0&&(t&e.expiredLanes)===0||is(e,t),d=o?Mb(e,t):Kc(e,t,!0),h=o;do{if(d===0){Gr&&!o&&_s(e,t,0,!1);break}else{if(r=e.current.alternate,h&&!Rb(r)){d=Kc(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var w=e;d=Jn;var C=w.current.memoizedState.isDehydrated;if(C&&(Kr(w,b).flags|=256),b=Kc(w,b,!1),b!==2){if(Bc&&!C){w.errorRecoveryDisabledLanes|=h,tr|=h,d=4;break e}h=$t,$t=d,h!==null&&($t===null?$t=h:$t.push.apply($t,h))}d=b}if(h=!1,d!==2)continue}}if(d===1){Kr(e,0),_s(e,t,0,!0);break}e:{switch(o=e,h=d,h){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:_s(o,t,Yt,!ys);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(d=pl+300-jt(),10<d)){if(_s(o,t,Yt,!ys),Us(o,0,!0)!==0)break e;es=t,o.timeoutHandle=qm(im.bind(null,o,r,$t,bl,Pc,t,Yt,tr,Ir,ys,h,"Throttled",-0,0),d);break e}im(o,r,$t,bl,Pc,t,Yt,tr,Ir,ys,h,null,-0,0)}}break}while(!0);Ra(e)}function im(e,t,r,o,d,h,b,w,C,H,Z,te,G,J){if(e.timeoutHandle=-1,te=t.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ba},Zf(t,h,te);var de=(h&62914560)===h?pl-jt():(h&4194048)===h?am-jt():0;if(de=xg(te,de),de!==null){es=h,e.cancelPendingCommit=de(mm.bind(null,e,t,h,r,o,d,b,w,C,Z,te,null,G,J)),_s(e,h,b,!H);return}}mm(e,t,h,r,o,d,b,w,C)}function Rb(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],h=d.getSnapshot;d=d.value;try{if(!Ht(h(),d))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _s(e,t,r,o){t&=~$c,t&=~tr,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var d=t;0<d;){var h=31-xt(d),b=1<<h;o[h]=-1,d&=~b}r!==0&&pd(e,r,t)}function gl(){return(Le&6)===0?(Qn(0),!1):!0}function Vc(){if(Se!==null){if(qe===0)var e=Se.return;else e=Se,Ga=Ks=null,lc(e),qr=null,Rn=0,e=Se;for(;e!==null;)zf(e.alternate,e),e=e.return;Se=null}}function Kr(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Zb(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),es=0,Vc(),Ie=e,Se=r=Pa(e.current,null),Ee=t,qe=0,Kt=null,ys=!1,Gr=is(e,t),Bc=!1,Ir=Yt=$c=tr=vs=at=0,$t=Jn=null,Pc=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var d=31-xt(o),h=1<<d;t|=e[d],o&=~h}return Wa=t,Bi(),r}function lm(e,t){_e=null,V.H=$n,t===Lr||t===Yi?(t=jh(),qe=3):t===Fo?(t=jh(),qe=4):qe=t===_c?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Kt=t,Se===null&&(at=1,ll(e,sa(t,e.current)))}function om(){var e=It.current;return e===null?!0:(Ee&4194048)===Ee?la===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===la:!1}function cm(){var e=V.H;return V.H=$n,e===null?$n:e}function um(){var e=V.A;return V.A=Cb,e}function yl(){at=4,ys||(Ee&4194048)!==Ee&&It.current!==null||(Gr=!0),(vs&134217727)===0&&(tr&134217727)===0||Ie===null||_s(Ie,Ee,Yt,!1)}function Kc(e,t,r){var o=Le;Le|=2;var d=cm(),h=um();(Ie!==e||Ee!==t)&&(bl=null,Kr(e,t)),t=!1;var b=at;e:do try{if(qe!==0&&Se!==null){var w=Se,C=Kt;switch(qe){case 8:Vc(),b=6;break e;case 3:case 2:case 9:case 6:It.current===null&&(t=!0);var H=qe;if(qe=0,Kt=null,Yr(e,w,C,H),r&&Gr){b=0;break e}break;default:H=qe,qe=0,Kt=null,Yr(e,w,C,H)}}Db(),b=at;break}catch(Z){lm(e,Z)}while(!0);return t&&e.shellSuspendCounter++,Ga=Ks=null,Le=o,V.H=d,V.A=h,Se===null&&(Ie=null,Ee=0,Bi()),b}function Db(){for(;Se!==null;)dm(Se)}function Mb(e,t){var r=Le;Le|=2;var o=cm(),d=um();Ie!==e||Ee!==t?(bl=null,xl=jt()+500,Kr(e,t)):Gr=is(e,t);e:do try{if(qe!==0&&Se!==null){t=Se;var h=Kt;t:switch(qe){case 1:qe=0,Kt=null,Yr(e,t,h,1);break;case 2:case 9:if(vh(h)){qe=0,Kt=null,hm(t);break}t=function(){qe!==2&&qe!==9||Ie!==e||(qe=7),Ra(e)},h.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:vh(h)?(qe=0,Kt=null,hm(t)):(qe=0,Kt=null,Yr(e,t,h,7));break;case 5:var b=null;switch(Se.tag){case 26:b=Se.memoizedState;case 5:case 27:var w=Se;if(b?Xm(b):w.stateNode.complete){qe=0,Kt=null;var C=w.sibling;if(C!==null)Se=C;else{var H=w.return;H!==null?(Se=H,vl(H)):Se=null}break t}}qe=0,Kt=null,Yr(e,t,h,5);break;case 6:qe=0,Kt=null,Yr(e,t,h,6);break;case 8:Vc(),at=6;break e;default:throw Error(l(462))}}Lb();break}catch(Z){lm(e,Z)}while(!0);return Ga=Ks=null,V.H=o,V.A=d,Le=r,Se!==null?0:(Ie=null,Ee=0,Bi(),at)}function Lb(){for(;Se!==null&&!Rt();)dm(Se)}function dm(e){var t=Lf(e.alternate,e,Wa);e.memoizedProps=e.pendingProps,t===null?vl(e):Se=t}function hm(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Af(r,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=Af(r,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:lc(t);default:zf(r,t),t=Se=ch(t,Wa),t=Lf(r,t,Wa)}e.memoizedProps=e.pendingProps,t===null?vl(e):Se=t}function Yr(e,t,r,o){Ga=Ks=null,lc(t),qr=null,Rn=0;var d=t.return;try{if(_b(e,d,t,r,Ee)){at=1,ll(e,sa(r,e.current)),Se=null;return}}catch(h){if(d!==null)throw Se=d,h;at=1,ll(e,sa(r,e.current)),Se=null;return}t.flags&32768?(Ce||o===1?e=!0:Gr||(Ee&536870912)!==0?e=!1:(ys=e=!0,(o===2||o===9||o===3||o===6)&&(o=It.current,o!==null&&o.tag===13&&(o.flags|=16384))),fm(t,e)):vl(t)}function vl(e){var t=e;do{if((t.flags&32768)!==0){fm(t,ys);return}e=t.return;var r=kb(t.alternate,t,Wa);if(r!==null){Se=r;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);at===0&&(at=5)}function fm(e,t){do{var r=Eb(e.alternate,e);if(r!==null){r.flags&=32767,Se=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=r}while(e!==null);at=6,Se=null}function mm(e,t,r,o,d,h,b,w,C){e.cancelPendingCommit=null;do wl();while(bt!==0);if((Le&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(h=t.lanes|t.childLanes,h|=Mo,mx(e,r,h,b,w,C),e===Ie&&(Se=Ie=null,Ee=0),Vr=t,js=e,es=r,Hc=h,Gc=d,sm=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bb(mt,function(){return ym(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=V.T,V.T=null,d=se.p,se.p=2,b=Le,Le|=4;try{Tb(e,t,r)}finally{Le=b,se.p=d,V.T=o}}bt=1,pm(),xm(),bm()}}function pm(){if(bt===1){bt=0;var e=js,t=Vr,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=V.T,V.T=null;var o=se.p;se.p=2;var d=Le;Le|=4;try{Ff(t,e);var h=ru,b=eh(e.containerInfo),w=h.focusedElem,C=h.selectionRange;if(b!==w&&w&&w.ownerDocument&&Wd(w.ownerDocument.documentElement,w)){if(C!==null&&Ao(w)){var H=C.start,Z=C.end;if(Z===void 0&&(Z=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(Z,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var J=G.getSelection(),de=w.textContent.length,ye=Math.min(C.start,de),He=C.end===void 0?ye:Math.min(C.end,de);!J.extend&&ye>He&&(b=He,He=ye,ye=b);var U=Zd(w,ye),D=Zd(w,He);if(U&&D&&(J.rangeCount!==1||J.anchorNode!==U.node||J.anchorOffset!==U.offset||J.focusNode!==D.node||J.focusOffset!==D.offset)){var $=te.createRange();$.setStart(U.node,U.offset),J.removeAllRanges(),ye>He?(J.addRange($),J.extend(D.node,D.offset)):($.setEnd(D.node,D.offset),J.addRange($))}}}}for(te=[],J=w;J=J.parentNode;)J.nodeType===1&&te.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var W=te[w];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Dl=!!su,ru=su=null}finally{Le=d,se.p=o,V.T=r}}e.current=t,bt=2}}function xm(){if(bt===2){bt=0;var e=js,t=Vr,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=V.T,V.T=null;var o=se.p;se.p=2;var d=Le;Le|=4;try{If(e,t.alternate,t)}finally{Le=d,se.p=o,V.T=r}}bt=3}}function bm(){if(bt===4||bt===3){bt=0,Na();var e=js,t=Vr,r=es,o=sm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?bt=5:(bt=0,Vr=js=null,gm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ws=null),co(r),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(ma,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=V.T,d=se.p,se.p=2,V.T=null;try{for(var h=e.onRecoverableError,b=0;b<o.length;b++){var w=o[b];h(w.value,{componentStack:w.stack})}}finally{V.T=t,se.p=d}}(es&3)!==0&&wl(),Ra(e),d=e.pendingLanes,(r&261930)!==0&&(d&42)!==0?e===Ic?Fn++:(Fn=0,Ic=e):Fn=0,Qn(0)}}function gm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cn(t)))}function wl(){return pm(),xm(),bm(),ym()}function ym(){if(bt!==5)return!1;var e=js,t=Hc;Hc=0;var r=co(es),o=V.T,d=se.p;try{se.p=32>r?32:r,V.T=null,r=Gc,Gc=null;var h=js,b=es;if(bt=0,Vr=js=null,es=0,(Le&6)!==0)throw Error(l(331));var w=Le;if(Le|=4,em(h.current),Xf(h,h.current,b,r),Le=w,Qn(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(ma,h)}catch{}return!0}finally{se.p=d,V.T=o,gm(e,t)}}function vm(e,t,r){t=sa(r,t),t=jc(e.stateNode,t,2),e=ps(e,t,2),e!==null&&(xn(e,2),Ra(e))}function ze(e,t,r){if(e.tag===3)vm(e,e,r);else for(;t!==null;){if(t.tag===3){vm(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ws===null||!ws.has(o))){e=sa(r,e),r=wf(2),o=ps(t,r,2),o!==null&&(jf(r,o,t,e),xn(o,2),Ra(o));break}}t=t.return}}function Yc(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Ob;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(r)||(Bc=!0,d.add(r),e=qb.bind(null,e,t,r),t.then(e,e))}function qb(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ie===e&&(Ee&r)===r&&(at===4||at===3&&(Ee&62914560)===Ee&&300>jt()-pl?(Le&2)===0&&Kr(e,0):$c|=r,Ir===Ee&&(Ir=0)),Ra(e)}function wm(e,t){t===0&&(t=pn()),e=Gs(e,t),e!==null&&(xn(e,t),Ra(e))}function zb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wm(e,r)}function Ub(e,t){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(t),wm(e,r)}function Bb(e,t){return Ot(e,t)}var jl=null,Jr=null,Jc=!1,_l=!1,Fc=!1,Ns=0;function Ra(e){e!==Jr&&e.next===null&&(Jr===null?jl=Jr=e:Jr=Jr.next=e),_l=!0,Jc||(Jc=!0,Pb())}function Qn(e,t){if(!Fc&&_l){Fc=!0;do for(var r=!1,o=jl;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var b=o.suspendedLanes,w=o.pingedLanes;h=(1<<31-xt(42|e)+1)-1,h&=d&~(b&~w),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,Sm(o,h))}else h=Ee,h=Us(o,o===Ie?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||is(o,h)||(r=!0,Sm(o,h));o=o.next}while(r);Fc=!1}}function $b(){jm()}function jm(){_l=Jc=!1;var e=0;Ns!==0&&Xb()&&(e=Ns);for(var t=jt(),r=null,o=jl;o!==null;){var d=o.next,h=_m(o,t);h===0?(o.next=null,r===null?jl=d:r.next=d,d===null&&(Jr=r)):(r=o,(e!==0||(h&3)!==0)&&(_l=!0)),o=d}bt!==0&&bt!==5||Qn(e),Ns!==0&&(Ns=0)}function _m(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var b=31-xt(h),w=1<<b,C=d[b];C===-1?((w&r)===0||(w&o)!==0)&&(d[b]=Ei(w,t)):C<=t&&(e.expiredLanes|=w),h&=~w}if(t=Ie,r=Ee,r=Us(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&_a(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||is(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&_a(o),co(r)){case 2:case 8:r=Qe;break;case 32:r=mt;break;case 268435456:r=yt;break;default:r=mt}return o=Nm.bind(null,e),r=Ot(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&_a(o),e.callbackPriority=2,e.callbackNode=null,2}function Nm(e,t){if(bt!==0&&bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(wl()&&e.callbackNode!==r)return null;var o=Ee;return o=Us(e,e===Ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(nm(e,o,t),_m(e,jt()),e.callbackNode!=null&&e.callbackNode===r?Nm.bind(null,e):null)}function Sm(e,t){if(wl())return null;nm(e,t,!0)}function Pb(){Wb(function(){(Le&6)!==0?Ot(Re,$b):jm()})}function Qc(){if(Ns===0){var e=Dr;e===0&&(e=ka,ka<<=1,(ka&261888)===0&&(ka=256)),Ns=e}return Ns}function km(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Oi(""+e)}function Em(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function Hb(e,t,r,o,d){if(t==="submit"&&r&&r.stateNode===d){var h=km((d[Lt]||null).action),b=o.submitter;b&&(t=(t=b[Lt]||null)?km(t.formAction):b.getAttribute("formAction"),t!==null&&(h=t,b=null));var w=new Li("action","action",null,o,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ns!==0){var C=b?Em(d,b):new FormData(d);xc(r,{pending:!0,data:C,method:d.method,action:h},null,C)}}else typeof h=="function"&&(w.preventDefault(),C=b?Em(d,b):new FormData(d),xc(r,{pending:!0,data:C,method:d.method,action:h},h,C))},currentTarget:d}]})}}for(var Xc=0;Xc<Do.length;Xc++){var Zc=Do[Xc],Gb=Zc.toLowerCase(),Ib=Zc[0].toUpperCase()+Zc.slice(1);xa(Gb,"on"+Ib)}xa(sh,"onAnimationEnd"),xa(rh,"onAnimationIteration"),xa(nh,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(ib,"onTransitionRun"),xa(lb,"onTransitionStart"),xa(ob,"onTransitionCancel"),xa(ih,"onTransitionEnd"),yr("onMouseEnter",["mouseout","mouseover"]),yr("onMouseLeave",["mouseout","mouseover"]),yr("onPointerEnter",["pointerout","pointerover"]),yr("onPointerLeave",["pointerout","pointerover"]),Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xn));function Tm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],d=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var b=o.length-1;0<=b;b--){var w=o[b],C=w.instance,H=w.currentTarget;if(w=w.listener,C!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=H;try{h(d)}catch(Z){Ui(Z)}d.currentTarget=null,h=C}else for(b=0;b<o.length;b++){if(w=o[b],C=w.instance,H=w.currentTarget,w=w.listener,C!==h&&d.isPropagationStopped())break e;h=w,d.currentTarget=H;try{h(d)}catch(Z){Ui(Z)}d.currentTarget=null,h=C}}}}function ke(e,t){var r=t[uo];r===void 0&&(r=t[uo]=new Set);var o=e+"__bubble";r.has(o)||(Am(t,e,2,!1),r.add(o))}function Wc(e,t,r){var o=0;t&&(o|=4),Am(r,e,o,t)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Nl]){e[Nl]=!0,wd.forEach(function(r){r!=="selectionchange"&&(Vb.has(r)||Wc(r,!1,e),Wc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nl]||(t[Nl]=!0,Wc("selectionchange",!1,t))}}function Am(e,t,r,o){switch(rp(t)){case 2:var d=yg;break;case 8:d=vg;break;default:d=pu}r=d.bind(null,t,r,e),d=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function tu(e,t,r,o,d){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var w=o.stateNode.containerInfo;if(w===d)break;if(b===4)for(b=o.return;b!==null;){var C=b.tag;if((C===3||C===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;w!==null;){if(b=xr(w),b===null)return;if(C=b.tag,C===5||C===6||C===26||C===27){o=h=b;continue e}w=w.parentNode}}o=o.return}Dd(function(){var H=h,Z=go(r),te=[];e:{var G=lh.get(e);if(G!==void 0){var J=Li,de=e;switch(e){case"keypress":if(Di(r)===0)break e;case"keydown":case"keyup":J=Ux;break;case"focusin":de="focus",J=No;break;case"focusout":de="blur",J=No;break;case"beforeblur":case"afterblur":J=No;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=kx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Px;break;case sh:case rh:case nh:J=Ax;break;case ih:J=Gx;break;case"scroll":case"scrollend":J=Nx;break;case"wheel":J=Vx;break;case"copy":case"cut":case"paste":J=Ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Ud;break;case"toggle":case"beforetoggle":J=Yx}var ye=(t&4)!==0,He=!ye&&(e==="scroll"||e==="scrollend"),U=ye?G!==null?G+"Capture":null:G;ye=[];for(var D=H,$;D!==null;){var W=D;if($=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||$===null||U===null||(W=yn(D,U),W!=null&&ye.push(Zn(D,W,$))),He)break;D=D.return}0<ye.length&&(G=new J(G,de,null,r,Z),te.push({event:G,listeners:ye}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",G&&r!==bo&&(de=r.relatedTarget||r.fromElement)&&(xr(de)||de[pr]))break e;if((J||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,J?(de=r.relatedTarget||r.toElement,J=H,de=de?xr(de):null,de!==null&&(He=u(de),ye=de.tag,de!==He||ye!==5&&ye!==27&&ye!==6)&&(de=null)):(J=null,de=H),J!==de)){if(ye=qd,W="onMouseLeave",U="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ye=Ud,W="onPointerLeave",U="onPointerEnter",D="pointer"),He=J==null?G:gn(J),$=de==null?G:gn(de),G=new ye(W,D+"leave",J,r,Z),G.target=He,G.relatedTarget=$,W=null,xr(Z)===H&&(ye=new ye(U,D+"enter",de,r,Z),ye.target=$,ye.relatedTarget=He,W=ye),He=W,J&&de)t:{for(ye=Kb,U=J,D=de,$=0,W=U;W;W=ye(W))$++;W=0;for(var be=D;be;be=ye(be))W++;for(;0<$-W;)U=ye(U),$--;for(;0<W-$;)D=ye(D),W--;for(;$--;){if(U===D||D!==null&&U===D.alternate){ye=U;break t}U=ye(U),D=ye(D)}ye=null}else ye=null;J!==null&&Cm(te,G,J,ye,!1),de!==null&&He!==null&&Cm(te,He,de,ye,!0)}}e:{if(G=H?gn(H):window,J=G.nodeName&&G.nodeName.toLowerCase(),J==="select"||J==="input"&&G.type==="file")var De=Kd;else if(Id(G))if(Yd)De=sb;else{De=tb;var fe=eb}else J=G.nodeName,!J||J.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&xo(H.elementType)&&(De=Kd):De=ab;if(De&&(De=De(e,H))){Vd(te,De,r,Z);break e}fe&&fe(e,G,H),e==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&po(G,"number",G.value)}switch(fe=H?gn(H):window,e){case"focusin":(Id(fe)||fe.contentEditable==="true")&&(Sr=fe,Co=H,En=null);break;case"focusout":En=Co=Sr=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,th(te,r,Z);break;case"selectionchange":if(nb)break;case"keydown":case"keyup":th(te,r,Z)}var Ne;if(ko)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Nr?Hd(e,r)&&(Te="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Te="onCompositionStart");Te&&(Bd&&r.locale!=="ko"&&(Nr||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Nr&&(Ne=Md()):(os=Z,wo="value"in os?os.value:os.textContent,Nr=!0)),fe=Sl(H,Te),0<fe.length&&(Te=new zd(Te,e,null,r,Z),te.push({event:Te,listeners:fe}),Ne?Te.data=Ne:(Ne=Gd(r),Ne!==null&&(Te.data=Ne)))),(Ne=Fx?Qx(e,r):Xx(e,r))&&(Te=Sl(H,"onBeforeInput"),0<Te.length&&(fe=new zd("onBeforeInput","beforeinput",null,r,Z),te.push({event:fe,listeners:Te}),fe.data=Ne)),Hb(te,e,H,r,Z)}Tm(te,t)})}function Zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sl(e,t){for(var r=t+"Capture",o=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=yn(e,r),d!=null&&o.unshift(Zn(e,d,h)),d=yn(e,t),d!=null&&o.push(Zn(e,d,h))),e.tag===3)return o;e=e.return}return[]}function Kb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Cm(e,t,r,o,d){for(var h=t._reactName,b=[];r!==null&&r!==o;){var w=r,C=w.alternate,H=w.stateNode;if(w=w.tag,C!==null&&C===o)break;w!==5&&w!==26&&w!==27||H===null||(C=H,d?(H=yn(r,h),H!=null&&b.unshift(Zn(r,H,C))):d||(H=yn(r,h),H!=null&&b.push(Zn(r,H,C)))),r=r.return}b.length!==0&&e.push({event:t,listeners:b})}var Yb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function Om(e){return(typeof e=="string"?e:""+e).replace(Yb,`
`).replace(Jb,"")}function Rm(e,t){return t=Om(t),Om(e)===t}function Pe(e,t,r,o,d,h){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||wr(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&wr(e,""+o);break;case"className":Ai(e,"class",o);break;case"tabIndex":Ai(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(e,r,o);break;case"style":Od(e,o,h);break;case"data":if(t!=="object"){Ai(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Oi(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(t!=="input"&&Pe(e,t,"name",d.name,d,null),Pe(e,t,"formEncType",d.formEncType,d,null),Pe(e,t,"formMethod",d.formMethod,d,null),Pe(e,t,"formTarget",d.formTarget,d,null)):(Pe(e,t,"encType",d.encType,d,null),Pe(e,t,"method",d.method,d,null),Pe(e,t,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Oi(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Ba);break;case"onScroll":o!=null&&ke("scroll",e);break;case"onScrollEnd":o!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Oi(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":ke("beforetoggle",e),ke("toggle",e),Ti(e,"popover",o);break;case"xlinkActuate":Ua(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ua(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ua(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ua(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ua(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ua(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ua(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ti(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=jx.get(r)||r,Ti(e,r,o))}}function au(e,t,r,o,d,h){switch(r){case"style":Od(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=r}}break;case"children":typeof o=="string"?wr(e,o):(typeof o=="number"||typeof o=="bigint")&&wr(e,""+o);break;case"onScroll":o!=null&&ke("scroll",e);break;case"onScrollEnd":o!=null&&ke("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ba);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),t=r.slice(2,d?r.length-7:void 0),h=e[Lt]||null,h=h!=null?h[r]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,d);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Ti(e,r,o)}}}function Et(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var o=!1,d=!1,h;for(h in r)if(r.hasOwnProperty(h)){var b=r[h];if(b!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Pe(e,t,h,b,r,null)}}d&&Pe(e,t,"srcSet",r.srcSet,r,null),o&&Pe(e,t,"src",r.src,r,null);return;case"input":ke("invalid",e);var w=h=b=d=null,C=null,H=null;for(o in r)if(r.hasOwnProperty(o)){var Z=r[o];if(Z!=null)switch(o){case"name":d=Z;break;case"type":b=Z;break;case"checked":C=Z;break;case"defaultChecked":H=Z;break;case"value":h=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(137,t));break;default:Pe(e,t,o,Z,r,null)}}Ed(e,h,w,C,H,b,d,!1);return;case"select":ke("invalid",e),o=b=h=null;for(d in r)if(r.hasOwnProperty(d)&&(w=r[d],w!=null))switch(d){case"value":h=w;break;case"defaultValue":b=w;break;case"multiple":o=w;default:Pe(e,t,d,w,r,null)}t=h,r=b,e.multiple=!!o,t!=null?vr(e,!!o,t,!1):r!=null&&vr(e,!!o,r,!0);return;case"textarea":ke("invalid",e),h=d=o=null;for(b in r)if(r.hasOwnProperty(b)&&(w=r[b],w!=null))switch(b){case"value":o=w;break;case"defaultValue":d=w;break;case"children":h=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(l(91));break;default:Pe(e,t,b,w,r,null)}Ad(e,o,d,h);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(o=r[C],o!=null))switch(C){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Pe(e,t,C,o,r,null)}return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(o=0;o<Xn.length;o++)ke(Xn[o],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in r)if(r.hasOwnProperty(H)&&(o=r[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Pe(e,t,H,o,r,null)}return;default:if(xo(t)){for(Z in r)r.hasOwnProperty(Z)&&(o=r[Z],o!==void 0&&au(e,t,Z,o,r,void 0));return}}for(w in r)r.hasOwnProperty(w)&&(o=r[w],o!=null&&Pe(e,t,w,o,r,null))}function Fb(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,b=null,w=null,C=null,H=null,Z=null;for(J in r){var te=r[J];if(r.hasOwnProperty(J)&&te!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":C=te;default:o.hasOwnProperty(J)||Pe(e,t,J,null,o,te)}}for(var G in o){var J=o[G];if(te=r[G],o.hasOwnProperty(G)&&(J!=null||te!=null))switch(G){case"type":h=J;break;case"name":d=J;break;case"checked":H=J;break;case"defaultChecked":Z=J;break;case"value":b=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(l(137,t));break;default:J!==te&&Pe(e,t,G,J,o,te)}}mo(e,b,w,C,H,Z,h,d);return;case"select":J=b=w=G=null;for(h in r)if(C=r[h],r.hasOwnProperty(h)&&C!=null)switch(h){case"value":break;case"multiple":J=C;default:o.hasOwnProperty(h)||Pe(e,t,h,null,o,C)}for(d in o)if(h=o[d],C=r[d],o.hasOwnProperty(d)&&(h!=null||C!=null))switch(d){case"value":G=h;break;case"defaultValue":w=h;break;case"multiple":b=h;default:h!==C&&Pe(e,t,d,h,o,C)}t=w,r=b,o=J,G!=null?vr(e,!!r,G,!1):!!o!=!!r&&(t!=null?vr(e,!!r,t,!0):vr(e,!!r,r?[]:"",!1));return;case"textarea":J=G=null;for(w in r)if(d=r[w],r.hasOwnProperty(w)&&d!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Pe(e,t,w,null,o,d)}for(b in o)if(d=o[b],h=r[b],o.hasOwnProperty(b)&&(d!=null||h!=null))switch(b){case"value":G=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==h&&Pe(e,t,b,d,o,h)}Td(e,G,J);return;case"option":for(var de in r)if(G=r[de],r.hasOwnProperty(de)&&G!=null&&!o.hasOwnProperty(de))switch(de){case"selected":e.selected=!1;break;default:Pe(e,t,de,null,o,G)}for(C in o)if(G=o[C],J=r[C],o.hasOwnProperty(C)&&G!==J&&(G!=null||J!=null))switch(C){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Pe(e,t,C,G,o,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in r)G=r[ye],r.hasOwnProperty(ye)&&G!=null&&!o.hasOwnProperty(ye)&&Pe(e,t,ye,null,o,G);for(H in o)if(G=o[H],J=r[H],o.hasOwnProperty(H)&&G!==J&&(G!=null||J!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(l(137,t));break;default:Pe(e,t,H,G,o,J)}return;default:if(xo(t)){for(var He in r)G=r[He],r.hasOwnProperty(He)&&G!==void 0&&!o.hasOwnProperty(He)&&au(e,t,He,void 0,o,G);for(Z in o)G=o[Z],J=r[Z],!o.hasOwnProperty(Z)||G===J||G===void 0&&J===void 0||au(e,t,Z,G,o,J);return}}for(var U in r)G=r[U],r.hasOwnProperty(U)&&G!=null&&!o.hasOwnProperty(U)&&Pe(e,t,U,null,o,G);for(te in o)G=o[te],J=r[te],!o.hasOwnProperty(te)||G===J||G==null&&J==null||Pe(e,t,te,G,o,J)}function Dm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],h=d.transferSize,b=d.initiatorType,w=d.duration;if(h&&w&&Dm(b)){for(b=0,w=d.responseEnd,o+=1;o<r.length;o++){var C=r[o],H=C.startTime;if(H>w)break;var Z=C.transferSize,te=C.initiatorType;Z&&Dm(te)&&(C=C.responseEnd,b+=Z*(C<w?1:(w-H)/(C-H)))}if(--o,t+=8*(h+b)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var su=null,ru=null;function kl(e){return e.nodeType===9?e:e.ownerDocument}function Mm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function nu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var iu=null;function Xb(){var e=window.event;return e&&e.type==="popstate"?e===iu?!1:(iu=e,!0):(iu=null,!1)}var qm=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(e){return zm.resolve(null).then(e).catch(eg)}:qm;function eg(e){setTimeout(function(){throw e})}function Ss(e){return e==="head"}function Um(e,t){var r=t,o=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(d),Zr(t);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Wn(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Wn(r);for(var h=r.firstChild;h;){var b=h.nextSibling,w=h.nodeName;h[bn]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&h.rel.toLowerCase()==="stylesheet"||r.removeChild(h),h=b}}else r==="body"&&Wn(e.ownerDocument.body);r=d}while(r);Zr(t)}function Bm(e,t){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function lu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":lu(r),ho(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function tg(e,t,r,o){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[bn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=oa(e.nextSibling),e===null)break}return null}function ag(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=oa(e.nextSibling),e===null))return null;return e}function $m(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=oa(e.nextSibling),e===null))return null;return e}function ou(e){return e.data==="$?"||e.data==="$~"}function cu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sg(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function oa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var uu=null;function Pm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return oa(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function Hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function Gm(e,t,r){switch(t=kl(r),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Wn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ho(e)}var ca=new Map,Im=new Set;function El(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ts=se.d;se.d={f:rg,r:ng,D:ig,C:lg,L:og,m:cg,X:dg,S:ug,M:hg};function rg(){var e=ts.f(),t=gl();return e||t}function ng(e){var t=br(e);t!==null&&t.tag===5&&t.type==="form"?lf(t):ts.r(e)}var Fr=typeof document>"u"?null:document;function Vm(e,t,r){var o=Fr;if(o&&typeof t=="string"&&t){var d=ta(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Im.has(d)||(Im.add(d),e={rel:e,crossOrigin:r,href:t},o.querySelector(d)===null&&(t=o.createElement("link"),Et(t,"link",e),vt(t),o.head.appendChild(t)))}}function ig(e){ts.D(e),Vm("dns-prefetch",e,null)}function lg(e,t){ts.C(e,t),Vm("preconnect",e,t)}function og(e,t,r){ts.L(e,t,r);var o=Fr;if(o&&e&&t){var d='link[rel="preload"][as="'+ta(t)+'"]';t==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+ta(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+ta(r.imageSizes)+'"]')):d+='[href="'+ta(e)+'"]';var h=d;switch(t){case"style":h=Qr(e);break;case"script":h=Xr(e)}ca.has(h)||(e=y({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),ca.set(h,e),o.querySelector(d)!==null||t==="style"&&o.querySelector(ei(h))||t==="script"&&o.querySelector(ti(h))||(t=o.createElement("link"),Et(t,"link",e),vt(t),o.head.appendChild(t)))}}function cg(e,t){ts.m(e,t);var r=Fr;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+ta(o)+'"][href="'+ta(e)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Xr(e)}if(!ca.has(h)&&(e=y({rel:"modulepreload",href:e},t),ca.set(h,e),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ti(h)))return}o=r.createElement("link"),Et(o,"link",e),vt(o),r.head.appendChild(o)}}}function ug(e,t,r){ts.S(e,t,r);var o=Fr;if(o&&e){var d=gr(o).hoistableStyles,h=Qr(e);t=t||"default";var b=d.get(h);if(!b){var w={loading:0,preload:null};if(b=o.querySelector(ei(h)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},r),(r=ca.get(h))&&du(e,r);var C=b=o.createElement("link");vt(C),Et(C,"link",e),C._p=new Promise(function(H,Z){C.onload=H,C.onerror=Z}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Tl(b,t,o)}b={type:"stylesheet",instance:b,count:1,state:w},d.set(h,b)}}}function dg(e,t){ts.X(e,t);var r=Fr;if(r&&e){var o=gr(r).hoistableScripts,d=Xr(e),h=o.get(d);h||(h=r.querySelector(ti(d)),h||(e=y({src:e,async:!0},t),(t=ca.get(d))&&hu(e,t),h=r.createElement("script"),vt(h),Et(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function hg(e,t){ts.M(e,t);var r=Fr;if(r&&e){var o=gr(r).hoistableScripts,d=Xr(e),h=o.get(d);h||(h=r.querySelector(ti(d)),h||(e=y({src:e,async:!0,type:"module"},t),(t=ca.get(d))&&hu(e,t),h=r.createElement("script"),vt(h),Et(h,"link",e),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Km(e,t,r,o){var d=(d=ae.current)?El(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Qr(r.href),r=gr(d).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Qr(r.href);var h=gr(d).hoistableStyles,b=h.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,b),(h=d.querySelector(ei(e)))&&!h._p&&(b.instance=h,b.state.loading=5),ca.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ca.set(e,r),h||fg(d,e,r,b.state))),t&&o===null)throw Error(l(528,""));return b}if(t&&o!==null)throw Error(l(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xr(r),r=gr(d).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Qr(e){return'href="'+ta(e)+'"'}function ei(e){return'link[rel="stylesheet"]['+e+"]"}function Ym(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function fg(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Et(t,"link",r),vt(t),e.head.appendChild(t))}function Xr(e){return'[src="'+ta(e)+'"]'}function ti(e){return"script[async]"+e}function Jm(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ta(r.href)+'"]');if(o)return t.instance=o,vt(o),o;var d=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),vt(o),Et(o,"style",d),Tl(o,r.precedence,e),t.instance=o;case"stylesheet":d=Qr(r.href);var h=e.querySelector(ei(d));if(h)return t.state.loading|=4,t.instance=h,vt(h),h;o=Ym(r),(d=ca.get(d))&&du(o,d),h=(e.ownerDocument||e).createElement("link"),vt(h);var b=h;return b._p=new Promise(function(w,C){b.onload=w,b.onerror=C}),Et(h,"link",o),t.state.loading|=4,Tl(h,r.precedence,e),t.instance=h;case"script":return h=Xr(r.src),(d=e.querySelector(ti(h)))?(t.instance=d,vt(d),d):(o=r,(d=ca.get(h))&&(o=y({},r),hu(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),vt(d),Et(d,"link",o),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Tl(o,r.precedence,e));return t.instance}function Tl(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,b=0;b<o.length;b++){var w=o[b];if(w.dataset.precedence===t)h=w;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Al=null;function Fm(e,t,r){if(Al===null){var o=new Map,d=Al=new Map;d.set(r,o)}else d=Al,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var h=r[d];if(!(h[bn]||h[_t]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(t)||"";b=e+b;var w=o.get(b);w?w.push(h):o.set(b,[h])}}return o}function Qm(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function mg(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Xm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function pg(e,t,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Qr(o.href),h=t.querySelector(ei(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Cl.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=h,vt(h);return}h=t.ownerDocument||t,o=Ym(o),(d=ca.get(d))&&du(o,d),h=h.createElement("link"),vt(h);var b=h;b._p=new Promise(function(w,C){b.onload=w,b.onerror=C}),Et(h,"link",o),r.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Cl.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var fu=0;function xg(e,t){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&fu===0&&(fu=62500*Qb());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>fu?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Cl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ol=null;function Rl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ol=new Map,t.forEach(bg,e),Ol=null,Cl.call(e))}function bg(e,t){if(!(t.state.loading&4)){var r=Ol.get(e);if(r)var o=r.get(null);else{r=new Map,Ol.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var b=d[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}d=t.instance,b=d.getAttribute("data-precedence"),h=r.get(b)||o,h===o&&r.set(null,d),r.set(b,d),this.count++,o=Cl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var ai={$$typeof:A,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function gg(e,t,r,o,d,h,b,w,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lo(0),this.hiddenUpdates=lo(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Zm(e,t,r,o,d,h,b,w,C,H,Z,te){return e=new gg(e,t,r,b,C,H,Z,te,w),t=1,h===!0&&(t|=24),h=Gt(3,null,null,t),e.current=h,h.stateNode=e,t=Ko(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:o,isDehydrated:r,cache:t},Qo(h),e}function Wm(e){return e?(e=Tr,e):Tr}function ep(e,t,r,o,d,h){d=Wm(d),o.context===null?o.context=d:o.pendingContext=d,o=ms(t),o.payload={element:r},h=h===void 0?null:h,h!==null&&(o.callback=h),r=ps(e,o,t),r!==null&&(Pt(r,e,t),Mn(r,e,t))}function tp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function mu(e,t){tp(e,t),(e=e.alternate)&&tp(e,t)}function ap(e){if(e.tag===13||e.tag===31){var t=Gs(e,67108864);t!==null&&Pt(t,e,67108864),mu(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=Jt();t=oo(t);var r=Gs(e,t);r!==null&&Pt(r,e,t),mu(e,t)}}var Dl=!0;function yg(e,t,r,o){var d=V.T;V.T=null;var h=se.p;try{se.p=2,pu(e,t,r,o)}finally{se.p=h,V.T=d}}function vg(e,t,r,o){var d=V.T;V.T=null;var h=se.p;try{se.p=8,pu(e,t,r,o)}finally{se.p=h,V.T=d}}function pu(e,t,r,o){if(Dl){var d=xu(o);if(d===null)tu(e,t,o,Ml,r),np(e,o);else if(jg(d,e,t,r,o))o.stopPropagation();else if(np(e,o),t&4&&-1<wg.indexOf(e)){for(;d!==null;){var h=br(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=Ta(h.pendingLanes);if(b!==0){var w=h;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var C=1<<31-xt(b);w.entanglements[1]|=C,b&=~C}Ra(h),(Le&6)===0&&(xl=jt()+500,Qn(0))}}break;case 31:case 13:w=Gs(h,2),w!==null&&Pt(w,h,2),gl(),mu(h,2)}if(h=xu(o),h===null&&tu(e,t,o,Ml,r),h===d)break;d=h}d!==null&&o.stopPropagation()}else tu(e,t,o,null,r)}}function xu(e){return e=go(e),bu(e)}var Ml=null;function bu(e){if(Ml=null,e=xr(e),e!==null){var t=u(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=f(t),e!==null)return e;e=null}else if(r===31){if(e=m(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ml=e,null}function rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ee()){case Re:return 2;case Qe:return 8;case mt:case fa:return 32;case yt:return 268435456;default:return 32}default:return 32}}var gu=!1,ks=null,Es=null,Ts=null,si=new Map,ri=new Map,As=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function np(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":si.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ri.delete(t.pointerId)}}function ni(e,t,r,o,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},t!==null&&(t=br(t),t!==null&&ap(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function jg(e,t,r,o,d){switch(t){case"focusin":return ks=ni(ks,e,t,r,o,d),!0;case"dragenter":return Es=ni(Es,e,t,r,o,d),!0;case"mouseover":return Ts=ni(Ts,e,t,r,o,d),!0;case"pointerover":var h=d.pointerId;return si.set(h,ni(si.get(h)||null,e,t,r,o,d)),!0;case"gotpointercapture":return h=d.pointerId,ri.set(h,ni(ri.get(h)||null,e,t,r,o,d)),!0}return!1}function ip(e){var t=xr(e.target);if(t!==null){var r=u(t);if(r!==null){if(t=r.tag,t===13){if(t=f(r),t!==null){e.blockedOn=t,yd(e.priority,function(){sp(r)});return}}else if(t===31){if(t=m(r),t!==null){e.blockedOn=t,yd(e.priority,function(){sp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ll(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xu(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);bo=o,r.target.dispatchEvent(o),bo=null}else return t=br(r),t!==null&&ap(t),e.blockedOn=r,!1;t.shift()}return!0}function lp(e,t,r){Ll(e)&&r.delete(t)}function _g(){gu=!1,ks!==null&&Ll(ks)&&(ks=null),Es!==null&&Ll(Es)&&(Es=null),Ts!==null&&Ll(Ts)&&(Ts=null),si.forEach(lp),ri.forEach(lp)}function ql(e,t){e.blockedOn===t&&(e.blockedOn=null,gu||(gu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_g)))}var zl=null;function op(e){zl!==e&&(zl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zl===e&&(zl=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],d=e[t+2];if(typeof o!="function"){if(bu(o||r)===null)continue;break}var h=br(r);h!==null&&(e.splice(t,3),t-=3,xc(h,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function Zr(e){function t(C){return ql(C,e)}ks!==null&&ql(ks,e),Es!==null&&ql(Es,e),Ts!==null&&ql(Ts,e),si.forEach(t),ri.forEach(t);for(var r=0;r<As.length;r++){var o=As[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<As.length&&(r=As[0],r.blockedOn===null);)ip(r),r.blockedOn===null&&As.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],h=r[o+1],b=d[Lt]||null;if(typeof h=="function")b||op(r);else if(b){var w=null;if(h&&h.hasAttribute("formAction")){if(d=h,b=h[Lt]||null)w=b.formAction;else if(bu(d)!==null)continue}else w=b.action;typeof w=="function"?r[o+1]=w:(r.splice(o,3),o-=3),op(r)}}}function cp(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function yu(e){this._internalRoot=e}Ul.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var r=t.current,o=Jt();ep(r,o,e,t,null,null)},Ul.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ep(e.current,2,null,e,null,null),gl(),t[pr]=null}};function Ul(e){this._internalRoot=e}Ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=gd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<As.length&&t!==0&&t<As[r].priority;r++);As.splice(r,0,e),r===0&&ip(e)}};var up=a.version;if(up!=="19.2.3")throw Error(l(527,up,"19.2.3"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=x(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Ng={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{ma=Bl.inject(Ng),pt=Bl}catch{}}return li.createRoot=function(e,t){if(!c(e))throw Error(l(299));var r=!1,o="",d=bf,h=gf,b=yf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=Zm(e,1,!1,null,null,r,o,null,d,h,b,cp),e[pr]=t.current,eu(e),new yu(t)},li.hydrateRoot=function(e,t,r){if(!c(e))throw Error(l(299));var o=!1,d="",h=bf,b=gf,w=yf,C=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),t=Zm(e,1,!0,t,r??null,o,d,C,h,b,w,cp),t.context=Wm(null),r=t.current,o=Jt(),o=oo(o),d=ms(o),d.callback=null,ps(r,d,o),r=o,t.current.lanes=r,xn(t,r),Ra(t),e[pr]=t.current,eu(e),new Ul(t)},li.version="19.2.3",li}var vp;function Lg(){if(vp)return ju.exports;vp=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),ju.exports=Mg(),ju.exports}var qg=Lg();const zg=d0(qg);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wp="popstate";function Ug(s={}){function a(c,u){let{pathname:f="/",search:m="",hash:p=""}=hr(c.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Bu("",{pathname:f,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(c,u){let f=c.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let p=c.location.href,x=p.indexOf("#");m=x===-1?p:p.slice(0,x)}return m+"#"+(typeof u=="string"?u:mi(u))}function l(c,u){ua(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return $g(a,n,l,s)}function Ze(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function ua(s,a){if(!s){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Bg(){return Math.random().toString(36).substring(2,10)}function jp(s,a){return{usr:s.state,key:s.key,idx:a}}function Bu(s,a,n=null,l){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof a=="string"?hr(a):a,state:n,key:a&&a.key||l||Bg()}}function mi({pathname:s="/",search:a="",hash:n=""}){return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function hr(s){let a={};if(s){let n=s.indexOf("#");n>=0&&(a.hash=s.substring(n),s=s.substring(0,n));let l=s.indexOf("?");l>=0&&(a.search=s.substring(l),s=s.substring(0,l)),s&&(a.pathname=s)}return a}function $g(s,a,n,l={}){let{window:c=document.defaultView,v5Compat:u=!1}=l,f=c.history,m="POP",p=null,x=g();x==null&&(x=0,f.replaceState({...f.state,idx:x},""));function g(){return(f.state||{idx:null}).idx}function y(){m="POP";let _=g(),S=_==null?null:_-x;x=_,p&&p({action:m,location:N.location,delta:S})}function j(_,S){m="PUSH";let T=Bu(N.location,_,S);n&&n(T,_),x=g()+1;let A=jp(T,x),M=N.createHref(T);try{f.pushState(A,"",M)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;c.location.assign(M)}u&&p&&p({action:m,location:N.location,delta:1})}function E(_,S){m="REPLACE";let T=Bu(N.location,_,S);n&&n(T,_),x=g();let A=jp(T,x),M=N.createHref(T);f.replaceState(A,"",M),u&&p&&p({action:m,location:N.location,delta:0})}function k(_){return Pg(_)}let N={get action(){return m},get location(){return s(c,f)},listen(_){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(wp,y),p=_,()=>{c.removeEventListener(wp,y),p=null}},createHref(_){return a(c,_)},createURL:k,encodeLocation(_){let S=k(_);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:j,replace:E,go(_){return f.go(_)}};return N}function Pg(s,a=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ze(n,"No window.location.(origin|href) available to create URL");let l=typeof s=="string"?s:mi(s);return l=l.replace(/ $/,"%20"),!a&&l.startsWith("//")&&(l=n+l),new URL(l,n)}function h0(s,a,n="/"){return Hg(s,a,n,!1)}function Hg(s,a,n,l){let c=typeof a=="string"?hr(a):a,u=rs(c.pathname||"/",n);if(u==null)return null;let f=f0(s);Gg(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let x=ey(u);m=Zg(f[p],x,l)}return m}function f0(s,a=[],n=[],l="",c=!1){let u=(f,m,p=c,x)=>{let g={relativePath:x===void 0?f.path||"":x,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(l)&&p)return;Ze(g.relativePath.startsWith(l),`Absolute route path "${g.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(l.length)}let y=ss([l,g.relativePath]),j=n.concat(g);f.children&&f.children.length>0&&(Ze(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),f0(f.children,a,j,y,p)),!(f.path==null&&!f.index)&&a.push({path:y,score:Qg(y,f.index),routesMeta:j})};return s.forEach((f,m)=>{var p;if(f.path===""||!((p=f.path)!=null&&p.includes("?")))u(f,m);else for(let x of m0(f.path))u(f,m,!0,x)}),a}function m0(s){let a=s.split("/");if(a.length===0)return[];let[n,...l]=a,c=n.endsWith("?"),u=n.replace(/\?$/,"");if(l.length===0)return c?[u,""]:[u];let f=m0(l.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),c&&m.push(...f),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function Gg(s){s.sort((a,n)=>a.score!==n.score?n.score-a.score:Xg(a.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var Ig=/^:[\w-]+$/,Vg=3,Kg=2,Yg=1,Jg=10,Fg=-2,_p=s=>s==="*";function Qg(s,a){let n=s.split("/"),l=n.length;return n.some(_p)&&(l+=Fg),a&&(l+=Kg),n.filter(c=>!_p(c)).reduce((c,u)=>c+(Ig.test(u)?Vg:u===""?Yg:Jg),l)}function Xg(s,a){return s.length===a.length&&s.slice(0,-1).every((l,c)=>l===a[c])?s[s.length-1]-a[a.length-1]:0}function Zg(s,a,n=!1){let{routesMeta:l}=s,c={},u="/",f=[];for(let m=0;m<l.length;++m){let p=l[m],x=m===l.length-1,g=u==="/"?a:a.slice(u.length)||"/",y=Jl({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},g),j=p.route;if(!y&&x&&n&&!l[l.length-1].route.index&&(y=Jl({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!y)return null;Object.assign(c,y.params),f.push({params:c,pathname:ss([u,y.pathname]),pathnameBase:ry(ss([u,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(u=ss([u,y.pathnameBase]))}return f}function Jl(s,a){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,l]=Wg(s.path,s.caseSensitive,s.end),c=a.match(n);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:l.reduce((x,{paramName:g,isOptional:y},j)=>{if(g==="*"){let k=m[j]||"";f=u.slice(0,u.length-k.length).replace(/(.)\/+$/,"$1")}const E=m[j];return y&&!E?x[g]=void 0:x[g]=(E||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:f,pattern:s}}function Wg(s,a=!1,n=!0){ua(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let l=[],c="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(l.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(l.push({paramName:"*"}),c+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":s!==""&&s!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),l]}function ey(s){try{return s.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return ua(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),s}}function rs(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let n=a.endsWith("/")?a.length-1:a.length,l=s.charAt(n);return l&&l!=="/"?null:s.slice(n)||"/"}var p0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ty=s=>p0.test(s);function ay(s,a="/"){let{pathname:n,search:l="",hash:c=""}=typeof s=="string"?hr(s):s,u;if(n)if(ty(n))u=n;else{if(n.includes("//")){let f=n;n=n.replace(/\/\/+/g,"/"),ua(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${n}`)}n.startsWith("/")?u=Np(n.substring(1),"/"):u=Np(n,a)}else u=a;return{pathname:u,search:ny(l),hash:iy(c)}}function Np(s,a){let n=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function ku(s,a,n,l){return`Cannot include a '${s}' character in a manually specified \`to.${a}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sy(s){return s.filter((a,n)=>n===0||a.route.path&&a.route.path.length>0)}function x0(s){let a=sy(s);return a.map((n,l)=>l===a.length-1?n.pathname:n.pathnameBase)}function b0(s,a,n,l=!1){let c;typeof s=="string"?c=hr(s):(c={...s},Ze(!c.pathname||!c.pathname.includes("?"),ku("?","pathname","search",c)),Ze(!c.pathname||!c.pathname.includes("#"),ku("#","pathname","hash",c)),Ze(!c.search||!c.search.includes("#"),ku("#","search","hash",c)));let u=s===""||c.pathname==="",f=u?"/":c.pathname,m;if(f==null)m=n;else{let y=a.length-1;if(!l&&f.startsWith("..")){let j=f.split("/");for(;j[0]==="..";)j.shift(),y-=1;c.pathname=j.join("/")}m=y>=0?a[y]:"/"}let p=ay(c,m),x=f&&f!=="/"&&f.endsWith("/"),g=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(x||g)&&(p.pathname+="/"),p}var ss=s=>s.join("/").replace(/\/\/+/g,"/"),ry=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),ny=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,iy=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,ly=class{constructor(s,a,n,l=!1){this.status=s,this.statusText=a||"",this.internal=l,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function oy(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function cy(s){return s.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var g0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function y0(s,a){let n=s;if(typeof n!="string"||!p0.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let l=n,c=!1;if(g0)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=rs(f.pathname,a);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:c=!0}catch{ua(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:l,isExternal:c,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var v0=["POST","PUT","PATCH","DELETE"];new Set(v0);var uy=["GET",...v0];new Set(uy);var mn=v.createContext(null);mn.displayName="DataRouter";var to=v.createContext(null);to.displayName="DataRouterState";var dy=v.createContext(!1),w0=v.createContext({isTransitioning:!1});w0.displayName="ViewTransition";var hy=v.createContext(new Map);hy.displayName="Fetchers";var fy=v.createContext(null);fy.displayName="Await";var da=v.createContext(null);da.displayName="Navigation";var ji=v.createContext(null);ji.displayName="Location";var Ma=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ma.displayName="Route";var sd=v.createContext(null);sd.displayName="RouteError";var j0="REACT_ROUTER_ERROR",my="REDIRECT",py="ROUTE_ERROR_RESPONSE";function xy(s){if(s.startsWith(`${j0}:${my}:{`))try{let a=JSON.parse(s.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function by(s){if(s.startsWith(`${j0}:${py}:{`))try{let a=JSON.parse(s.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new ly(a.status,a.statusText,a.data)}catch{}}function gy(s,{relative:a}={}){Ze(_i(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=v.useContext(da),{hash:c,pathname:u,search:f}=Ni(s,{relative:a}),m=u;return n!=="/"&&(m=u==="/"?n:ss([n,u])),l.createHref({pathname:m,search:f,hash:c})}function _i(){return v.useContext(ji)!=null}function La(){return Ze(_i(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(ji).location}var _0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N0(s){v.useContext(da).static||v.useLayoutEffect(s)}function rt(){let{isDataRoute:s}=v.useContext(Ma);return s?Oy():yy()}function yy(){Ze(_i(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(mn),{basename:a,navigator:n}=v.useContext(da),{matches:l}=v.useContext(Ma),{pathname:c}=La(),u=JSON.stringify(x0(l)),f=v.useRef(!1);return N0(()=>{f.current=!0}),v.useCallback((p,x={})=>{if(ua(f.current,_0),!f.current)return;if(typeof p=="number"){n.go(p);return}let g=b0(p,JSON.parse(u),c,x.relative==="path");s==null&&a!=="/"&&(g.pathname=g.pathname==="/"?a:ss([a,g.pathname])),(x.replace?n.replace:n.push)(g,x.state,x)},[a,n,u,c,s])}v.createContext(null);function fr(){let{matches:s}=v.useContext(Ma),a=s[s.length-1];return a?a.params:{}}function Ni(s,{relative:a}={}){let{matches:n}=v.useContext(Ma),{pathname:l}=La(),c=JSON.stringify(x0(n));return v.useMemo(()=>b0(s,JSON.parse(c),l,a==="path"),[s,c,l,a])}function vy(s,a){return S0(s,a)}function S0(s,a,n,l,c){var T;Ze(_i(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=v.useContext(da),{matches:f}=v.useContext(Ma),m=f[f.length-1],p=m?m.params:{},x=m?m.pathname:"/",g=m?m.pathnameBase:"/",y=m&&m.route;{let A=y&&y.path||"";E0(x,!y||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let j=La(),E;if(a){let A=typeof a=="string"?hr(a):a;Ze(g==="/"||((T=A.pathname)==null?void 0:T.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${A.pathname}" was given in the \`location\` prop.`),E=A}else E=j;let k=E.pathname||"/",N=k;if(g!=="/"){let A=g.replace(/^\//,"").split("/");N="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=h0(s,{pathname:N});ua(y||_!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),ua(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Sy(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},p,A.params),pathname:ss([g,u.encodeLocation?u.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:ss([g,u.encodeLocation?u.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),f,n,l,c);return a&&S?v.createElement(ji.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},S):S}function wy(){let s=Cy(),a=oy(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",s),f=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:u},"ErrorBoundary")," or"," ",v.createElement("code",{style:u},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},a),n?v.createElement("pre",{style:c},n):null,f)}var jy=v.createElement(wy,null),k0=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){this.props.onError?this.props.onError(s,a):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=by(s.digest);n&&(s=n)}let a=s!==void 0?v.createElement(Ma.Provider,{value:this.props.routeContext},v.createElement(sd.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?v.createElement(_y,{error:s},a):a}};k0.contextType=dy;var Eu=new WeakMap;function _y({children:s,error:a}){let{basename:n}=v.useContext(da);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let l=xy(a.digest);if(l){let c=Eu.get(a);if(c)throw c;let u=y0(l.location,n);if(g0&&!Eu.get(a))if(u.isExternal||l.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:l.replace}));throw Eu.set(a,f),f}return v.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Ny({routeContext:s,match:a,children:n}){let l=v.useContext(mn);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),v.createElement(Ma.Provider,{value:s},n)}function Sy(s,a=[],n=null,l=null,c=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(a.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,f=n==null?void 0:n.errors;if(f!=null){let g=u.findIndex(y=>y.route.id&&(f==null?void 0:f[y.route.id])!==void 0);Ze(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(n)for(let g=0;g<u.length;g++){let y=u[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:j,errors:E}=n,k=y.route.loader&&!j.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||k){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let x=n&&l?(g,y)=>{var j,E;l(g,{location:n.location,params:((E=(j=n.matches)==null?void 0:j[0])==null?void 0:E.params)??{},unstable_pattern:cy(n.matches),errorInfo:y})}:void 0;return u.reduceRight((g,y,j)=>{let E,k=!1,N=null,_=null;n&&(E=f&&y.route.id?f[y.route.id]:void 0,N=y.route.errorElement||jy,m&&(p<0&&j===0?(E0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,_=null):p===j&&(k=!0,_=y.route.hydrateFallbackElement||null)));let S=a.concat(u.slice(0,j+1)),T=()=>{let A;return E?A=N:k?A=_:y.route.Component?A=v.createElement(y.route.Component,null):y.route.element?A=y.route.element:A=g,v.createElement(Ny,{match:y,routeContext:{outlet:g,matches:S,isDataRoute:n!=null},children:A})};return n&&(y.route.ErrorBoundary||y.route.errorElement||j===0)?v.createElement(k0,{location:n.location,revalidation:n.revalidation,component:N,error:E,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:x}):T()},null)}function rd(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ky(s){let a=v.useContext(mn);return Ze(a,rd(s)),a}function Ey(s){let a=v.useContext(to);return Ze(a,rd(s)),a}function Ty(s){let a=v.useContext(Ma);return Ze(a,rd(s)),a}function nd(s){let a=Ty(s),n=a.matches[a.matches.length-1];return Ze(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Ay(){return nd("useRouteId")}function Cy(){var l;let s=v.useContext(sd),a=Ey("useRouteError"),n=nd("useRouteError");return s!==void 0?s:(l=a.errors)==null?void 0:l[n]}function Oy(){let{router:s}=ky("useNavigate"),a=nd("useNavigate"),n=v.useRef(!1);return N0(()=>{n.current=!0}),v.useCallback(async(c,u={})=>{ua(n.current,_0),n.current&&(typeof c=="number"?await s.navigate(c):await s.navigate(c,{fromRouteId:a,...u}))},[s,a])}var Sp={};function E0(s,a,n){!a&&!Sp[s]&&(Sp[s]=!0,ua(!1,n))}v.memo(Ry);function Ry({routes:s,future:a,state:n,onError:l}){return S0(s,void 0,n,l,a)}function Ve(s){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dy({basename:s="/",children:a=null,location:n,navigationType:l="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Ze(!_i(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),p=v.useMemo(()=>({basename:m,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[m,c,u,f]);typeof n=="string"&&(n=hr(n));let{pathname:x="/",search:g="",hash:y="",state:j=null,key:E="default"}=n,k=v.useMemo(()=>{let N=rs(x,m);return N==null?null:{location:{pathname:N,search:g,hash:y,state:j,key:E},navigationType:l}},[m,x,g,y,j,E,l]);return ua(k!=null,`<Router basename="${m}"> is not able to match the URL "${x}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:v.createElement(da.Provider,{value:p},v.createElement(ji.Provider,{children:a,value:k}))}function My({children:s,location:a}){return vy($u(s),a)}function $u(s,a=[]){let n=[];return v.Children.forEach(s,(l,c)=>{if(!v.isValidElement(l))return;let u=[...a,c];if(l.type===v.Fragment){n.push.apply(n,$u(l.props.children,u));return}Ze(l.type===Ve,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||u.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=$u(l.props.children,u)),n.push(f)}),n}var Vl="get",Kl="application/x-www-form-urlencoded";function ao(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function Ly(s){return ao(s)&&s.tagName.toLowerCase()==="button"}function qy(s){return ao(s)&&s.tagName.toLowerCase()==="form"}function zy(s){return ao(s)&&s.tagName.toLowerCase()==="input"}function Uy(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function By(s,a){return s.button===0&&(!a||a==="_self")&&!Uy(s)}var $l=null;function $y(){if($l===null)try{new FormData(document.createElement("form"),0),$l=!1}catch{$l=!0}return $l}var Py=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tu(s){return s!=null&&!Py.has(s)?(ua(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kl}"`),null):s}function Hy(s,a){let n,l,c,u,f;if(qy(s)){let m=s.getAttribute("action");l=m?rs(m,a):null,n=s.getAttribute("method")||Vl,c=Tu(s.getAttribute("enctype"))||Kl,u=new FormData(s)}else if(Ly(s)||zy(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||m.getAttribute("action");if(l=p?rs(p,a):null,n=s.getAttribute("formmethod")||m.getAttribute("method")||Vl,c=Tu(s.getAttribute("formenctype"))||Tu(m.getAttribute("enctype"))||Kl,u=new FormData(m,s),!$y()){let{name:x,type:g,value:y}=s;if(g==="image"){let j=x?`${x}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else x&&u.append(x,y)}}else{if(ao(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Vl,l=null,c=Kl,f=s}return u&&c==="text/plain"&&(f=u,u=void 0),{action:l,method:n.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function id(s,a){if(s===!1||s===null||typeof s>"u")throw new Error(a)}function Gy(s,a,n,l){let c=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${l}`:c.pathname=`${c.pathname}.${l}`:c.pathname==="/"?c.pathname=`_root.${l}`:a&&rs(c.pathname,a)==="/"?c.pathname=`${a.replace(/\/$/,"")}/_root.${l}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${l}`,c}async function Iy(s,a){if(s.id in a)return a[s.id];try{let n=await import(s.module);return a[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vy(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Ky(s,a,n){let l=await Promise.all(s.map(async c=>{let u=a.routes[c.route.id];if(u){let f=await Iy(u,n);return f.links?f.links():[]}return[]}));return Qy(l.flat(1).filter(Vy).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function kp(s,a,n,l,c,u){let f=(p,x)=>n[x]?p.route.id!==n[x].route.id:!0,m=(p,x)=>{var g;return n[x].pathname!==p.pathname||((g=n[x].route.path)==null?void 0:g.endsWith("*"))&&n[x].params["*"]!==p.params["*"]};return u==="assets"?a.filter((p,x)=>f(p,x)||m(p,x)):u==="data"?a.filter((p,x)=>{var y;let g=l.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(f(p,x)||m(p,x))return!0;if(p.route.shouldRevalidate){let j=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function Yy(s,a,{includeHydrateFallback:n}={}){return Jy(s.map(l=>{let c=a.routes[l.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),n&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function Jy(s){return[...new Set(s)]}function Fy(s){let a={},n=Object.keys(s).sort();for(let l of n)a[l]=s[l];return a}function Qy(s,a){let n=new Set;return new Set(a),s.reduce((l,c)=>{let u=JSON.stringify(Fy(c));return n.has(u)||(n.add(u),l.push({key:u,link:c})),l},[])}function T0(){let s=v.useContext(mn);return id(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Xy(){let s=v.useContext(to);return id(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ld=v.createContext(void 0);ld.displayName="FrameworkContext";function A0(){let s=v.useContext(ld);return id(s,"You must render this element inside a <HydratedRouter> element"),s}function Zy(s,a){let n=v.useContext(ld),[l,c]=v.useState(!1),[u,f]=v.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:x,onMouseLeave:g,onTouchStart:y}=a,j=v.useRef(null);v.useEffect(()=>{if(s==="render"&&f(!0),s==="viewport"){let N=S=>{S.forEach(T=>{f(T.isIntersecting)})},_=new IntersectionObserver(N,{threshold:.5});return j.current&&_.observe(j.current),()=>{_.disconnect()}}},[s]),v.useEffect(()=>{if(l){let N=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(N)}}},[l]);let E=()=>{c(!0)},k=()=>{c(!1),f(!1)};return n?s!=="intent"?[u,j,{}]:[u,j,{onFocus:oi(m,E),onBlur:oi(p,k),onMouseEnter:oi(x,E),onMouseLeave:oi(g,k),onTouchStart:oi(y,E)}]:[!1,j,{}]}function oi(s,a){return n=>{s&&s(n),n.defaultPrevented||a(n)}}function Wy({page:s,...a}){let{router:n}=T0(),l=v.useMemo(()=>h0(n.routes,s,n.basename),[n.routes,s,n.basename]);return l?v.createElement(tv,{page:s,matches:l,...a}):null}function ev(s){let{manifest:a,routeModules:n}=A0(),[l,c]=v.useState([]);return v.useEffect(()=>{let u=!1;return Ky(s,a,n).then(f=>{u||c(f)}),()=>{u=!0}},[s,a,n]),l}function tv({page:s,matches:a,...n}){let l=La(),{future:c,manifest:u,routeModules:f}=A0(),{basename:m}=T0(),{loaderData:p,matches:x}=Xy(),g=v.useMemo(()=>kp(s,a,x,u,l,"data"),[s,a,x,u,l]),y=v.useMemo(()=>kp(s,a,x,u,l,"assets"),[s,a,x,u,l]),j=v.useMemo(()=>{if(s===l.pathname+l.search+l.hash)return[];let N=new Set,_=!1;if(a.forEach(T=>{var M;let A=u.routes[T.route.id];!A||!A.hasLoader||(!g.some(K=>K.route.id===T.route.id)&&T.route.id in p&&((M=f[T.route.id])!=null&&M.shouldRevalidate)||A.hasClientLoader?_=!0:N.add(T.route.id))}),N.size===0)return[];let S=Gy(s,m,c.unstable_trailingSlashAwareDataRequests,"data");return _&&N.size>0&&S.searchParams.set("_routes",a.filter(T=>N.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[m,c.unstable_trailingSlashAwareDataRequests,p,l,u,g,a,s,f]),E=v.useMemo(()=>Yy(y,u),[y,u]),k=ev(y);return v.createElement(v.Fragment,null,j.map(N=>v.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),E.map(N=>v.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),k.map(({key:N,link:_})=>v.createElement("link",{key:N,nonce:n.nonce,..._})))}function av(...s){return a=>{s.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}var sv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sv&&(window.__reactRouterVersion="7.12.0")}catch{}function rv({basename:s,children:a,unstable_useTransitions:n,window:l}){let c=v.useRef();c.current==null&&(c.current=Ug({window:l,v5Compat:!0}));let u=c.current,[f,m]=v.useState({action:u.action,location:u.location}),p=v.useCallback(x=>{n===!1?m(x):v.startTransition(()=>m(x))},[n]);return v.useLayoutEffect(()=>u.listen(p),[u,p]),v.createElement(Dy,{basename:s,children:a,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var C0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rs=v.forwardRef(function({onClick:a,discover:n="render",prefetch:l="none",relative:c,reloadDocument:u,replace:f,state:m,target:p,to:x,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:j,...E},k){let{basename:N,unstable_useTransitions:_}=v.useContext(da),S=typeof x=="string"&&C0.test(x),T=y0(x,N);x=T.to;let A=gy(x,{relative:c}),[M,K,z]=Zy(l,E),O=ov(x,{replace:f,state:m,target:p,preventScrollReset:g,relative:c,viewTransition:y,unstable_defaultShouldRevalidate:j,unstable_useTransitions:_});function L(re){a&&a(re),re.defaultPrevented||O(re)}let q=v.createElement("a",{...E,...z,href:T.absoluteURL||A,onClick:T.isExternal||u?a:L,ref:av(k,K),target:p,"data-discover":!S&&n==="render"?"true":void 0});return M&&!S?v.createElement(v.Fragment,null,q,v.createElement(Wy,{page:A})):q});Rs.displayName="Link";var nv=v.forwardRef(function({"aria-current":a="page",caseSensitive:n=!1,className:l="",end:c=!1,style:u,to:f,viewTransition:m,children:p,...x},g){let y=Ni(f,{relative:x.relative}),j=La(),E=v.useContext(to),{navigator:k,basename:N}=v.useContext(da),_=E!=null&&fv(y)&&m===!0,S=k.encodeLocation?k.encodeLocation(y).pathname:y.pathname,T=j.pathname,A=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(T=T.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&N&&(A=rs(A,N)||A);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let K=T===S||!c&&T.startsWith(S)&&T.charAt(M)==="/",z=A!=null&&(A===S||!c&&A.startsWith(S)&&A.charAt(S.length)==="/"),O={isActive:K,isPending:z,isTransitioning:_},L=K?a:void 0,q;typeof l=="function"?q=l(O):q=[l,K?"active":null,z?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let re=typeof u=="function"?u(O):u;return v.createElement(Rs,{...x,"aria-current":L,className:q,ref:g,style:re,to:f,viewTransition:m},typeof p=="function"?p(O):p)});nv.displayName="NavLink";var iv=v.forwardRef(({discover:s="render",fetcherKey:a,navigate:n,reloadDocument:l,replace:c,state:u,method:f=Vl,action:m,onSubmit:p,relative:x,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:j,...E},k)=>{let{unstable_useTransitions:N}=v.useContext(da),_=dv(),S=hv(m,{relative:x}),T=f.toLowerCase()==="get"?"get":"post",A=typeof m=="string"&&C0.test(m),M=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let z=K.nativeEvent.submitter,O=(z==null?void 0:z.getAttribute("formmethod"))||f,L=()=>_(z||K.currentTarget,{fetcherKey:a,method:O,navigate:n,replace:c,state:u,relative:x,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:j});N&&n!==!1?v.startTransition(()=>L()):L()};return v.createElement("form",{ref:k,method:T,action:S,onSubmit:l?p:M,...E,"data-discover":!A&&s==="render"?"true":void 0})});iv.displayName="Form";function lv(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O0(s){let a=v.useContext(mn);return Ze(a,lv(s)),a}function ov(s,{target:a,replace:n,state:l,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let x=rt(),g=La(),y=Ni(s,{relative:u});return v.useCallback(j=>{if(By(j,a)){j.preventDefault();let E=n!==void 0?n:mi(g)===mi(y),k=()=>x(s,{replace:E,state:l,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});p?v.startTransition(()=>k()):k()}},[g,x,y,n,l,a,s,c,u,f,m,p])}var cv=0,uv=()=>`__${String(++cv)}__`;function dv(){let{router:s}=O0("useSubmit"),{basename:a}=v.useContext(da),n=Ay(),l=s.fetch,c=s.navigate;return v.useCallback(async(u,f={})=>{let{action:m,method:p,encType:x,formData:g,body:y}=Hy(u,a);if(f.navigate===!1){let j=f.fetcherKey||uv();await l(j,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:g,body:y,formMethod:f.method||p,formEncType:f.encType||x,flushSync:f.flushSync})}else await c(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:g,body:y,formMethod:f.method||p,formEncType:f.encType||x,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[l,c,a,n])}function hv(s,{relative:a}={}){let{basename:n}=v.useContext(da),l=v.useContext(Ma);Ze(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),u={...Ni(s||".",{relative:a})},f=La();if(s==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(g=>g==="")){m.delete("index"),p.filter(y=>y).forEach(y=>m.append("index",y));let g=m.toString();u.search=g?`?${g}`:""}}return(!s||s===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ss([n,u.pathname])),mi(u)}function fv(s,{relative:a}={}){let n=v.useContext(w0);Ze(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=O0("useViewTransitionState"),c=Ni(s,{relative:a});if(!n.isTransitioning)return!1;let u=rs(n.currentLocation.pathname,l)||n.currentLocation.pathname,f=rs(n.nextLocation.pathname,l)||n.nextLocation.pathname;return Jl(c.pathname,f)!=null||Jl(c.pathname,u)!=null}const mv="modulepreload",pv=function(s){return"/"+s},Ep={},R0=function(a,n,l){let c=Promise.resolve();if(n&&n.length>0){let f=function(x){return Promise.all(x.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=f(n.map(x=>{if(x=pv(x),x in Ep)return;Ep[x]=!0;const g=x.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${y}`))return;const j=document.createElement("link");if(j.rel=g?"stylesheet":mv,g||(j.as="script"),j.crossOrigin="",j.href=x,p&&j.setAttribute("nonce",p),document.head.appendChild(j),g)return new Promise((E,k)=>{j.addEventListener("load",E),j.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return c.then(f=>{for(const m of f||[])m.status==="rejected"&&u(m.reason);return a().catch(u)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var fn;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(fn||(fn={}));class dn extends Error{constructor(a,n,l){super(a),this.message=a,this.code=n,this.data=l}}const xv=s=>{var a,n;return s!=null&&s.androidBridge?"android":!((n=(a=s==null?void 0:s.webkit)===null||a===void 0?void 0:a.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},bv=s=>{const a=s.CapacitorCustomPlatform||null,n=s.Capacitor||{},l=n.Plugins=n.Plugins||{},c=()=>a!==null?a.name:xv(s),u=()=>c()!=="web",f=y=>{const j=x.get(y);return!!(j!=null&&j.platforms.has(c())||m(y))},m=y=>{var j;return(j=n.PluginHeaders)===null||j===void 0?void 0:j.find(E=>E.name===y)},p=y=>s.console.error(y),x=new Map,g=(y,j={})=>{const E=x.get(y);if(E)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),E.proxy;const k=c(),N=m(y);let _;const S=async()=>(!_&&k in j?_=typeof j[k]=="function"?_=await j[k]():_=j[k]:a!==null&&!_&&"web"in j&&(_=typeof j.web=="function"?_=await j.web():_=j.web),_),T=(L,q)=>{var re,P;if(N){const Q=N==null?void 0:N.methods.find(oe=>q===oe.name);if(Q)return Q.rtype==="promise"?oe=>n.nativePromise(y,q.toString(),oe):(oe,ge)=>n.nativeCallback(y,q.toString(),oe,ge);if(L)return(re=L[q])===null||re===void 0?void 0:re.bind(L)}else{if(L)return(P=L[q])===null||P===void 0?void 0:P.bind(L);throw new dn(`"${y}" plugin is not implemented on ${k}`,fn.Unimplemented)}},A=L=>{let q;const re=(...P)=>{const Q=S().then(oe=>{const ge=T(oe,L);if(ge){const Ae=ge(...P);return q=Ae==null?void 0:Ae.remove,Ae}else throw new dn(`"${y}.${L}()" is not implemented on ${k}`,fn.Unimplemented)});return L==="addListener"&&(Q.remove=async()=>q()),Q};return re.toString=()=>`${L.toString()}() { [capacitor code] }`,Object.defineProperty(re,"name",{value:L,writable:!1,configurable:!1}),re},M=A("addListener"),K=A("removeListener"),z=(L,q)=>{const re=M({eventName:L},q),P=async()=>{const oe=await re;K({eventName:L,callbackId:oe},q)},Q=new Promise(oe=>re.then(()=>oe({remove:P})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},Q},O=new Proxy({},{get(L,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?z:M;case"removeListener":return K;default:return A(q)}}});return l[y]=O,x.set(y,{name:y,proxy:O,platforms:new Set([...Object.keys(j),...N?[k]:[]])}),O};return n.convertFileSrc||(n.convertFileSrc=y=>y),n.getPlatform=c,n.handleError=p,n.isNativePlatform=u,n.isPluginAvailable=f,n.registerPlugin=g,n.Exception=dn,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},gv=s=>s.Capacitor=bv(s),Da=gv(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),mr=Da.registerPlugin;class so{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(a,n){let l=!1;this.listeners[a]||(this.listeners[a]=[],l=!0),this.listeners[a].push(n);const u=this.windowListeners[a];u&&!u.registered&&this.addWindowListener(u),l&&this.sendRetainedArgumentsForEvent(a);const f=async()=>this.removeListener(a,n);return Promise.resolve({remove:f})}async removeAllListeners(){this.listeners={};for(const a in this.windowListeners)this.removeWindowListener(this.windowListeners[a]);this.windowListeners={}}notifyListeners(a,n,l){const c=this.listeners[a];if(!c){if(l){let u=this.retainedEventArguments[a];u||(u=[]),u.push(n),this.retainedEventArguments[a]=u}return}c.forEach(u=>u(n))}hasListeners(a){var n;return!!(!((n=this.listeners[a])===null||n===void 0)&&n.length)}registerWindowListener(a,n){this.windowListeners[n]={registered:!1,windowEventName:a,pluginEventName:n,handler:l=>{this.notifyListeners(n,l)}}}unimplemented(a="not implemented"){return new Da.Exception(a,fn.Unimplemented)}unavailable(a="not available"){return new Da.Exception(a,fn.Unavailable)}async removeListener(a,n){const l=this.listeners[a];if(!l)return;const c=l.indexOf(n);this.listeners[a].splice(c,1),this.listeners[a].length||this.removeWindowListener(this.windowListeners[a])}addWindowListener(a){window.addEventListener(a.windowEventName,a.handler),a.registered=!0}removeWindowListener(a){a&&(window.removeEventListener(a.windowEventName,a.handler),a.registered=!1)}sendRetainedArgumentsForEvent(a){const n=this.retainedEventArguments[a];n&&(delete this.retainedEventArguments[a],n.forEach(l=>{this.notifyListeners(a,l)}))}}const Tp=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ap=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class yv extends so{async getCookies(){const a=document.cookie,n={};return a.split(";").forEach(l=>{if(l.length<=0)return;let[c,u]=l.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=Ap(c).trim(),u=Ap(u).trim(),n[c]=u}),n}async setCookie(a){try{const n=Tp(a.key),l=Tp(a.value),c=`; expires=${(a.expires||"").replace("expires=","")}`,u=(a.path||"/").replace("path=",""),f=a.url!=null&&a.url.length>0?`domain=${a.url}`:"";document.cookie=`${n}=${l||""}${c}; path=${u}; ${f};`}catch(n){return Promise.reject(n)}}async deleteCookie(a){try{document.cookie=`${a.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const a=document.cookie.split(";")||[];for(const n of a)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(a){return Promise.reject(a)}}async clearAllCookies(){try{await this.clearCookies()}catch(a){return Promise.reject(a)}}}mr("CapacitorCookies",{web:()=>new yv});const vv=async s=>new Promise((a,n)=>{const l=new FileReader;l.onload=()=>{const c=l.result;a(c.indexOf(",")>=0?c.split(",")[1]:c)},l.onerror=c=>n(c),l.readAsDataURL(s)}),wv=(s={})=>{const a=Object.keys(s);return Object.keys(s).map(c=>c.toLocaleLowerCase()).reduce((c,u,f)=>(c[u]=s[a[f]],c),{})},jv=(s,a=!0)=>s?Object.entries(s).reduce((l,c)=>{const[u,f]=c;let m,p;return Array.isArray(f)?(p="",f.forEach(x=>{m=a?encodeURIComponent(x):x,p+=`${u}=${m}&`}),p.slice(0,-1)):(m=a?encodeURIComponent(f):f,p=`${u}=${m}`),`${l}&${p}`},"").substr(1):null,_v=(s,a={})=>{const n=Object.assign({method:s.method||"GET",headers:s.headers},a),c=wv(s.headers)["content-type"]||"";if(typeof s.data=="string")n.body=s.data;else if(c.includes("application/x-www-form-urlencoded")){const u=new URLSearchParams;for(const[f,m]of Object.entries(s.data||{}))u.set(f,m);n.body=u.toString()}else if(c.includes("multipart/form-data")||s.data instanceof FormData){const u=new FormData;if(s.data instanceof FormData)s.data.forEach((m,p)=>{u.append(p,m)});else for(const m of Object.keys(s.data))u.append(m,s.data[m]);n.body=u;const f=new Headers(n.headers);f.delete("content-type"),n.headers=f}else(c.includes("application/json")||typeof s.data=="object")&&(n.body=JSON.stringify(s.data));return n};class Nv extends so{async request(a){const n=_v(a,a.webFetchExtra),l=jv(a.params,a.shouldEncodeUrlParams),c=l?`${a.url}?${l}`:a.url,u=await fetch(c,n),f=u.headers.get("content-type")||"";let{responseType:m="text"}=u.ok?a:{};f.includes("application/json")&&(m="json");let p,x;switch(m){case"arraybuffer":case"blob":x=await u.blob(),p=await vv(x);break;case"json":p=await u.json();break;case"document":case"text":default:p=await u.text()}const g={};return u.headers.forEach((y,j)=>{g[j]=y}),{data:p,headers:g,status:u.status,url:u.url}}async get(a){return this.request(Object.assign(Object.assign({},a),{method:"GET"}))}async post(a){return this.request(Object.assign(Object.assign({},a),{method:"POST"}))}async put(a){return this.request(Object.assign(Object.assign({},a),{method:"PUT"}))}async patch(a){return this.request(Object.assign(Object.assign({},a),{method:"PATCH"}))}async delete(a){return this.request(Object.assign(Object.assign({},a),{method:"DELETE"}))}}mr("CapacitorHttp",{web:()=>new Nv});var Cp;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Cp||(Cp={}));var Op;(function(s){s.StatusBar="StatusBar",s.NavigationBar="NavigationBar"})(Op||(Op={}));class Sv extends so{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}mr("SystemBars",{web:()=>new Sv});const D0=mr("App",{web:()=>R0(()=>import("./web-C5o_f0Pz.js"),[]).then(s=>new s.AppWeb)}),Yl=mr("Browser",{web:()=>R0(()=>import("./web-BbJZTq5P.js"),[]).then(s=>new s.BrowserWeb)});function ro(s,a){var n={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.indexOf(l)<0&&(n[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)a.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(n[l[c]]=s[l[c]]);return n}function kv(s,a,n,l){function c(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function m(g){try{x(l.next(g))}catch(y){f(y)}}function p(g){try{x(l.throw(g))}catch(y){f(y)}}function x(g){g.done?u(g.value):c(g.value).then(m,p)}x((l=l.apply(s,a||[])).next())})}const Ev=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class od extends Error{constructor(a,n="FunctionsError",l){super(a),this.name=n,this.context=l}}class Tv extends od{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Rp extends od{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Dp extends od{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Pu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Pu||(Pu={}));class Av{constructor(a,{headers:n={},customFetch:l,region:c=Pu.Any}={}){this.url=a,this.headers=n,this.region=c,this.fetch=Ev(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return kv(this,arguments,void 0,function*(n,l={}){var c;let u,f;try{const{headers:m,method:p,body:x,signal:g,timeout:y}=l;let j={},{region:E}=l;E||(E=this.region);const k=new URL(`${this.url}/${n}`);E&&E!=="any"&&(j["x-region"]=E,k.searchParams.set("forceFunctionRegion",E));let N;x&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",N=x):typeof x=="string"?(j["Content-Type"]="text/plain",N=x):typeof FormData<"u"&&x instanceof FormData?N=x:(j["Content-Type"]="application/json",N=JSON.stringify(x)):x&&typeof x!="string"&&!(typeof Blob<"u"&&x instanceof Blob)&&!(x instanceof ArrayBuffer)&&!(typeof FormData<"u"&&x instanceof FormData)?N=JSON.stringify(x):N=x;let _=g;y&&(f=new AbortController,u=setTimeout(()=>f.abort(),y),g?(_=f.signal,g.addEventListener("abort",()=>f.abort())):_=f.signal);const S=yield this.fetch(k.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),m),body:N,signal:_}).catch(K=>{throw new Tv(K)}),T=S.headers.get("x-relay-error");if(T&&T==="true")throw new Rp(S);if(!S.ok)throw new Dp(S);let A=((c=S.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),M;return A==="application/json"?M=yield S.json():A==="application/octet-stream"||A==="application/pdf"?M=yield S.blob():A==="text/event-stream"?M=S:A==="multipart/form-data"?M=yield S.formData():M=yield S.text(),{data:M,error:null,response:S}}catch(m){return{data:null,error:m,response:m instanceof Dp||m instanceof Rp?m.context:void 0}}finally{u&&clearTimeout(u)}})}}var Cv=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Ov=class{constructor(s){var a,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(n=s.isMaybeSingle)!==null&&n!==void 0?n:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let f=null,m=null,p=null,x=u.status,g=u.statusText;if(u.ok){var y,j;if(n.method!=="HEAD"){var E;const S=await u.text();S===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((E=n.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?m=S:m=JSON.parse(S))}const N=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),_=(j=u.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");N&&_&&_.length>1&&(p=parseInt(_[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,x=406,g="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var k;const N=await u.text();try{f=JSON.parse(N),Array.isArray(f)&&u.status===404&&(m=[],f=null,x=200,g="OK")}catch{u.status===404&&N===""?(x=204,g="No Content"):f={message:N}}if(f&&n.isMaybeSingle&&(!(f==null||(k=f.details)===null||k===void 0)&&k.includes("0 rows"))&&(f=null,x=200,g="OK"),f&&n.shouldThrowOnError)throw new Cv(f)}return{error:f,data:m,count:p,status:x,statusText:g}});return this.shouldThrowOnError||(c=c.catch(u=>{var f;let m="";const p=u==null?void 0:u.cause;if(p){var x,g,y,j;const k=(x=p==null?void 0:p.message)!==null&&x!==void 0?x:"",N=(g=p==null?void 0:p.code)!==null&&g!==void 0?g:"";m=`${(y=u==null?void 0:u.name)!==null&&y!==void 0?y:"FetchError"}: ${u==null?void 0:u.message}`,m+=`

Caused by: ${(j=p==null?void 0:p.name)!==null&&j!==void 0?j:"Error"}: ${k}`,N&&(m+=` (${N})`),p!=null&&p.stack&&(m+=`
${p.stack}`)}else{var E;m=(E=u==null?void 0:u.stack)!==null&&E!==void 0?E:""}return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,a)}returns(){return this}overrideTypes(){return this}},Rv=class extends Ov{select(s){let a=!1;const n=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:n,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:n=a}={}){const l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:n,referencedTable:l=n}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:n=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const m=[s?"analyze":null,a?"verbose":null,n?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Mp=new RegExp("[,()]");var nn=class extends Rv{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const n=Array.from(new Set(a)).map(l=>typeof l=="string"&&Mp.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${n})`),this}notIn(s,a){const n=Array.from(new Set(a)).map(l=>typeof l=="string"&&Mp.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${n})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:n,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=n===void 0?"":`(${n})`;return this.url.searchParams.append(s,`${c}fts${u}.${a}`),this}match(s){return Object.entries(s).forEach(([a,n])=>{this.url.searchParams.append(a,`eq.${n}`)}),this}not(s,a,n){return this.url.searchParams.append(s,`not.${a}.${n}`),this}or(s,{foreignTable:a,referencedTable:n=a}={}){const l=n?`${n}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,n){return this.url.searchParams.append(s,`${a}.${n}`),this}},Dv=class{constructor(s,{headers:a={},schema:n,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=n,this.fetch=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,a){const{head:n=!1,count:l}=a??{},c=n?"HEAD":"GET";let u=!1;const f=(s??"*").split("").map(x=>/\s/.test(x)&&!u?"":(x==='"'&&(u=!u),x)).join(""),{url:m,headers:p}=this.cloneRequestState();return m.searchParams.set("select",f),l&&p.append("Prefer",`count=${l}`),new nn({method:c,url:m,headers:p,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:n=!0}={}){var l;const c="POST",{url:u,headers:f}=this.cloneRequestState();if(a&&f.append("Prefer",`count=${a}`),n||f.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(m.length>0){const p=[...new Set(m)].map(x=>`"${x}"`);u.searchParams.set("columns",p.join(","))}}return new nn({method:c,url:u,headers:f,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:n=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST",{url:m,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),a!==void 0&&m.searchParams.set("on_conflict",a),l&&p.append("Prefer",`count=${l}`),c||p.append("Prefer","missing=default"),Array.isArray(s)){const x=s.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(x.length>0){const g=[...new Set(x)].map(y=>`"${y}"`);m.searchParams.set("columns",g.join(","))}}return new nn({method:f,url:m,headers:p,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var n;const l="PATCH",{url:c,headers:u}=this.cloneRequestState();return a&&u.append("Prefer",`count=${a}`),new nn({method:l,url:c,headers:u,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:s}={}){var a;const n="DELETE",{url:l,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new nn({method:n,url:l,headers:c,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},Mv=class M0{constructor(a,{headers:n={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(n),this.schemaName=l,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Dv(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new M0(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,n={},{head:l=!1,get:c=!1,count:u}={}){var f;let m;const p=new URL(`${this.url}/rpc/${a}`);let x;const g=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(g)),y=l&&Object.values(n).some(g);y?(m="POST",x=n):l||c?(m=l?"HEAD":"GET",Object.entries(n).filter(([E,k])=>k!==void 0).map(([E,k])=>[E,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([E,k])=>{p.searchParams.append(E,k)})):(m="POST",x=n);const j=new Headers(this.headers);return y?j.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&j.set("Prefer",`count=${u}`),new nn({method:m,url:p,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Lv{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const l=n.versions;if(l&&l.node){const c=l.node,u=parseInt(c.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let n=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(n+=`

Suggested solution: ${a.workaround}`),new Error(n)}static createWebSocket(a,n){const l=this.getWebSocketConstructor();return new l(a,n)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const qv="2.90.1",zv=`realtime-js/${qv}`,L0="1.0.0",Uv="2.0.0",Lp=L0,Hu=1e4,Bv=1e3,$v=100;var Os;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Os||(Os={}));var gt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(gt||(gt={}));var wa;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(wa||(wa={}));var Gu;(function(s){s.websocket="websocket"})(Gu||(Gu={}));var ir;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ir||(ir={}));class Pv{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,n){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(a));let l=[a.join_ref,a.ref,a.topic,a.event,a.payload];return n(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(a){var n;return this._isArrayBuffer((n=a.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var n,l;const c=(l=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(a){var n,l;const c=(l=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,n,l){var c,u;const f=a.topic,m=(c=a.ref)!==null&&c!==void 0?c:"",p=(u=a.join_ref)!==null&&u!==void 0?u:"",x=a.payload.event,g=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`userEvent length ${x.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+f.length+x.length+y.length,E=new ArrayBuffer(this.HEADER_LENGTH+j);let k=new DataView(E),N=0;k.setUint8(N++,this.KINDS.userBroadcastPush),k.setUint8(N++,p.length),k.setUint8(N++,m.length),k.setUint8(N++,f.length),k.setUint8(N++,x.length),k.setUint8(N++,y.length),k.setUint8(N++,n),Array.from(p,S=>k.setUint8(N++,S.charCodeAt(0))),Array.from(m,S=>k.setUint8(N++,S.charCodeAt(0))),Array.from(f,S=>k.setUint8(N++,S.charCodeAt(0))),Array.from(x,S=>k.setUint8(N++,S.charCodeAt(0))),Array.from(y,S=>k.setUint8(N++,S.charCodeAt(0)));var _=new Uint8Array(E.byteLength+l.byteLength);return _.set(new Uint8Array(E),0),_.set(new Uint8Array(l),E.byteLength),_.buffer}decode(a,n){if(this._isArrayBuffer(a)){let l=this._binaryDecode(a);return n(l)}if(typeof a=="string"){const l=JSON.parse(a),[c,u,f,m,p]=l;return n({join_ref:c,ref:u,topic:f,event:m,payload:p})}return n({})}_binaryDecode(a){const n=new DataView(a),l=n.getUint8(0),c=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,n,c)}}_decodeUserBroadcast(a,n,l){const c=n.getUint8(1),u=n.getUint8(2),f=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const x=l.decode(a.slice(p,p+c));p=p+c;const g=l.decode(a.slice(p,p+u));p=p+u;const y=l.decode(a.slice(p,p+f));p=p+f;const j=a.slice(p,a.byteLength),E=m===this.JSON_ENCODING?JSON.parse(l.decode(j)):j,k={type:this.BROADCAST_EVENT,event:g,payload:E};return f>0&&(k.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:x,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(a){var n;return a instanceof ArrayBuffer||((n=a==null?void 0:a.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(a,n){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([l])=>n.includes(l)))}}class q0{constructor(a,n){this.callback=a,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ke||(Ke={}));const qp=(s,a,n={})=>{var l;const c=(l=n.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((u,f)=>(u[f]=Hv(f,s,a,c),u),{}):{}},Hv=(s,a,n,l)=>{const c=a.find(m=>m.name===s),u=c==null?void 0:c.type,f=n[s];return u&&!l.includes(u)?z0(u,f):Iu(f)},z0=(s,a)=>{if(s.charAt(0)==="_"){const n=s.slice(1,s.length);return Kv(a,n)}switch(s){case Ke.bool:return Gv(a);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return Iv(a);case Ke.json:case Ke.jsonb:return Vv(a);case Ke.timestamp:return Yv(a);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Iu(a);default:return Iu(a)}},Iu=s=>s,Gv=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Iv=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},Vv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Kv=(s,a)=>{if(typeof s!="string")return s;const n=s.length-1,l=s[n];if(s[0]==="{"&&l==="}"){let u;const f=s.slice(1,n);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(m=>z0(a,m))}return s},Yv=s=>typeof s=="string"?s.replace(" ","T"):s,U0=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Au{constructor(a,n,l={},c=Hu){this.channel=a,this.event=n,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,n){var l;return this._hasReceived(a)&&n((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:n}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(n))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var zp;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(zp||(zp={}));class ui{constructor(a,n){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ui.syncState(this.state,c,u,f),this.pendingDiffs.forEach(p=>{this.state=ui.syncDiff(this.state,p,u,f)}),this.pendingDiffs=[],m()}),this.channel._on(l.diff,{},c=>{const{onJoin:u,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=ui.syncDiff(this.state,c,u,f),m())}),this.onJoin((c,u,f)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:f})}),this.onLeave((c,u,f)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,n,l,c){const u=this.cloneDeep(a),f=this.transformState(n),m={},p={};return this.map(u,(x,g)=>{f[x]||(p[x]=g)}),this.map(f,(x,g)=>{const y=u[x];if(y){const j=g.map(_=>_.presence_ref),E=y.map(_=>_.presence_ref),k=g.filter(_=>E.indexOf(_.presence_ref)<0),N=y.filter(_=>j.indexOf(_.presence_ref)<0);k.length>0&&(m[x]=k),N.length>0&&(p[x]=N)}else m[x]=g}),this.syncDiff(u,{joins:m,leaves:p},l,c)}static syncDiff(a,n,l,c){const{joins:u,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(u,(m,p)=>{var x;const g=(x=a[m])!==null&&x!==void 0?x:[];if(a[m]=this.cloneDeep(p),g.length>0){const y=a[m].map(E=>E.presence_ref),j=g.filter(E=>y.indexOf(E.presence_ref)<0);a[m].unshift(...j)}l(m,g,p)}),this.map(f,(m,p)=>{let x=a[m];if(!x)return;const g=p.map(y=>y.presence_ref);x=x.filter(y=>g.indexOf(y.presence_ref)<0),a[m]=x,c(m,x,p),x.length===0&&delete a[m]}),a}static map(a,n){return Object.getOwnPropertyNames(a).map(l=>n(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((n,l)=>{const c=a[l];return"metas"in c?n[l]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[l]=c,n},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Up;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Up||(Up={}));var di;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(di||(di={}));var as;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(as||(as={}));class cn{constructor(a,n={config:{}},l){var c,u;if(this.topic=a,this.params=n,this.socket=l,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Au(this,wa.join,this.params,this.timeout),this.rejoinTimer=new q0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(wa.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new ui(this),this.broadcastEndpointURL=U0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,n=this.timeout){var l,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:f,presence:m,private:p}}=this.params,x=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(E=>E.filter))!==null&&c!==void 0?c:[],g=!!this.bindings[di.PRESENCE]&&this.bindings[di.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,y={},j={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:g}),postgres_changes:x,private:p};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(E=>a==null?void 0:a(as.CHANNEL_ERROR,E)),this._onClose(()=>a==null?void 0:a(as.CLOSED)),this.updateJoinPayload(Object.assign({config:j},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){a==null||a(as.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,_=(k=N==null?void 0:N.length)!==null&&k!==void 0?k:0,S=[];for(let T=0;T<_;T++){const A=N[T],{filter:{event:M,schema:K,table:z,filter:O}}=A,L=E&&E[T];if(L&&L.event===M&&cn.isFilterValueEqual(L.schema,K)&&cn.isFilterValueEqual(L.table,z)&&cn.isFilterValueEqual(L.filter,O))S.push(Object.assign(Object.assign({},A),{id:L.id}));else{this.unsubscribe(),this.state=gt.errored,a==null||a(as.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,a&&a(as.SUBSCRIBED);return}}).receive("error",E=>{this.state=gt.errored,a==null||a(as.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(as.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,n={}){return await this.send({type:"presence",event:"track",payload:a},n.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,n,l){return this.state===gt.joined&&a===di.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,n,l)}async httpSend(a,n,l={}){var c;if(n==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const x=await m.json();p=x.error||x.message||p}catch{}return Promise.reject(new Error(p))}async send(a,n={}){var l,c;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:f}=a,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=n.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=x.body)===null||c===void 0?void 0:c.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,m,p;const x=this._push(a.type,a,n.timeout||this.timeout);a.type==="broadcast"&&!(!((p=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=gt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(wa.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Au(this,wa.leave,{},a),l.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gt.closed,this.bindings={}}async _fetchWithTimeout(a,n,l){const c=new AbortController,u=setTimeout(()=>c.abort(),l),f=await this.socket.fetch(a,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(u),f}_push(a,n,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Au(this,a,n,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>$v){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(a,n,l){return n}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,n,l){var c,u;const f=a.toLocaleLowerCase(),{close:m,error:p,leave:x,join:g}=wa;if(l&&[m,p,x,g].indexOf(f)>=0&&l!==this._joinRef())return;let j=this._onMessage(f,n,l);if(n&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(E=>{var k,N,_;return((k=E.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(N=E.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===f}).map(E=>E.callback(j,l)):(u=this.bindings[f])===null||u===void 0||u.filter(E=>{var k,N,_,S,T,A,M,K;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in E){const z=E.id,O=(k=E.filter)===null||k===void 0?void 0:k.event;return z&&((N=n.ids)===null||N===void 0?void 0:N.includes(z))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))&&(!(!((S=E.filter)===null||S===void 0)&&S.table)||E.filter.table===((T=n.data)===null||T===void 0?void 0:T.table))}else{const z=(M=(A=E==null?void 0:E.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return z==="*"||z===((K=n==null?void 0:n.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===f}).map(E=>{if(typeof j=="object"&&"ids"in j){const k=j.data,{schema:N,table:_,commit_timestamp:S,type:T,errors:A}=k;j=Object.assign(Object.assign({},{schema:N,table:_,commit_timestamp:S,eventType:T,new:{},old:{},errors:A}),this._getPayloadRecords(k))}E.callback(j,l)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,n,l){const c=a.toLocaleLowerCase(),u={type:c,filter:n,callback:l};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(a,n){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&cn.isEqual(c.filter,n))})),this}static isEqual(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const l in a)if(a[l]!==n[l])return!1;return!0}static isFilterValueEqual(a,n){return(a??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(wa.close,{},a)}_onError(a){this._on(wa.error,{},n=>a(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const n={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(n.new=qp(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(n.old=qp(a.columns,a.old_record)),n}}const Cu=()=>{},Pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jv=[1e3,2e3,5e3,1e4],Fv=1e4,Qv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xv{constructor(a,n){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hu,this.transport=null,this.heartbeatIntervalMs=Pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cu,this.ref=0,this.reconnectTimer=null,this.vsn=Lp,this.logger=Cu,this.conn=null,this.sendBuffer=[],this.serializer=new Pv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((l=n==null?void 0:n.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${a}/${Gu.websocket}`,this.httpEndpoint=U0(a),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Lv.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const n=a.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const n=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const a=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,n,l){this.logger(a,n,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Os.connecting:return ir.Connecting;case Os.open:return ir.Open;case Os.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,n={config:{}}){const l=`realtime:${a}`,c=this.getChannels().find(u=>u.topic===l);if(c)return c;{const u=new cn(`realtime:${a}`,n,this);return this.channels.push(u),u}}push(a){const{topic:n,event:l,payload:c,ref:u}=a,f=()=>{this.encode(a,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${l} (${u})`,c),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(Bv,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let n=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${a}"`),n.unsubscribe())}_remove(a){this.channels=this.channels.filter(n=>n.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const x=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",x)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:c,payload:u,ref:f}=n,m=f?`(${f})`:"",p=u.status||"";this.log("receive",`${p} ${l} ${c} ${m}`.trim(),u),this.channels.filter(x=>x._isMember(l)).forEach(x=>x._trigger(c,u,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(a){var n;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===Os.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Os.open||this.conn.readyState===Os.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var n;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(wa.error))}_appendParams(a,n){if(Object.keys(n).length===0)return a;const l=a.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${a}${l}${c}`}_workerObjectUrl(a){let n;if(a)n=a;else{const l=new Blob([Qv],{type:"application/javascript"});n=URL.createObjectURL(l)}return n}_setConnectionState(a,n=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(a=null){let n,l=!1;if(a)n=a,l=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const u={access_token:n,version:zv};n&&c.updateJoinPayload(u),c.joinedOnce&&c._isJoined()&&c._push(wa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${a}`,n)})}_triggerStateCallbacks(a,n){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(n)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new q0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var n,l,c,u,f,m,p,x,g,y,j,E;switch(this.transport=(n=a==null?void 0:a.transport)!==null&&n!==void 0?n:null,this.timeout=(l=a==null?void 0:a.timeout)!==null&&l!==void 0?l:Hu,this.heartbeatIntervalMs=(c=a==null?void 0:a.heartbeatIntervalMs)!==null&&c!==void 0?c:Pl.HEARTBEAT_INTERVAL,this.worker=(u=a==null?void 0:a.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=a==null?void 0:a.heartbeatCallback)!==null&&m!==void 0?m:Cu,this.vsn=(p=a==null?void 0:a.vsn)!==null&&p!==void 0?p:Lp,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=a==null?void 0:a.reconnectAfterMs)!==null&&x!==void 0?x:(k=>Jv[k-1]||Fv),this.vsn){case L0:this.encode=(g=a==null?void 0:a.encode)!==null&&g!==void 0?g:((k,N)=>N(JSON.stringify(k))),this.decode=(y=a==null?void 0:a.decode)!==null&&y!==void 0?y:((k,N)=>N(JSON.parse(k)));break;case Uv:this.encode=(j=a==null?void 0:a.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(E=a==null?void 0:a.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}var pi=class extends Error{constructor(s,a){var n;super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&((n=a.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Zv(s,a,n){const l=new URL(a,s);if(n)for(const[c,u]of Object.entries(n))u!==void 0&&l.searchParams.set(c,u);return l.toString()}async function Wv(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function ew(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:n,path:l,query:c,body:u,headers:f}){const m=Zv(s.baseUrl,l,c),p=await Wv(s.auth),x=await a(m,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...p,...f},body:u?JSON.stringify(u):void 0}),g=await x.text(),y=(x.headers.get("content-type")||"").includes("application/json"),j=y&&g?JSON.parse(g):g;if(!x.ok){const E=y?j:void 0,k=E==null?void 0:E.error;throw new pi((k==null?void 0:k.message)??`Request failed with status ${x.status}`,{status:x.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:E})}return{status:x.status,headers:x.headers,data:j}}}}function Hl(s){return s.join("")}var tw=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:Hl(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,a){const n={namespace:s.namespace,properties:a==null?void 0:a.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hl(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hl(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hl(s.namespace)}`}),!0}catch(a){if(a instanceof pi&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(n){if(n instanceof pi&&n.status===409)return;throw n}}};function Wr(s){return s.join("")}var aw=class{constructor(s,a="",n){this.client=s,this.prefix=a,this.accessDelegation=n}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables`,body:a,headers:n})).data.metadata}async updateTable(s,a){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((a==null?void 0:a.purge)??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wr(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(n){if(n instanceof pi&&n.status===404)return!1;throw n}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(n){if(n instanceof pi&&n.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw n}}},sw=class{constructor(s){var l;let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const n=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=ew({baseUrl:n,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(l=s.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new tw(this.client,a),this.tableOps=new aw(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},no=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Xe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var rw=class extends no{constructor(s,a,n){super(s),this.name="StorageApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Vu=class extends no{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}};const cd=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),nw=()=>Response,Ku=s=>{if(Array.isArray(s))return s.map(n=>Ku(n));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([n,l])=>{const c=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));a[c]=Ku(l)}),a},iw=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},lw=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function xi(s){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},xi(s)}function ow(s,a){if(xi(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var l=n.call(s,a);if(xi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function cw(s){var a=ow(s,"string");return xi(a)=="symbol"?a:a+""}function uw(s,a,n){return(a=cw(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function Bp(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function we(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Bp(Object(n),!0).forEach(function(l){uw(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}const Ou=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},dw=async(s,a,n)=>{s instanceof await nw()&&!(n!=null&&n.noResolveJson)?s.json().then(l=>{const c=s.status||500,u=(l==null?void 0:l.statusCode)||c+"";a(new rw(Ou(l),c,u))}).catch(l=>{a(new Vu(Ou(l),l))}):a(new Vu(Ou(s),s))},hw=(s,a,n,l)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return s==="GET"||!l?c:(iw(l)?(c.headers=we({"Content-Type":"application/json"},a==null?void 0:a.headers),c.body=JSON.stringify(l)):c.body=l,a!=null&&a.duplex&&(c.duplex=a.duplex),we(we({},c),n))};async function Si(s,a,n,l,c,u){return new Promise((f,m)=>{s(n,hw(a,l,c,u)).then(p=>{if(!p.ok)throw p;return l!=null&&l.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>dw(p,m,l))})}async function bi(s,a,n,l){return Si(s,"GET",a,n,l)}async function va(s,a,n,l,c){return Si(s,"POST",a,l,c,n)}async function Yu(s,a,n,l,c){return Si(s,"PUT",a,l,c,n)}async function fw(s,a,n,l){return Si(s,"HEAD",a,we(we({},n),{},{noResolveJson:!0}),l)}async function ud(s,a,n,l,c){return Si(s,"DELETE",a,l,c,n)}var mw=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}};let B0;B0=Symbol.toStringTag;var pw=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[B0]="BlobDownloadBuilder",this.promise=null}asStream(){return new mw(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}};const xw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$p={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var bw=class{constructor(s,a={},n,l){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.bucketId=n,this.fetch=cd(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,a,n,l){var c=this;try{let u;const f=we(we({},$p),l);let m=we(we({},c.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),p&&u.append("metadata",c.encodeMetadata(p)),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.has("cacheControl")||u.append("cacheControl",f.cacheControl),p&&!u.has("metadata")&&u.append("metadata",c.encodeMetadata(p))):(u=n,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,p&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!f.duplex&&(f.duplex="half")),l!=null&&l.headers&&(m=we(we({},m),l.headers));const x=c._removeEmptyFolders(a),g=c._getFinalPath(x),y=await(s=="PUT"?Yu:va)(c.fetch,`${c.url}/object/${g}`,u,we({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:y.Id,fullPath:y.Key},error:null}}catch(u){if(c.shouldThrowOnError)throw u;if(Xe(u))return{data:null,error:u};throw u}}async upload(s,a,n){return this.uploadOrUpdate("POST",s,a,n)}async uploadToSignedUrl(s,a,n,l){var c=this;const u=c._removeEmptyFolders(s),f=c._getFinalPath(u),m=new URL(c.url+`/object/upload/sign/${f}`);m.searchParams.set("token",a);try{let p;const x=we({upsert:$p.upsert},l),g=we(we({},c.headers),{"x-upsert":String(x.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",x.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",x.cacheControl)):(p=n,g["cache-control"]=`max-age=${x.cacheControl}`,g["content-type"]=x.contentType),{data:{path:u,fullPath:(await Yu(c.fetch,m.toString(),p,{headers:g})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(Xe(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(s,a){var n=this;try{let l=n._getFinalPath(s);const c=we({},n.headers);a!=null&&a.upsert&&(c["x-upsert"]="true");const u=await va(n.fetch,`${n.url}/object/upload/sign/${l}`,{},{headers:c}),f=new URL(n.url+u.url),m=f.searchParams.get("token");if(!m)throw new no("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:m},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async update(s,a,n){return this.uploadOrUpdate("PUT",s,a,n)}async move(s,a,n){var l=this;try{return{data:await va(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:l.headers}),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async copy(s,a,n){var l=this;try{return{data:{path:(await va(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:l.headers})).Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async createSignedUrl(s,a,n){var l=this;try{let c=l._getFinalPath(s),u=await va(l.fetch,`${l.url}/object/sign/${c}`,we({expiresIn:a},n!=null&&n.transform?{transform:n.transform}:{}),{headers:l.headers});const f=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return u={signedUrl:encodeURI(`${l.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async createSignedUrls(s,a,n){var l=this;try{const c=await va(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:a,paths:s},{headers:l.headers}),u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:c.map(f=>we(we({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${u}`):null})),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}download(s,a){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),c=l?`?${l}`:"",u=this._getFinalPath(s),f=()=>bi(this.fetch,`${this.url}/${n}/${u}${c}`,{headers:this.headers,noResolveJson:!0});return new pw(f,this.shouldThrowOnError)}async info(s){var a=this;const n=a._getFinalPath(s);try{return{data:Ku(await bi(a.fetch,`${a.url}/object/info/${n}`,{headers:a.headers})),error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async exists(s){var a=this;const n=a._getFinalPath(s);try{return await fw(a.fetch,`${a.url}/object/${n}`,{headers:a.headers}),{data:!0,error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Xe(l)&&l instanceof Vu){const c=l.originalError;if([400,404].includes(c==null?void 0:c.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,a){const n=this._getFinalPath(s),l=[],c=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&l.push(c);const u=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});f!==""&&l.push(f);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}async remove(s){var a=this;try{return{data:await ud(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async list(s,a,n){var l=this;try{const c=we(we(we({},xw),a),{},{prefix:s||""});return{data:await va(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},n),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async listV2(s,a){var n=this;try{const l=we({},s);return{data:await va(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,l,{headers:n.headers},a),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const $0="2.90.1",P0={"X-Client-Info":`storage-js/${$0}`};var gw=class{constructor(s,a={},n,l){this.shouldThrowOnError=!1;const c=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=we(we({},P0),a),this.fetch=cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var a=this;try{const n=a.listBucketOptionsToQueryString(s);return{data:await bi(a.fetch,`${a.url}/bucket${n}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async getBucket(s){var a=this;try{return{data:await bi(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async createBucket(s,a={public:!1}){var n=this;try{return{data:await va(n.fetch,`${n.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async updateBucket(s,a){var n=this;try{return{data:await Yu(n.fetch,`${n.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Xe(l))return{data:null,error:l};throw l}}async emptyBucket(s){var a=this;try{return{data:await va(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await ud(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},yw=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=we(we({},P0),a),this.fetch=cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await va(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async listBuckets(s){var a=this;try{const n=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&n.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&n.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&n.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&n.set("sortOrder",s.sortOrder),s!=null&&s.search&&n.set("search",s.search);const l=n.toString(),c=l?`${a.url}/bucket?${l}`:`${a.url}/bucket`;return{data:await bi(a.fetch,c,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await ud(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}from(s){var a=this;if(!lw(s))throw new no("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new sw({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(n,{get(c,u){const f=c[u];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(c,m),error:null}}catch(p){if(l)throw p;return{data:null,error:p}}}}})}};const dd={"X-Client-Info":`storage-js/${$0}`,"Content-Type":"application/json"};var H0=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Qt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Ru=class extends H0{constructor(s,a,n){super(s),this.name="StorageVectorsApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vw=class extends H0{constructor(s,a){super(s),this.name="StorageVectorsUnknownError",this.originalError=a}};const hd=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),ww=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Pp=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),jw=async(s,a,n)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(n!=null&&n.noResolveJson)){const l=s.status||500,c=s;if(typeof c.json=="function")c.json().then(u=>{const f=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";a(new Ru(Pp(u),l,f))}).catch(()=>{const u=l+"";a(new Ru(c.statusText||`HTTP ${l} error`,l,u))});else{const u=l+"";a(new Ru(c.statusText||`HTTP ${l} error`,l,u))}}else a(new vw(Pp(s),s))},_w=(s,a,n,l)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return l?(ww(l)?(c.headers=we({"Content-Type":"application/json"},a==null?void 0:a.headers),c.body=JSON.stringify(l)):c.body=l,we(we({},c),n)):c};async function Nw(s,a,n,l,c,u){return new Promise((f,m)=>{s(n,_w(a,l,c,u)).then(p=>{if(!p.ok)throw p;if(l!=null&&l.noResolveJson)return p;const x=p.headers.get("content-type");return!x||!x.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>jw(p,m,l))})}async function Xt(s,a,n,l,c){return Nw(s,"POST",a,l,c,n)}var Sw=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=we(we({},dd),a),this.fetch=hd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async getIndex(s,a){var n=this;try{return{data:await Xt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:n.headers}),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}async listIndexes(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async deleteIndex(s,a){var n=this;try{return{data:await Xt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:n.headers})||{},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Qt(l))return{data:null,error:l};throw l}}},kw=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=we(we({},dd),a),this.fetch=hd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var a=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Xt(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async getVectors(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async listVectors(s){var a=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await Xt(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async queryVectors(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async deleteVectors(s){var a=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Xt(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}},Ew=class{constructor(s,a={},n){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=we(we({},dd),a),this.fetch=hd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async getBucket(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async listBuckets(s={}){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}async deleteBucket(s){var a=this;try{return{data:await Xt(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Qt(n))return{data:null,error:n};throw n}}},Tw=class extends Ew{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new Aw(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,n=this;return a().call(n,s)}async getBucket(s){var a=()=>super.getBucket,n=this;return a().call(n,s)}async listBuckets(s={}){var a=()=>super.listBuckets,n=this;return a().call(n,s)}async deleteBucket(s){var a=()=>super.deleteBucket,n=this;return a().call(n,s)}},Aw=class extends Sw{constructor(s,a,n,l){super(s,a,l),this.vectorBucketName=n}async createIndex(s){var a=()=>super.createIndex,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,n=this;return a().call(n,n.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,n=this;return a().call(n,n.vectorBucketName,s)}index(s){return new Cw(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},Cw=class extends kw{constructor(s,a,n,l,c){super(s,a,c),this.vectorBucketName=n,this.indexName=l}async putVectors(s){var a=()=>super.putVectors,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(s){var a=()=>super.getVectors,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,n=this;return a().call(n,we(we({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Ow=class extends gw{constructor(s,a={},n,l){super(s,a,n,l)}from(s){return new bw(this.url,this.headers,s,this.fetch)}get vectors(){return new Tw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yw(this.url+"/iceberg",this.headers,this.fetch)}};const G0="2.90.1",ln=30*1e3,Ju=3,Du=Ju*ln,Rw="http://localhost:9999",Dw="supabase.auth.token",Mw={"X-Client-Info":`gotrue-js/${G0}`},Fu="X-Supabase-Api-Version",I0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Lw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qw=600*1e3;class gi extends Error{constructor(a,n,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=l}}function xe(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class zw extends gi{constructor(a,n,l){super(a,n,l),this.name="AuthApiError",this.status=n,this.code=l}}function Uw(s){return xe(s)&&s.name==="AuthApiError"}class lr extends gi{constructor(a,n){super(a),this.name="AuthUnknownError",this.originalError=n}}class ns extends gi{constructor(a,n,l,c){super(a,l,c),this.name=n,this.status=l}}class Ft extends ns{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Bw(s){return xe(s)&&s.name==="AuthSessionMissingError"}class en extends ns{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gl extends ns{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Il extends ns{constructor(a,n=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $w(s){return xe(s)&&s.name==="AuthImplicitGrantRedirectError"}class Hp extends ns{constructor(a,n=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pw extends ns{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Qu extends ns{constructor(a,n){super(a,"AuthRetryableFetchError",n,void 0)}}function Mu(s){return xe(s)&&s.name==="AuthRetryableFetchError"}class Gp extends ns{constructor(a,n,l){super(a,"AuthWeakPasswordError",n,"weak_password"),this.reasons=l}}class Xu extends ns{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ip=` 	
\r=`.split(""),Hw=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<Ip.length;a+=1)s[Ip[a].charCodeAt(0)]=-2;for(let a=0;a<Fl.length;a+=1)s[Fl[a].charCodeAt(0)]=a;return s})();function Vp(s,a,n){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;n(Fl[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;n(Fl[l]),a.queuedBits-=6}}function V0(s,a,n){const l=Hw[s];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)n(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Kp(s){const a=[],n=f=>{a.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=f=>{Vw(f,l,n)};for(let f=0;f<s.length;f+=1)V0(s.charCodeAt(f),c,u);return a.join("")}function Gw(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Iw(s,a){for(let n=0;n<s.length;n+=1){let l=s.charCodeAt(n);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(s.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}Gw(l,a)}}function Vw(s,a,n){if(a.utf8seq===0){if(s<=127){n(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&n(a.codepoint)}}function hn(s){const a=[],n={queue:0,queuedBits:0},l=c=>{a.push(c)};for(let c=0;c<s.length;c+=1)V0(s.charCodeAt(c),n,l);return new Uint8Array(a)}function Kw(s){const a=[];return Iw(s,n=>a.push(n)),new Uint8Array(a)}function or(s){const a=[],n={queue:0,queuedBits:0},l=c=>{a.push(c)};return s.forEach(c=>Vp(c,n,l)),Vp(null,n,l),a.join("")}function Yw(s){return Math.round(Date.now()/1e3)+s}function Jw(){return Symbol("auth-callback")}const At=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},K0=()=>{if(!At())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function Fw(s){const a={},n=new URL(s);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,u)=>{a[u]=c})}catch{}return n.searchParams.forEach((l,c)=>{a[c]=l}),a}const Y0=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),Qw=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",on=async(s,a,n)=>{await s.setItem(a,JSON.stringify(n))},sr=async(s,a)=>{const n=await s.getItem(a);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tt=async(s,a)=>{await s.removeItem(a)};class io{constructor(){this.promise=new io.promiseConstructor((a,n)=>{this.resolve=a,this.reject=n})}}io.promiseConstructor=Promise;function Lu(s){const a=s.split(".");if(a.length!==3)throw new Xu("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!Lw.test(a[l]))throw new Xu("JWT not in base64url format");return{header:JSON.parse(Kp(a[0])),payload:JSON.parse(Kp(a[1])),signature:hn(a[2]),raw:{header:a[0],payload:a[1]}}}async function Xw(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function Zw(s,a){return new Promise((l,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await s(u);if(!a(u,null,f)){l(f);return}}catch(f){if(!a(u,f)){c(f);return}}})()})}function Ww(s){return("0"+s.toString(16)).substr(-2)}function e1(){const a=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=n.length;let c="";for(let u=0;u<56;u++)c+=n.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(a),Array.from(a,Ww).join("")}async function t1(s){const n=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(l);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function a1(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const n=await t1(s);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function tn(s,a,n=!1){const l=e1();let c=l;n&&(c+="/PASSWORD_RECOVERY"),await on(s,`${a}-code-verifier`,c);const u=await a1(l);return[u,l===u?"plain":"s256"]}const s1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r1(s){const a=s.headers.get(Fu);if(!a||!a.match(s1))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function n1(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function i1(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const l1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function an(s){if(!l1.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qu(){const s={};return new Proxy(s,{get:(a,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o1(s,a){return new Proxy(s,{get:(n,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const u=l.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,l,c)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(n,l,c)}})}function Yp(s){return JSON.parse(JSON.stringify(s))}const nr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),c1=[502,503,504];async function Jp(s){var a;if(!Qw(s))throw new Qu(nr(s),0);if(c1.includes(s.status))throw new Qu(nr(s),s.status);let n;try{n=await s.json()}catch(u){throw new lr(nr(u),u)}let l;const c=r1(s);if(c&&c.getTime()>=I0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?l=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(l=n.error_code),l){if(l==="weak_password")throw new Gp(nr(n),s.status,((a=n.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new Ft}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new Gp(nr(n),s.status,n.weak_password.reasons);throw new zw(nr(n),s.status||500,l)}const u1=(s,a,n,l)=>{const c={method:s,headers:(a==null?void 0:a.headers)||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),n))};async function ve(s,a,n,l){var c;const u=Object.assign({},l==null?void 0:l.headers);u[Fu]||(u[Fu]=I0["2024-01-01"].name),l!=null&&l.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const f=(c=l==null?void 0:l.query)!==null&&c!==void 0?c:{};l!=null&&l.redirectTo&&(f.redirect_to=l.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await d1(s,a,n+m,{headers:u,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(p):{data:Object.assign({},p),error:null}}async function d1(s,a,n,l,c,u){const f=u1(a,l,c,u);let m;try{m=await s(n,Object.assign({},f))}catch(p){throw console.error(p),new Qu(nr(p),0)}if(m.ok||await Jp(m),l!=null&&l.noResolveJson)return m;try{return await m.json()}catch(p){await Jp(p)}}function ya(s){var a;let n=null;m1(s)&&(n=Object.assign({},s),s.expires_at||(n.expires_at=Yw(s.expires_in)));const l=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:n,user:l},error:null}}function Fp(s){const a=ya(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((n,l)=>n&&typeof l=="string",!0)&&(a.data.weak_password=s.weak_password),a}function Ds(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function h1(s){return{data:s,error:null}}function f1(s){const{action_link:a,email_otp:n,hashed_token:l,redirect_to:c,verification_type:u}=s,f=ro(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:n,hashed_token:l,redirect_to:c,verification_type:u},p=Object.assign({},f);return{data:{properties:m,user:p},error:null}}function Qp(s){return s}function m1(s){return s.access_token&&s.refresh_token&&s.expires_in}const zu=["global","local","others"];class p1{constructor({url:a="",headers:n={},fetch:l}){this.url=a,this.headers=n,this.fetch=Y0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,n=zu[0]){if(zu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zu.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(xe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ds})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:n}=a,l=ro(a,["options"]),c=Object.assign(Object.assign({},l),n);return"newEmail"in l&&(c.new_email=l==null?void 0:l.newEmail,delete c.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:f1,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Ds})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async listUsers(a){var n,l,c,u,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},g=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=a==null?void 0:a.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Qp});if(g.error)throw g.error;const y=await g.json(),j=(f=g.headers.get("x-total-count"))!==null&&f!==void 0?f:0,E=(p=(m=g.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);x[`${_}Page`]=N}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},y),x),error:null}}catch(x){if(xe(x))return{data:{users:[]},error:x};throw x}}async getUserById(a){an(a);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Ds})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(a,n){an(a);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:n,headers:this.headers,xform:Ds})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,n=!1){an(a);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ds})}catch(l){if(xe(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){an(a.userId);try{const{data:n,error:l}=await ve(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:l}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _deleteFactor(a){an(a.userId),an(a.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(a){var n,l,c,u,f,m,p;try{const x={nextPage:null,lastPage:0,total:0},g=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&l!==void 0?l:"",per_page:(u=(c=a==null?void 0:a.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:Qp});if(g.error)throw g.error;const y=await g.json(),j=(f=g.headers.get("x-total-count"))!==null&&f!==void 0?f:0,E=(p=(m=g.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);x[`${_}Page`]=N}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},y),x),error:null}}catch(x){if(xe(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(a){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(a,n){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:n,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(xe(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(a){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xe(n))return{data:null,error:n};throw n}}}function Xp(s={}){return{getItem:a=>s[a]||null,setItem:(a,n)=>{s[a]=n},removeItem:a=>{delete s[a]}}}const sn={debug:!!(globalThis&&K0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class J0 extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class x1 extends J0{}async function b1(s,a,n){sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),sn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await n()}finally{sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(a===0)throw sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new x1(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(sn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function g1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function F0(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function y1(s){return parseInt(s,16)}function v1(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function w1(s){var a;const{chainId:n,domain:l,expirationTime:c,issuedAt:u=new Date,nonce:f,notBefore:m,requestId:p,resources:x,scheme:g,uri:y,version:j}=s;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const E=F0(s.address),k=g?`${g}://${l}`:l,N=s.statement?`${s.statement}
`:"",_=`${k} wants you to sign in with your Ethereum account:
${E}

${N}`;let S=`URI: ${y}
Version: ${j}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${u.toISOString()}`;if(c&&(S+=`
Expiration Time: ${c.toISOString()}`),m&&(S+=`
Not Before: ${m.toISOString()}`),p&&(S+=`
Request ID: ${p}`),x){let T=`
Resources:`;for(const A of x){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);T+=`
- ${A}`}S+=T}return`${_}
${S}`}class ht extends Error{constructor({message:a,code:n,cause:l,name:c}){var u;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=c??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class Ql extends ht{constructor(a,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:a}),this.name="WebAuthnUnknownError",this.originalError=n}}function j1({error:s,options:a}){var n,l,c;const{publicKey:u}=a;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const f=window.location.hostname;if(Q0(f)){if(u.rp.id!==f)return new ht({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function _1({error:s,options:a}){const{publicKey:n}=a;if(!n)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(Q0(l)){if(n.rpId!==l)return new ht({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class N1{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const S1=new N1;function k1(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:n,excludeCredentials:l}=s,c=ro(s,["challenge","user","excludeCredentials"]),u=hn(a).buffer,f=Object.assign(Object.assign({},n),{id:hn(n.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:u,user:f});if(l&&l.length>0){m.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const x=l[p];m.excludeCredentials[p]=Object.assign(Object.assign({},x),{id:hn(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return m}function E1(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:n}=s,l=ro(s,["challenge","allowCredentials"]),c=hn(a).buffer,u=Object.assign(Object.assign({},l),{challenge:c});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const m=n[f];u.allowCredentials[f]=Object.assign(Object.assign({},m),{id:hn(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function T1(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s;return{id:s.id,rawId:s.id,response:{attestationObject:or(new Uint8Array(s.response.attestationObject)),clientDataJSON:or(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function A1(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s,l=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:or(new Uint8Array(c.authenticatorData)),clientDataJSON:or(new Uint8Array(c.clientDataJSON)),signature:or(new Uint8Array(c.signature)),userHandle:c.userHandle?or(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Q0(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Zp(){var s,a;return!!(At()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function C1(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ql("Browser returned unexpected credential type",a)}:{data:null,error:new Ql("Empty credential response",a)}}catch(a){return{data:null,error:j1({error:a,options:s})}}}async function O1(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Ql("Browser returned unexpected credential type",a)}:{data:null,error:new Ql("Empty credential response",a)}}catch(a){return{data:null,error:_1({error:a,options:s})}}}const R1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},D1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Xl(...s){const a=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of s)if(c)for(const u in c){const f=c[u];if(f!==void 0)if(Array.isArray(f))l[u]=f;else if(n(f))l[u]=f;else if(a(f)){const m=l[u];a(m)?l[u]=Xl(m,f):l[u]=Xl(f)}else l[u]=f}return l}function M1(s,a){return Xl(R1,s,a||{})}function L1(s,a){return Xl(D1,s,a||{})}class q1{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:n,friendlyName:l,signal:c},u){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:n});if(!f)return{data:null,error:m};const p=c??S1.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${l}`),x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=M1(f.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:g,error:y}=await C1({publicKey:x,signal:p});return g?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const x=L1(f.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:g,error:y}=await O1(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:p}));return g?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new lr("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:n,webauthn:l}){return this.client.mfa.verify({factorId:n,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new gi("rpId is required for WebAuthn authentication")};try{if(!Zp())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:a,webauthn:{rpId:n,rpOrigins:l},signal:c},{request:u});if(!f)return{data:null,error:m};const{webauthn:p}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:l,credential_response:p.credential_response}})}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new lr("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},u){if(!n)return{data:null,error:new gi("rpId is required for WebAuthn registration")};try{if(!Zp())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===a&&j.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:m};const{data:p,error:x}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:l},signal:c},{create:u});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:x}}catch(f){return xe(f)?{data:null,error:f}:{data:null,error:new lr("Unexpected error in register",f)}}}}g1();const z1={url:Rw,storageKey:Dw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Mw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Wp(s,a,n){return await n()}const rn={};class yi{get jwks(){var a,n;return(n=(a=rn[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(a){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,n;return(n=(a=rn[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){rn[this.storageKey]=Object.assign(Object.assign({},rn[this.storageKey]),{cachedAt:a})}constructor(a){var n,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},z1),a);if(this.storageKey=u.storageKey,this.instanceID=(n=yi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,yi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&At()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new p1({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Y0(u.fetch),this.lock=u.lock||Wp,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&At()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=b1:this.lock=Wp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new q1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:K0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xp(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Xp(this.memoryStorage)),At()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${G0}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let n={},l="none";if(At()&&(n=Fw(window.location.href),this._isImplicitGrantCallback(n)?l="implicit":await this._isPKCECallback(n)&&(l="pkce")),At()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:u}=await this._getSessionFromURL(n,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),$w(u)){const p=(a=u.details)===null||a===void 0?void 0:a.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:f,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return xe(n)?this._returnResult({error:n}):this._returnResult({error:new lr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var n,l,c;try{const u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(n=a==null?void 0:a.options)===null||n===void 0?void 0:n.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=a==null?void 0:a.options)===null||c===void 0?void 0:c.captchaToken}},xform:ya}),{data:f,error:m}=u;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(u){if(xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(a){var n,l,c;try{let u;if("email"in a){const{email:g,password:y,options:j}=a;let E=null,k=null;this.flowType==="pkce"&&([E,k]=await tn(this.storage,this.storageKey)),u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:g,password:y,data:(n=j==null?void 0:j.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:E,code_challenge_method:k},xform:ya})}else if("phone"in a){const{phone:g,password:y,options:j}=a;u=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(l=j==null?void 0:j.data)!==null&&l!==void 0?l:{},channel:(c=j==null?void 0:j.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:ya})}else throw new Gl("You must provide either an email or phone number and a password");const{data:f,error:m}=u;if(m||!f)return await Tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(u){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(a){try{let n;if("email"in a){const{email:u,password:f,options:m}=a;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fp})}else if("phone"in a){const{phone:u,password:f,options:m}=a;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Fp})}else throw new Gl("You must provide either an email or phone number and a password");const{data:l,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new en;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(a){var n,l,c,u;return await this._handleProviderSignIn(a.provider,{redirectTo:(n=a.options)===null||n===void 0?void 0:n.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=a.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:n}=a;switch(n){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(a){var n,l,c,u,f,m,p,x,g,y,j;let E,k;if("message"in a)E=a.message,k=a.signature;else{const{chain:N,wallet:_,statement:S,options:T}=a;let A;if(At())if(typeof _=="object")A=_;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")A=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=_}const M=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href),K=await A.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=F0(K[0]);let O=(l=T==null?void 0:T.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!O){const q=await A.request({method:"eth_chainId"});O=y1(q)}const L={domain:M.host,address:z,statement:S,uri:M.href,version:"1",chainId:O,nonce:(c=T==null?void 0:T.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(f=(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=T==null?void 0:T.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=T==null?void 0:T.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(x=T==null?void 0:T.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(g=T==null?void 0:T.signInWithEthereum)===null||g===void 0?void 0:g.resources};E=w1(L),k=await A.request({method:"personal_sign",params:[v1(E),z]})}try{const{data:N,error:_}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:k},!((y=a.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ya});if(_)throw _;if(!N||!N.session||!N.user){const S=new en;return this._returnResult({data:{user:null,session:null},error:S})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:_})}catch(N){if(xe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(a){var n,l,c,u,f,m,p,x,g,y,j,E;let k,N;if("message"in a)k=a.message,N=a.signature;else{const{chain:_,wallet:S,statement:T,options:A}=a;let M;if(At())if(typeof S=="object")M=S;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))M=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const K=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const z=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),T?{statement:T}:null));let O;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")O=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)O=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)k=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),N=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${K.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(c=(l=A==null?void 0:A.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((p=A==null?void 0:A.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((x=A==null?void 0:A.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((y=(g=A==null?void 0:A.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...A.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const z=await M.signMessage(new TextEncoder().encode(k),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=z}}try{const{data:_,error:S}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:or(N)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(E=a.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:ya});if(S)throw S;if(!_||!_.session||!_.user){const T=new en;return this._returnResult({data:{user:null,session:null},error:T})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:S})}catch(_){if(xe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(a){const n=await sr(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(n??"").split("/");try{if(!l&&this.flowType==="pkce")throw new Pw;const{data:u,error:f}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:ya});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!u||!u.session||!u.user){const m=new en;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:f})}catch(u){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(a){try{const{options:n,provider:l,token:c,access_token:u,nonce:f}=a,m=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ya}),{data:p,error:x}=m;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!p||!p.session||!p.user){const g=new en;return this._returnResult({data:{user:null,session:null},error:g})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:x})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(a){var n,l,c,u,f;try{if("email"in a){const{email:m,options:p}=a;let x=null,g=null;this.flowType==="pkce"&&([x,g]=await tn(this.storage,this.storageKey));const{error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:g},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in a){const{phone:m,options:p}=a,{data:x,error:g}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p==null?void 0:p.data)!==null&&c!==void 0?c:{},create_user:(u=p==null?void 0:p.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:g})}throw new Gl("You must provide either an email or phone number.")}catch(m){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(a){var n,l;try{let c,u;"options"in a&&(c=(n=a.options)===null||n===void 0?void 0:n.redirectTo,u=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:m}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:ya});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,x=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:x,session:p},error:null})}catch(c){if(xe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(a){var n,l,c,u,f;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await tn(this.storage,this.storageKey));const x=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(n=a.options)===null||n===void 0?void 0:n.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=a==null?void 0:a.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:h1});return!((u=x.data)===null||u===void 0)&&u.url&&At()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(x.data.url),this._returnResult(x)}catch(m){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:n},error:l}=a;if(l)throw l;if(!n)throw new Ft;const{error:c}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(a){if(xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const n=`${this.url}/resend`;if("email"in a){const{email:l,type:c,options:u}=a,{error:f}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:l,type:c,options:u}=a,{data:f,error:m}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Gl("You must provide either an email or phone number and a type")}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(a,n){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=n();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await a(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const n=await sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?a=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<Du:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const f=await sr(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=qu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=o1(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(a){try{return a?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Ds}):await this._useSession(async n=>{var l,c,u;const{data:f,error:m}=n;if(m)throw m;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ft}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Ds})})}catch(n){if(xe(n))return Bw(n)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(a,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,n))}async _updateUser(a,n={}){try{return await this._useSession(async l=>{const{data:c,error:u}=l;if(u)throw u;if(!c.session)throw new Ft;const f=c.session;let m=null,p=null;this.flowType==="pkce"&&a.email!=null&&([m,p]=await tn(this.storage,this.storageKey));const{data:x,error:g}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:p}),jwt:f.access_token,xform:Ds});if(g)throw g;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Ft;const n=Date.now()/1e3;let l=n,c=!0,u=null;const{payload:f}=Lu(a.access_token);if(f.exp&&(l=f.exp,c=l<=n),c){const{data:m,error:p}=await this._callRefreshToken(a.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(a.access_token);if(p)throw p;u={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:l-n,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async n=>{var l;if(!a){const{data:f,error:m}=n;if(m)throw m;a=(l=f.session)!==null&&l!==void 0?l:void 0}if(!(a!=null&&a.refresh_token))throw new Ft;const{data:c,error:u}=await this._callRefreshToken(a.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(a,n){try{if(!At())throw new Il("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Il(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Hp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Il("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Hp("No code detected.");const{data:T,error:A}=await this._exchangeCodeForSession(a.code);if(A)throw A;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:u,refresh_token:f,expires_in:m,expires_at:p,token_type:x}=a;if(!u||!m||!f||!x)throw new Il("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(m);let j=g+y;p&&(j=parseInt(p));const E=j-g;E*1e3<=ln&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${y}s`);const k=j-y;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,j,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,j,g);const{data:N,error:_}=await this._getUser(u);if(_)throw _;const S={provider_token:l,provider_refresh_token:c,access_token:u,expires_in:y,expires_at:j,refresh_token:f,token_type:x,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:a.type},error:null})}catch(l){if(xe(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const n=await sr(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&n)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async n=>{var l;const{data:c,error:u}=n;if(u)return this._returnResult({error:u});const f=(l=c.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:m}=await this.admin.signOut(f,a);if(m&&!(Uw(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return a!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const n=Jw(),l={id:n,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async n=>{var l,c;try{const{data:{session:u},error:f}=n;if(f)throw f;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",a,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",u),console.error(u)}})}async resetPasswordForEmail(a,n={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await tn(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var a;try{const{data:n,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=n.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var n;try{const{data:l,error:c}=await this._useSession(async u=>{var f,m,p,x,g;const{data:y,error:j}=u;if(j)throw j;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=a.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(x=y.session)===null||x===void 0?void 0:x.access_token)!==null&&g!==void 0?g:void 0})});if(c)throw c;return At()&&!(!((n=a.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:a.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(xe(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async n=>{var l;try{const{error:c,data:{session:u}}=n;if(c)throw c;const{options:f,provider:m,token:p,access_token:x,nonce:g}=a,y=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u==null?void 0:u.access_token)!==null&&l!==void 0?l:void 0,body:{provider:m,id_token:p,access_token:x,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ya}),{data:j,error:E}=y;return E?this._returnResult({data:{user:null,session:null},error:E}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new en}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:E}))}catch(c){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),xe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(a){try{return await this._useSession(async n=>{var l,c;const{data:u,error:f}=n;if(f)throw f;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(a){const n=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(n,"begin");try{const l=Date.now();return await Zw(async c=>(c>0&&await Xw(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ya})),(c,u)=>{const f=200*Math.pow(2,c);return u&&Mu(u)&&Date.now()+f-l<ln})}catch(l){if(this._debug(n,"error",l),xe(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(n,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,n){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",n,"url",l),At()&&!n.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,n;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await sr(this.storage,this.storageKey);if(c&&this.userStorage){let f=await sr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:c.user},await on(this.userStorage,this.storageKey+"-user",f)),c.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:qu()}else if(c&&!c.user&&!c.user){const f=await sr(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(c.user=f.user,await Tt(this.storage,this.storageKey+"-user"),await on(this.storage,this.storageKey,c)):c.user=qu()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const u=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Du;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Du}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:f}=await this._callRefreshToken(c.refresh_token);f&&(console.error(f),Mu(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(c.access_token);!m&&(f!=null&&f.user)?(c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var n,l;if(!a)throw new Ft;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new io;const{data:u,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!u.session)throw new Ft;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(c,"error",u),xe(u)){const f={data:null,error:u};return Mu(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,n,l=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",n,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:n});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,n)}catch(p){u.push(p)}});if(await Promise.all(f),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await Tt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},a),l=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&n.user&&await on(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const u=Yp(c);await on(this.storage,this.storageKey,u)}else{const c=Yp(n);await on(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&At()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),ln);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async n=>{const{data:{session:l}}=n;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-a)/ln);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ln}ms, refresh threshold is ${Ju} ticks`),c<=Ju&&await this._callRefreshToken(l.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof J0)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!At()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const n=`#_onVisibilityChanged(${a})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,n,l){const c=[`provider=${encodeURIComponent(n)}`];if(l!=null&&l.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,f]=await tn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});c.push(m.toString())}if(l!=null&&l.queryParams){const u=new URLSearchParams(l.queryParams);c.push(u.toString())}return l!=null&&l.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async n=>{var l;const{data:c,error:u}=n;return u?this._returnResult({data:null,error:u}):await ve(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(a){try{return await this._useSession(async n=>{var l,c;const{data:u,error:f}=n;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:p,error:x}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return x?this._returnResult({data:null,error:x}):(a.factorType==="totp"&&p.type==="totp"&&(!((c=p==null?void 0:p.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var l;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?T1(a.webauthn.credential_response):A1(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:p}=await ve(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var l;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=await ve(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=c==null?void 0:c.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:k1(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:E1(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(a){const{data:n,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:n.id,code:a.code})}async _listFactors(){var a;const{data:{user:n},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(a=n==null?void 0:n.factors)!==null&&a!==void 0?a:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var a,n;const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Lu(l.access_token);let f=null;u.aal&&(f=u.aal);let m=f;((n=(a=l.user.factors)===null||a===void 0?void 0:a.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const x=u.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async n=>{const{data:{session:l},error:c}=n;return c?this._returnResult({data:null,error:c}):l?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Ft})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(a,n){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Ft});const f=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&At()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,n){try{return await this._useSession(async l=>{const{data:{session:c},error:u}=l;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new Ft});const f=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&At()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:n},error:l}=a;return l?this._returnResult({data:null,error:l}):n?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Ft})})}catch(a){if(xe(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async n=>{const{data:{session:l},error:c}=n;return c?this._returnResult({data:null,error:c}):l?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ft})})}catch(n){if(xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(a,n={keys:[]}){let l=n.keys.find(m=>m.kid===a);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(m=>m.kid===a),l&&this.jwks_cached_at+qw>c)return l;const{data:u,error:f}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,l=u.keys.find(m=>m.kid===a),!l)?null:l}async getClaims(a,n={}){try{let l=a;if(!l){const{data:E,error:k}=await this.getSession();if(k||!E.session)return this._returnResult({data:null,error:k});l=E.session.access_token}const{header:c,payload:u,signature:f,raw:{header:m,payload:p}}=Lu(l);n!=null&&n.allowExpired||n1(u.exp);const x=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!x){const{error:E}=await this.getUser(l);if(E)throw E;return{data:{claims:u,header:c,signature:f},error:null}}const g=i1(c.alg),y=await crypto.subtle.importKey("jwk",x,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,f,Kw(`${m}.${p}`)))throw new Xu("Invalid JWT signature");return{data:{claims:u,header:c,signature:f},error:null}}catch(l){if(xe(l))return this._returnResult({data:null,error:l});throw l}}}yi.nextInstanceID={};const U1=yi,B1="2.90.1";let ci="";typeof Deno<"u"?ci="deno":typeof document<"u"?ci="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ci="react-native":ci="node";const $1={"X-Client-Info":`supabase-js-${ci}/${B1}`},P1={headers:$1},H1={schema:"public"},G1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I1={};function vi(s){"@babel/helpers - typeof";return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},vi(s)}function V1(s,a){if(vi(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var l=n.call(s,a);if(vi(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function K1(s){var a=V1(s,"string");return vi(a)=="symbol"?a:a+""}function Y1(s,a,n){return(a=K1(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n,s}function e0(s,a){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),n.push.apply(n,l)}return n}function st(s){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?e0(Object(n),!0).forEach(function(l){Y1(s,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):e0(Object(n)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(n,l))})}return s}const J1=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),F1=()=>Headers,Q1=(s,a,n)=>{const l=J1(n),c=F1();return async(u,f)=>{var m;const p=(m=await a())!==null&&m!==void 0?m:s;let x=new c(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",s),x.has("Authorization")||x.set("Authorization",`Bearer ${p}`),l(u,st(st({},f),{},{headers:x}))}};function X1(s){return s.endsWith("/")?s:s+"/"}function Z1(s,a){var n,l;const{db:c,auth:u,realtime:f,global:m}=s,{db:p,auth:x,realtime:g,global:y}=a,j={db:st(st({},p),c),auth:st(st({},x),u),realtime:st(st({},g),f),storage:{},global:st(st(st({},y),m),{},{headers:st(st({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(l=m==null?void 0:m.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?j.accessToken=s.accessToken:delete j.accessToken,j}function W1(s){const a=s==null?void 0:s.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(X1(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ej=class extends U1{constructor(s){super(s)}},tj=class{constructor(s,a,n){var l,c;this.supabaseUrl=s,this.supabaseKey=a;const u=W1(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:H1,realtime:I1,auth:st(st({},G1),{},{storageKey:f}),global:P1},p=Z1(n??{},m);if(this.storageKey=(l=p.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var x;this.auth=this._initSupabaseAuthClient((x=p.auth)!==null&&x!==void 0?x:{},this.headers,p.global.fetch)}this.fetch=Q1(a,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(st({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Mv(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Ow(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Av(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,n)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,n;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:n,storage:l,userStorage:c,storageKey:u,flowType:f,lock:m,debug:p,throwOnError:x},g,y){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ej({url:this.authUrl.href,headers:st(st({},j),g),storageKey:u,autoRefreshToken:s,persistSession:a,detectSessionInUrl:n,storage:l,userStorage:c,flowType:f,lock:m,debug:p,throwOnError:x,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Xv(this.realtimeUrl.href,st(st({},s),{},{params:st(st({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(s,a,n){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const aj=(s,a,n)=>new tj(s,a,n);function sj(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const a=s.version;if(a==null)return!1;const n=a.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}sj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rj="https://dgpdlwklqvbmdtalyiis.supabase.co",nj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRncGRsd2tscXZibWR0YWx5aWlzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg2MzEzMTYsImV4cCI6MjA4NDIwNzMxNn0.REgLPzPG7Xq2I5Ocp7vD8IS2MLuqfbNNioOrS0RNGSA",Y=aj(rj,nj),Ms=(s,a)=>{const{data:n}=Y.storage.from(s).getPublicUrl(a);return n.publicUrl},ij=({onSuccess:s})=>{const[a,n]=v.useState(!0),[l,c]=v.useState(""),[u,f]=v.useState(""),[m,p]=v.useState(""),[x,g]=v.useState(!1),[y,j]=v.useState(!1),[E,k]=v.useState(""),[N,_]=v.useState(!1),S=async M=>{M.preventDefault(),g(!0),k("");try{if(a){const{data:K,error:z}=await Y.auth.signInWithPassword({email:l,password:u});if(z)throw z}else{const{data:K,error:z}=await Y.auth.signUp({email:l,password:u,options:{emailRedirectTo:`${window.location.origin}/#/email-confirmed`,data:{name:m,role:"player"}}});if(z)throw z;if(K.user&&!K.user.confirmed_at){_(!0),g(!1);return}}await new Promise(K=>setTimeout(K,100)),s()}catch(K){console.error(" Auth error:",K),k(K.message||"Authentication failed")}finally{g(!1)}},T=async()=>{g(!0),k("");try{const{error:M}=await Y.auth.resend({type:"signup",email:l});if(M)throw M;alert("Verification email sent! Please check your inbox.")}catch(M){k(M.message||"Failed to resend email")}finally{g(!1)}};v.useEffect(()=>{if(!Da.isNativePlatform())return;const M=D0.addListener("appStateChange",({isActive:K})=>{K&&(console.log(" [Auth] App resumed, resetting loading states..."),j(!1),g(!1))});return()=>{M.then(K=>K.remove())}},[]);const A=async()=>{j(!0),k("");const M=setTimeout(()=>{j(!1)},2e4);try{console.log(" [OAuth] Starting Google OAuth...");const K=Da.isNativePlatform(),{data:z,error:O}=await Y.auth.signInWithOAuth({provider:"google",options:{skipBrowserRedirect:K,redirectTo:K?"com.pitchperfect.app://oauth-callback":window.location.origin}});if(O)throw clearTimeout(M),O;K&&(z!=null&&z.url)?(console.log(" [OAuth] Opening in-app browser overlay..."),await Yl.open({url:z.url,presentationStyle:"popover",windowName:"_self"})):K||clearTimeout(M)}catch(K){clearTimeout(M),console.error(" [OAuth] OAuth error:",K),k(`OAuth with Google failed: ${K.message}`),j(!1)}};return N?i.jsxs("div",{className:"flex flex-col items-center justify-center p-8 md:p-10 bg-transparent rounded-[3.5rem] w-full max-w-md mx-auto font-sans animate-in fade-in zoom-in duration-500",children:[i.jsx("div",{className:"bg-primary/10 w-24 h-24 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-inner border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-primary",children:"mark_email_unread"})}),i.jsx("h2",{className:"text-3xl font-black text-white mb-3 text-center tracking-tighter uppercase leading-none",children:"Squad Check! "}),i.jsxs("p",{className:"text-slate-400 text-[11px] font-bold text-center mb-8 leading-relaxed uppercase tracking-widest",children:["We've sent a verification link to ",i.jsx("br",{}),i.jsx("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded-md",children:l})]}),i.jsx("div",{className:"bg-white/5 border border-white/5 rounded-[2rem] p-6 mb-8 w-full",children:i.jsx("p",{className:"text-[10px] text-slate-500 text-center font-black uppercase tracking-widest leading-relaxed",children:" PRO TIP: Check your spam folder if you don't see the email within 60 seconds."})}),i.jsx("button",{onClick:T,disabled:x,className:"w-full bg-white/5 text-white font-black text-[11px] uppercase tracking-[0.2em] py-5.5 rounded-[1.8rem] hover:bg-white/10 border border-white/10 transition-all mb-4 disabled:opacity-50 active:scale-95 shadow-xl",children:x?"Sending...":"Resend Verification"}),i.jsx("button",{onClick:()=>_(!1),className:"text-[10px] text-primary font-black uppercase tracking-widest hover:underline py-2",children:" Back to Login"})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center p-7 md:p-10 bg-transparent w-[calc(100%-2rem)] max-w-md mx-auto font-sans animate-in fade-in slide-in-from-bottom-8 duration-700",children:[i.jsxs("div",{className:"mb-10 text-center w-full",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"w-16 h-16 flex items-center justify-center",children:i.jsx("img",{src:"/assets/logo-v2.png",alt:"Arena Logo",className:"w-full h-full object-contain"})}),i.jsx("span",{className:"text-3xl font-black text-primary tracking-tighter uppercase",style:{fontFamily:"'Sakana', 'Plus Jakarta Sans', sans-serif"},children:"Larena"})]}),i.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white mb-3 tracking-tighter uppercase leading-none",children:a?"Welcome Back":"Join the Squad"}),i.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-[0.3em] opacity-60",children:a?"Enter the arena to play":"Build your legacy on the pitch"})]}),i.jsxs("div",{className:"flex bg-white/5 p-1.5 rounded-[2.2rem] mb-10 w-full border border-white/5",children:[i.jsx("button",{onClick:()=>n(!0),className:`flex-1 py-4 text-[11px] font-black uppercase tracking-[0.2em] rounded-[1.8rem] transition-all duration-300 ${a?"bg-primary shadow-xl shadow-primary/20 text-slate-950 translate-z-10":"text-slate-500 hover:text-slate-300"}`,children:"Login"}),i.jsx("button",{onClick:()=>n(!1),className:`flex-1 py-4 text-[11px] font-black uppercase tracking-[0.2em] rounded-[1.8rem] transition-all duration-300 ${a?"text-slate-500 hover:text-slate-300":"bg-primary shadow-xl shadow-primary/20 text-slate-950 translate-z-10"}`,children:"Register"})]}),E&&i.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/20 text-rose-400 p-5 rounded-3xl text-[10px] w-full mb-8 font-black uppercase tracking-widest flex items-center shadow-inner leading-relaxed",children:[i.jsx("span",{className:"material-symbols-rounded text-xl mr-4 shrink-0",children:"error"})," ",E]}),i.jsxs("form",{onSubmit:S,className:"w-full space-y-5",children:[!a&&i.jsxs("div",{className:"relative group",children:[i.jsx("span",{className:"material-symbols-rounded absolute left-5 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-primary transition-all duration-300 group-focus-within:scale-110",children:"person"}),i.jsx("input",{type:"text",placeholder:"Full Name",value:m,onChange:M=>p(M.target.value),className:"w-full bg-white/5 py-5 pl-14 pr-8 rounded-[1.8rem] text-[14px] font-bold text-white focus:outline-none focus:ring-2 focus:ring-primary/20 border border-white/5 placeholder:text-slate-600 transition-all font-sans",required:!0})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("span",{className:"material-symbols-rounded absolute left-5 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-primary transition-all duration-300 group-focus-within:scale-110",children:"mail"}),i.jsx("input",{type:"email",placeholder:"Email Address",value:l,onChange:M=>c(M.target.value),className:"w-full bg-white/5 py-5 pl-14 pr-8 rounded-[1.8rem] text-[14px] font-bold text-white focus:outline-none focus:ring-2 focus:ring-primary/20 border border-white/5 placeholder:text-slate-600 transition-all font-sans",required:!0})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("span",{className:"material-symbols-rounded absolute left-5 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-primary transition-all duration-300 group-focus-within:scale-110",children:"lock"}),i.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:M=>f(M.target.value),className:"w-full bg-white/5 py-5 pl-14 pr-8 rounded-[1.8rem] text-[14px] font-bold text-white focus:outline-none focus:ring-2 focus:ring-primary/20 border border-white/5 placeholder:text-slate-600 transition-all font-sans",required:!0})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full bg-primary text-slate-950 font-black text-[12px] uppercase tracking-[0.3em] py-5.5 rounded-[2rem] shadow-2xl shadow-primary/30 flex items-center justify-center gap-4 group transition-all duration-300 active:scale-[0.98] disabled:opacity-50 mt-10 hover:brightness-110",children:x?i.jsx("div",{className:"animate-spin h-6 w-6 border-3 border-slate-950 border-t-transparent rounded-full"}):i.jsxs(i.Fragment,{children:[a?"Enter Arena":"Join Squad",i.jsx("span",{className:"material-symbols-rounded text-2xl group-hover:translate-x-1.5 transition-transform",children:"arrow_forward"})]})})]}),i.jsxs("div",{className:"my-10 flex items-center w-full",children:[i.jsx("div",{className:"flex-1 h-[1px] bg-white/5"}),i.jsx("span",{className:"px-6 text-[9px] text-slate-600 font-black uppercase tracking-[0.4em]",children:"Social link"}),i.jsx("div",{className:"flex-1 h-[1px] bg-white/5"})]}),i.jsx("div",{className:"w-full",children:i.jsx("button",{onClick:()=>A(),disabled:y,className:"w-full flex items-center justify-center gap-5 py-5 border border-white/10 bg-white/5 rounded-[2rem] text-[11px] font-black uppercase tracking-[0.2em] text-white hover:bg-white/10 transition-all shadow-sm active:scale-95 disabled:opacity-50",children:y?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:"https://www.google.com/favicon.ico",className:"w-5 h-5 grayscale group-hover:grayscale-0 transition-all",alt:"Google"}),"Continue with Google"]})})}),i.jsxs("p",{className:"mt-10 text-[9px] text-slate-600 font-bold text-center uppercase tracking-[0.2em] leading-loose opacity-60",children:["Play responsibly. View our ",i.jsx("span",{className:"text-slate-400 underline",children:"Terms"})," and ",i.jsx("span",{className:"text-slate-400 underline",children:"Privacy"}),"."]})]})},lj="public_ViO2c8x++d222YZkE23sM671Tb0=",oj="https://ik.imagekit.io/kanze88sec",cj="private_eLSlvvmgFTZDNPd3xwA85wH9OEY=",X0=async s=>{try{const a=new FormData;a.append("file",s),a.append("fileName",`${Date.now()}_${s.name}`),a.append("publicKey",lj);const n=await fetch("https://upload.imagekit.io/api/v1/files/upload",{method:"POST",headers:{Authorization:`Basic ${btoa(cj+":")}`},body:a});if(!n.ok){const u=await n.json();throw new Error(u.message||"Failed to upload to ImageKit")}const l=await n.json();let c=l.url||l.filePath||"";return c=c.replace(/\]+$/,"").trim(),!c.startsWith("http")&&l.filePath&&(c=`${oj}/${l.filePath}`),console.log("[ImageKit] Uploaded image URL:",c),c}catch(a){throw console.error("ImageKit upload error:",a),a}};var cr;(function(s){s.Prompt="PROMPT",s.Camera="CAMERA",s.Photos="PHOTOS"})(cr||(cr={}));var hi;(function(s){s.Rear="REAR",s.Front="FRONT"})(hi||(hi={}));var Zu;(function(s){s.Uri="uri",s.Base64="base64",s.DataUrl="dataUrl"})(Zu||(Zu={}));class uj extends so{async getPhoto(a){return new Promise(async(n,l)=>{if(a.webUseInput||a.source===cr.Photos)this.fileInputExperience(a,n,l);else if(a.source===cr.Prompt){let c=document.querySelector("pwa-action-sheet");c||(c=document.createElement("pwa-action-sheet"),document.body.appendChild(c)),c.header=a.promptLabelHeader||"Photo",c.cancelable=!1,c.options=[{title:a.promptLabelPhoto||"From Photos"},{title:a.promptLabelPicture||"Take Picture"}],c.addEventListener("onSelection",async u=>{u.detail===0?this.fileInputExperience(a,n,l):this.cameraExperience(a,n,l)})}else this.cameraExperience(a,n,l)})}async pickImages(a){return new Promise(async(n,l)=>{this.multipleFileInputExperience(n,l)})}async cameraExperience(a,n,l){if(customElements.get("pwa-camera-modal")){const c=document.createElement("pwa-camera-modal");c.facingMode=a.direction===hi.Front?"user":"environment",document.body.appendChild(c);try{await c.componentOnReady(),c.addEventListener("onPhoto",async u=>{const f=u.detail;f===null?l(new dn("User cancelled photos app")):f instanceof Error?l(f):n(await this._getCameraPhoto(f,a)),c.dismiss(),document.body.removeChild(c)}),c.present()}catch{this.fileInputExperience(a,n,l)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(a,n,l)}fileInputExperience(a,n,l){let c=document.querySelector("#_capacitor-camera-input");const u=()=>{var f;(f=c.parentNode)===null||f===void 0||f.removeChild(c)};c||(c=document.createElement("input"),c.id="_capacitor-camera-input",c.type="file",c.hidden=!0,document.body.appendChild(c),c.addEventListener("change",f=>{const m=c.files[0];let p="jpeg";if(m.type==="image/png"?p="png":m.type==="image/gif"&&(p="gif"),a.resultType==="dataUrl"||a.resultType==="base64"){const x=new FileReader;x.addEventListener("load",()=>{if(a.resultType==="dataUrl")n({dataUrl:x.result,format:p});else if(a.resultType==="base64"){const g=x.result.split(",")[1];n({base64String:g,format:p})}u()}),x.readAsDataURL(m)}else n({webPath:URL.createObjectURL(m),format:p}),u()}),c.addEventListener("cancel",f=>{l(new dn("User cancelled photos app")),u()})),c.accept="image/*",c.capture=!0,a.source===cr.Photos||a.source===cr.Prompt?c.removeAttribute("capture"):a.direction===hi.Front?c.capture="user":a.direction===hi.Rear&&(c.capture="environment"),c.click()}multipleFileInputExperience(a,n){let l=document.querySelector("#_capacitor-camera-input-multiple");const c=()=>{var u;(u=l.parentNode)===null||u===void 0||u.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input-multiple",l.type="file",l.hidden=!0,l.multiple=!0,document.body.appendChild(l),l.addEventListener("change",u=>{const f=[];for(let m=0;m<l.files.length;m++){const p=l.files[m];let x="jpeg";p.type==="image/png"?x="png":p.type==="image/gif"&&(x="gif"),f.push({webPath:URL.createObjectURL(p),format:x})}a({photos:f}),c()}),l.addEventListener("cancel",u=>{n(new dn("User cancelled photos app")),c()})),l.accept="image/*",l.click()}_getCameraPhoto(a,n){return new Promise((l,c)=>{const u=new FileReader,f=a.type.split("/")[1];n.resultType==="uri"?l({webPath:URL.createObjectURL(a),format:f,saved:!1}):(u.readAsDataURL(a),u.onloadend=()=>{const m=u.result;n.resultType==="dataUrl"?l({dataUrl:m,format:f,saved:!1}):l({base64String:m.split(",")[1],format:f,saved:!1})},u.onerror=m=>{c(m)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const dj=mr("Camera",{web:()=>new uj}),Ls=(s,a)=>{if(Array.isArray(s))return s.map(n=>typeof n=="string"?n.replace(/\]+$/,"").trim():n).filter(n=>typeof n=="string"&&n.length>0);if(typeof s=="string"&&s.trim()){try{const c=JSON.parse(s);if(Array.isArray(c))return c.map(u=>typeof u=="string"?u.replace(/\]+$/,"").trim():u).filter(u=>typeof u=="string"&&u.length>0)}catch{}const n=s.replace(/[{}"']/g,"").trim();if(n.includes("http")){const c=n.split(/[\s,]+/).filter(u=>u.startsWith("http")).map(u=>u.replace(/\]+$/,"").trim());if(c.length)return c}const l=n.replace(/\]+$/,"").trim();return l?[l]:a?[a]:[]}return a?[a]:[]},wi=(s,a,n,l)=>{if(!s)return"";if(s.startsWith("http")){let c=s;if(c.includes("drive.google.com")){const u=c.match(/\/d\/(.+?)\//);u&&(c=`https://drive.google.com/uc?id=${u[1]}&export=download`)}return c.includes("unsplash.com")&&(c=c.split("&")[0].split("?")[0]+"?auto=format&fit=crop&q=60&w=400"),c}return l(a,`${n}/${s}`)},ft=(s,a,n)=>{if(s&&(s.startsWith("http")||s.startsWith("data:")))return s;const l="https://ik.imagekit.io/kanze88sec";if(s&&s.trim()){const c=s.trim().startsWith("/")?s.trim():`/${s.trim()}`;return`${l}${c}`}return a?`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=C1F45F&color=000&size=256&bold=true`:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n||"default"}`},un=(s,a)=>!s||!s[a]?null:Array.isArray(s[a])?s[a][0]:s[a],hj=({user:s,onLogout:a,onRefresh:n})=>{var X,ie,F;const l=v.useRef(null),[c,u]=v.useState(!1),[f,m]=v.useState(!1),[p,x]=v.useState(!1),[g,y]=v.useState((s==null?void 0:s.phone)||""),[j,E]=v.useState((s==null?void 0:s.name)||""),[k,N]=v.useState(!1),[_,S]=v.useState(!1),T=rt(),[A,M]=v.useState(!1),[K,z]=v.useState(!1),O=v.useRef(null),L=v.useRef(null),q=()=>{M(!0)},re=I=>{var ae;M(!1),I==="gallery"?(ae=l.current)==null||ae.click():P()},P=async()=>{if(Da.isNativePlatform())try{const I=await dj.getPhoto({quality:90,allowEditing:!0,resultType:Zu.Base64,source:cr.Camera,promptLabelHeader:"Takwira Profile Photo",promptLabelPhoto:"From Gallery",promptLabelPicture:"Take Photo"});if(I.base64String){const ae=await fetch(`data:image/${I.format};base64,${I.base64String}`).then(ne=>ne.blob()),B=new File([ae],`avatar_${Date.now()}.${I.format}`,{type:`image/${I.format}`});await Ae(B)}}catch(I){console.error("Camera error:",I)}else try{const I=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});L.current=I,z(!0),setTimeout(()=>{O.current&&(O.current.srcObject=I)},100)}catch(I){console.error("Error accessing camera:",I),alert("Could not access camera. Please check permissions.")}},Q=()=>{L.current&&(L.current.getTracks().forEach(I=>I.stop()),L.current=null),z(!1)},oe=async()=>{if(!O.current)return;const I=document.createElement("canvas");I.width=O.current.videoWidth,I.height=O.current.videoHeight;const ae=I.getContext("2d");ae==null||ae.drawImage(O.current,0,0),I.toBlob(async B=>{if(B){const ne=new File([B],`avatar_${Date.now()}.jpg`,{type:"image/jpeg"});Q(),await Ae(ne)}},"image/jpeg",.8)},ge=async I=>{var B;const ae=(B=I.target.files)==null?void 0:B[0];ae&&await Ae(ae)},Ae=async I=>{if(s!=null&&s.id){u(!0);try{if(!I.type.startsWith("image/")){alert("Please upload an image file.");return}const ae=await X0(I),{error:B}=await Y.from("user_profiles").update({avatar:ae}).eq("id",s.id);if(B)throw B;n&&await n(),alert("Profile picture updated successfully!")}catch(ae){console.error("Avatar upload failed",ae),alert(`Failed to upload avatar: ${ae.message||"Unknown error"}`)}finally{u(!1)}}},V=async()=>{if(!g.trim()){alert("Please enter a valid phone number");return}N(!0);try{const{error:I}=await Y.from("user_profiles").update({phone:g}).eq("id",s==null?void 0:s.id);if(I)throw I;m(!1),n&&await n()}catch(I){console.error("Failed to update phone",I),alert("Failed to update phone number. Please try again.")}finally{N(!1)}},se=()=>{y((s==null?void 0:s.phone)||""),m(!1)},he=async()=>{if(!j.trim()){alert("Please enter a valid name");return}S(!0);try{const{error:I}=await Y.from("user_profiles").update({name:j}).eq("id",s==null?void 0:s.id);if(I)throw I;x(!1),n&&await n()}catch(I){console.error("Failed to update name",I),alert("Failed to update name. Please try again.")}finally{S(!1)}},ce=()=>{E((s==null?void 0:s.name)||""),x(!1)};if(!s)return i.jsx("div",{className:"bg-slate-950 min-h-screen pb-24 flex items-center justify-center font-sans",children:i.jsxs("div",{className:"text-center p-8 bg-slate-900 rounded-[3.5rem] shadow-xl border border-white/5 max-w-xs w-full",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-[2.5rem] flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"account_circle"})}),i.jsx("h2",{className:"text-xl font-black text-white tracking-tighter uppercase mb-2",children:"Not Logged In"}),i.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest leading-loose",children:"Please log in to view your player profile and stats"})]})});const pe=ft(s==null?void 0:s.avatar,s==null?void 0:s.name,s==null?void 0:s.id),R=(s==null?void 0:s.phone)||"No phone verified";return i.jsxs("div",{className:"bg-slate-950 min-h-screen pb-24 font-sans",children:[i.jsxs("div",{className:"bg-slate-900/50 p-8 pt-16 rounded-b-[4rem] shadow-2xl mb-8 border-b border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),i.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[i.jsxs("div",{className:"relative group cursor-pointer mb-8",onClick:q,children:[i.jsxs("div",{className:"w-40 h-40 rounded-[3.5rem] overflow-hidden border-4 border-slate-950 shadow-2xl relative group-hover:scale-[1.05] transition-all duration-700 p-1 bg-slate-800",children:[i.jsx("img",{src:pe,alt:"Profile",className:"w-full h-full object-cover rounded-[3rem] group-hover:blur-[2px] transition-all"}),i.jsxs("div",{className:"absolute inset-0 bg-slate-900/60 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-[3rem]",children:[i.jsx("span",{className:"material-symbols-rounded text-white text-4xl mb-1",children:"photo_camera"}),i.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"Update"})]})]}),i.jsx("div",{className:"absolute -bottom-2 -right-2 bg-slate-800 text-primary p-4 rounded-[1.2rem] shadow-2xl z-10 group-hover:rotate-12 transition-all border-4 border-slate-950",children:i.jsx("span",{className:"material-symbols-rounded text-2xl font-bold",children:"bolt"})}),c&&i.jsxs("div",{className:"absolute inset-1.5 bg-slate-900/60 backdrop-blur-md rounded-[3rem] flex flex-col items-center justify-center z-20",children:[i.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full shadow-lg mb-3"}),i.jsx("span",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] animate-pulse",children:"Syncing..."})]}),i.jsx("input",{type:"file",ref:l,onChange:ge,className:"hidden",accept:"image/*"})]}),p?i.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xs px-4",children:[i.jsx("input",{type:"text",value:j,onChange:I=>E(I.target.value),className:"flex-1 h-14 px-6 bg-slate-800 border-2 border-slate-700 rounded-[1.2rem] text-xl font-black text-white focus:ring-4 focus:ring-primary/10 transition-all uppercase",autoFocus:!0}),i.jsx("button",{onClick:he,className:"w-14 h-14 bg-slate-900 text-primary rounded-[1.2rem] flex items-center justify-center shadow-xl active:scale-90 transition-all",children:_?i.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full"}):i.jsx("span",{className:"material-symbols-rounded font-bold text-2xl",children:"check"})}),i.jsx("button",{onClick:ce,className:"w-14 h-14 bg-slate-800 text-slate-400 rounded-[1.2rem] flex items-center justify-center active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded font-bold text-2xl",children:"close"})})]}):i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("h2",{className:"text-4xl font-black text-white tracking-tighter uppercase leading-none",children:[((X=s.name)==null?void 0:X.split(" ")[0])||"Pro"," ",i.jsx("span",{className:"text-primary italic",children:((ie=s.name)==null?void 0:ie.split(" ").slice(1).join(" "))||"Player"})]}),i.jsx("button",{onClick:()=>x(!0),className:"w-10 h-10 rounded-2xl bg-white/5 text-slate-500 hover:text-white transition-all flex items-center justify-center active:scale-90 border border-white/5",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"edit"})})]}),i.jsx("p",{className:"text-slate-500 text-[11px] mt-4 mb-10 font-black tracking-[0.25em] uppercase px-6 py-2 bg-slate-950/50 rounded-full border border-white/5",children:s.email}),i.jsxs("div",{className:"bg-slate-900 w-full rounded-[3rem] p-8 mb-10 relative overflow-hidden shadow-2xl border border-white/10 group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-primary/20 rounded-full -mr-40 -mt-40 blur-[100px] group-hover:scale-125 transition-transform duration-1000"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-60 h-60 bg-primary/10 rounded-full -ml-30 -mb-30 blur-[80px]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary rounded-[1.2rem] flex items-center justify-center shadow-xl shadow-primary/20 rotate-3 group-hover:rotate-6 transition-transform",children:i.jsx("span",{className:"material-symbols-rounded text-slate-900 text-3xl font-black",children:"verified_user"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-white font-black text-[13px] tracking-[0.4em] uppercase block leading-none mb-1",children:"PITCH-ID"}),i.jsx("span",{className:"text-primary font-black text-[9px] tracking-widest uppercase opacity-90 italic",children:"Redefined Elite Member"})]})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/5 font-black text-[9px] text-white/60 tracking-[0.2em] uppercase",children:["MEMBER SINCE ",new Date(s.created_at).getFullYear()]})]}),i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white/30 text-[9px] font-black uppercase tracking-[0.3em] mb-2 leading-none",children:"PLAYER IDENTIFICATION"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"text-white font-black text-2xl tracking-[0.15em] font-mono leading-none",children:s.takwira_id||"#TAK-0000"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.takwira_id),alert("Takwira ID copied!")},className:"w-8 h-8 flex items-center justify-center bg-white/10 rounded-xl text-white/40 hover:text-primary transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded text-lg",children:"content_copy"})})]})]}),i.jsx("div",{className:"bg-white p-2.5 rounded-2xl shadow-xl shadow-black/20 group-hover:scale-110 transition-transform",children:i.jsx("span",{className:"material-symbols-rounded text-slate-900 text-3xl font-bold",children:"qr_code_2"})})]})]})]}),i.jsxs("div",{className:"w-full mb-6",children:[f?i.jsxs("div",{className:"flex items-center gap-3 w-full",children:[i.jsx("input",{type:"tel",value:g,onChange:I=>y(I.target.value),placeholder:"+216 -- --- ---",className:"flex-1 h-14 px-6 bg-slate-900 border-2 border-white/10 rounded-3xl text-sm font-black text-white focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder:text-slate-600",disabled:k}),i.jsx("button",{onClick:V,disabled:k,className:"w-14 h-14 bg-primary text-slate-900 rounded-3xl flex items-center justify-center shadow-lg shadow-primary/20 active:scale-90 transition-all disabled:opacity-50",children:k?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-slate-900 border-t-transparent rounded-full"}):i.jsx("span",{className:"material-symbols-rounded font-bold text-2xl",children:"check"})}),i.jsx("button",{onClick:se,disabled:k,className:"w-14 h-14 bg-slate-800 text-slate-400 rounded-3xl flex items-center justify-center active:scale-90 transition-all disabled:opacity-50",children:i.jsx("span",{className:"material-symbols-rounded font-bold text-2xl",children:"close"})})]}):i.jsxs("div",{className:"flex items-center justify-center gap-3 bg-slate-950/50 border border-white/5 py-4 px-6 rounded-[2rem] shadow-inner group hover:border-primary/30 transition-all",children:[i.jsx("span",{className:`material-symbols-rounded text-xl ${s.phone?"text-primary":"text-slate-500"}`,children:"phone_iphone"}),i.jsx("span",{className:`text-[11px] font-black uppercase tracking-widest ${s.phone?"text-slate-300":"text-slate-600"}`,children:R}),i.jsx("button",{onClick:()=>m(!0),className:"ml-2 w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded text-lg",children:"edit"})})]}),!s.phone&&!f&&i.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-3",children:[i.jsx("span",{className:"material-symbols-rounded text-amber-500 text-xs",children:"warning"}),i.jsx("p",{className:"text-[9px] font-black text-amber-500 uppercase tracking-widest",children:"Phone required for match bookings"})]})]}),i.jsx("div",{className:"flex gap-4 w-full",children:[{label:"Played",value:s.gamesPlayed||0,color:"slate"},{label:"Victory",value:s.wins||0,color:"primary"},{label:"Defeat",value:s.losses||0,color:"rose"}].map((I,ae)=>i.jsxs("div",{className:`flex-1 p-5 rounded-[2.2rem] text-center border transition-all hover:-translate-y-1 ${I.color==="primary"?"bg-primary/5 border-primary/20 shadow-lg shadow-primary/5":"bg-slate-900/50 border-white/5 hover:bg-slate-900"}`,children:[i.jsx("p",{className:`text-[9px] font-black uppercase tracking-widest mb-1.5 ${I.color==="primary"?"text-primary":"text-slate-500"}`,children:I.label}),i.jsx("p",{className:"text-2xl font-black text-white tabular-nums",children:I.value})]},ae))})]})]}),i.jsxs("div",{className:"px-8 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between px-2",children:[i.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Activity & Career"}),i.jsx("div",{className:"h-px bg-white/5 flex-1 ml-4"})]}),i.jsxs("div",{className:"grid gap-3",children:[((F=s==null?void 0:s.role)==null?void 0:F.toLowerCase())==="owner"&&i.jsxs("button",{onClick:()=>T("/owner"),className:"group w-full flex items-center p-5 bg-primary/10 hover:bg-primary transition-all rounded-[2.5rem] border border-primary/20 shadow-lg shadow-primary/10 active:scale-[0.98]",children:[i.jsx("div",{className:"w-14 h-14 bg-slate-900 rounded-3xl flex items-center justify-center text-primary shadow-xl group-hover:rotate-12 transition-all mr-5",children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"dashboard_customize"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:"Owner Dashboard"}),i.jsx("p",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest",children:"Manage your complexes"})]}),i.jsx("span",{className:"material-symbols-rounded text-slate-400 group-hover:translate-x-1 transition-transform",children:"chevron_right"})]}),[{label:"Achievements",desc:"Badges & Stats",icon:"military_tech",color:"primary",path:"/achievements"},{label:"Academy Portal",desc:"My Training Hub",icon:"school",color:"amber",path:"/academy-student"},{label:"Match History",desc:"Booking receipts",icon:"history",color:"blue",path:"/history"},{label:"Active Squads",desc:"My sports crews",icon:"groups",color:"emerald",path:"/teams"}].map((I,ae)=>i.jsxs("button",{onClick:()=>T(I.path),className:"group w-full flex items-center p-5 bg-slate-900/50 hover:bg-slate-900 transition-all rounded-[2.5rem] border border-white/5 active:scale-[0.98]",children:[i.jsx("div",{className:"w-14 h-14 rounded-3xl flex items-center justify-center text-slate-400 group-hover:text-primary transition-all mr-5 bg-white/5 shadow-inner p-3",children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:I.icon})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:I.label}),i.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest opacity-60",children:I.desc})]}),i.jsx("span",{className:"material-symbols-rounded text-slate-600 group-hover:text-primary group-hover:translate-x-1 transition-all",children:"arrow_forward"})]},ae))]}),i.jsxs("div",{className:"flex items-center justify-between px-2 pt-4",children:[i.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Account Hub"}),i.jsx("div",{className:"h-px bg-white/5 flex-1 ml-4"})]}),i.jsxs("div",{className:"grid gap-3",children:[i.jsxs("button",{onClick:()=>T("/preferences"),className:"group w-full flex items-center p-5 bg-slate-900/50 hover:bg-slate-900 transition-all rounded-[2.5rem] border border-white/5 active:scale-[0.98]",children:[i.jsx("div",{className:"w-14 h-14 bg-white/5 rounded-3xl flex items-center justify-center text-slate-400 group-hover:text-white transition-all mr-5",children:i.jsx("span",{className:"material-symbols-rounded text-2xl",children:"settings"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:"Preferences"}),i.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Notifications & Safety"})]}),i.jsx("span",{className:"material-symbols-rounded text-slate-600",children:"chevron_right"})]}),i.jsxs("button",{onClick:a,className:"group w-full flex items-center p-5 bg-rose-500/10 hover:bg-rose-500/20 transition-all rounded-[2.5rem] border border-rose-500/20 active:scale-[0.98]",children:[i.jsx("div",{className:"w-14 h-14 bg-rose-500/10 rounded-3xl flex items-center justify-center text-rose-500 shadow-sm group-hover:rotate-12 transition-all mr-5",children:i.jsx("span",{className:"material-symbols-rounded text-2xl",children:"logout"})}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"text-sm font-black text-rose-500 uppercase tracking-tight",children:"Sign Out"}),i.jsx("p",{className:"text-[10px] text-rose-400 font-bold uppercase tracking-widest",children:"End your session"})]})]})]})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-xl z-[100] flex items-end justify-center p-6 animate-in fade-in duration-300",children:i.jsxs("div",{className:"w-full max-w-sm bg-slate-900 rounded-[3rem] border border-white/5 p-8 shadow-2xl animate-in slide-in-from-bottom duration-500",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Profile Photo"}),i.jsx("button",{onClick:()=>M(!1),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>re("camera"),className:"flex flex-col items-center justify-center p-8 bg-primary/10 rounded-[2.5rem] border border-primary/20 group hover:bg-primary transition-all active:scale-95",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-950 rounded-[1.5rem] flex items-center justify-center text-primary group-hover:text-slate-900 group-hover:bg-white/20 transition-all mb-4",children:i.jsx("span",{className:"material-symbols-rounded text-4xl",children:"photo_camera"})}),i.jsx("span",{className:"text-[10px] font-black text-white group-hover:text-slate-900 uppercase tracking-widest leading-none",children:"Take Photo"})]}),i.jsxs("button",{onClick:()=>re("gallery"),className:"flex flex-col items-center justify-center p-8 bg-slate-800/50 rounded-[2.5rem] border border-white/5 group hover:bg-white hover:border-white transition-all active:scale-95",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-950 rounded-[1.5rem] flex items-center justify-center text-slate-400 group-hover:text-slate-900 group-hover:bg-slate-200 transition-all mb-4",children:i.jsx("span",{className:"material-symbols-rounded text-4xl",children:"image"})}),i.jsx("span",{className:"text-[10px] font-black text-white group-hover:text-slate-900 uppercase tracking-widest leading-none",children:"Gallery"})]})]})]})}),K&&i.jsxs("div",{className:"fixed inset-0 bg-slate-950 z-[200] flex flex-col pt-16 animate-in fade-in duration-300",children:[i.jsxs("div",{className:"px-8 flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-black text-white tracking-tighter uppercase leading-none",children:"Camera"}),i.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-1 italic",children:"Ready for shot"})]}),i.jsx("button",{onClick:Q,className:"w-12 h-12 rounded-[1.2rem] bg-white/5 border border-white/5 flex items-center justify-center text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),i.jsxs("div",{className:"flex-1 relative mx-6 mb-8 rounded-[3.5rem] overflow-hidden border-4 border-slate-900 shadow-2xl bg-slate-900",children:[i.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover mirror",style:{transform:"scaleX(-1)"}}),i.jsx("div",{className:"absolute inset-x-8 bottom-8 flex justify-center",children:i.jsx("button",{onClick:oe,className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-2xl p-2 active:scale-90 transition-all group",children:i.jsx("div",{className:"w-full h-full border-4 border-slate-950/10 rounded-full flex items-center justify-center group-hover:scale-95 transition-all",children:i.jsx("div",{className:"w-16 h-16 bg-slate-950 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-rounded text-white text-4xl",children:"bolt"})})})})})]}),i.jsx("div",{className:"px-12 text-center pb-12",children:i.jsx("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-[0.3em] leading-relaxed",children:"Position your face in the center for the perfect player profile shot"})})]})]})},Zl=15,fj=(s,a=8,n=23,l=75,c=0,u=Zl)=>{const f=[],m=new Date(s);m.setHours(a,0,0,0);const p=new Date(s);for(p.setHours(n,0,0,0);m<p;){const x=new Date(m);if(x.setMinutes(x.getMinutes()+l),x<=p){const g=l/60,y=c*g;f.push({start:new Date(m),end:new Date(x),available:!0,price:Math.round(y)})}m.setMinutes(m.getMinutes()+l+u)}return f},Z0=(s,a,n,l=Zl)=>n.some(c=>{const u=new Date(c.start_time),f=new Date(c.end_time),m=new Date(f);return m.setMinutes(m.getMinutes()+l),s>=u&&s<m||a>u&&a<=m||s<=u&&a>=m});function W0(s){const a=(s==null?void 0:s.sport_types)??(s==null?void 0:s.sport_type);return a&&(s.sport_type_id||a.match_duration!=null)?{matchDuration:a.match_duration??s.match_duration??75,bufferMins:a.buffer_minutes??Zl}:{matchDuration:(s==null?void 0:s.match_duration)??75,bufferMins:Zl}}const mj=async(s,a)=>{try{const{data:n,error:l}=await Y.from("pitches").select("*, sport_types(*)").eq("id",s).single();if(l||!n)throw l;if(n.status!=="active")return[];const{matchDuration:c,bufferMins:u}=W0(n),f=n.opening_hour??8,m=n.closing_hour??23,p=n.price_per_hour??0,x=fj(a,f,m,c,p,u),g=new Date(a);g.setHours(0,0,0,0);const y=new Date(a);y.setHours(23,59,59,999);const{data:j,error:E}=await Y.from("bookings").select("*").eq("pitch_id",s).gte("start_time",g.toISOString()).lte("start_time",y.toISOString()).in("status",["approved","pending"]);if(E)throw E;return x.map(N=>({...N,available:!Z0(N.start,N.end,j||[],u)}))}catch(n){return console.error("Error getting available slots:",n),[]}},ex=async s=>{try{const{data:a,error:n}=await Y.from("pitches").select("*, sport_types(*)").eq("id",s.pitch).single();if(n||!a)throw n;const{bufferMins:l}=W0(a),c=new Date(s.start_time);c.setMinutes(c.getMinutes()-l);const u=new Date(s.end_time);u.setMinutes(u.getMinutes()+l);const{data:f,error:m}=await Y.from("bookings").select("*").eq("pitch_id",s.pitch).gte("start_time",c.toISOString()).lte("start_time",u.toISOString()).in("status",["approved","pending"]);if(m)throw m;if(Z0(s.start_time,s.end_time,f||[],l))throw new Error(`This time slot is no longer available (${l}-minute buffer required between matches)`);console.log(" [BOOKING] Creating booking:",{pitch_id:s.pitch,user_id:s.user,start_time:s.start_time.toISOString(),end_time:s.end_time.toISOString(),total_price:s.total_price});const{data:p,error:x}=await Y.from("bookings").insert({pitch_id:s.pitch,user_id:s.user,start_time:s.start_time.toISOString(),end_time:s.end_time.toISOString(),total_price:s.total_price,status:"pending",access_code:Math.random().toString(36).substring(2,8).toUpperCase()}).select().single();if(x)throw console.error(" [BOOKING] Error creating booking:",x),x;return console.log(" [BOOKING] Booking created successfully:",{id:p.id,pitch_id:p.pitch_id,status:p.status,start_time:p.start_time}),p}catch(a){throw console.error("Error creating booking:",a),a}},Wl=async(s,a,n=!1)=>{try{console.log(" [BOOKINGS] Fetching bookings for complex:",s,"status:",a||"all");const{data:{user:l}}=await Y.auth.getUser();console.log(" [BOOKINGS] Current user:",l==null?void 0:l.id);const{data:c,error:u}=await Y.from("pitches").select("id, complex_id").eq("complex_id",s);if(u)throw console.error(" [BOOKINGS] Error fetching pitches:",u),u;if(console.log(" [BOOKINGS] Found pitches:",(c==null?void 0:c.length)||0,c),!c||c.length===0)return console.warn(" [BOOKINGS] No pitches found for complex:",s),[];const f=c.map(k=>k.id);console.log(" [BOOKINGS] Pitch IDs:",f);const{data:m,error:p}=await Y.from("bookings").select("id, pitch_id, status, start_time, user_id").in("pitch_id",f);p?console.error(" [BOOKINGS] Error fetching all bookings:",p):console.log(" [BOOKINGS] All bookings for pitches:",(m==null?void 0:m.length)||0,m);let x=Y.from("bookings").select("*").in("pitch_id",f).order("start_time",{ascending:!1});a?a==="approved"?x=x.in("status",[a,""]):x=x.eq("status",a):n||(x=x.neq("status","cancelled"));const{data:g,error:y}=await x;if(y)throw console.error(" [BOOKINGS] Error fetching bookings:",y),y;if(console.log(" [BOOKINGS] Found bookings with simple query:",(g==null?void 0:g.length)||0),!g||g.length===0)return[];const j=await Promise.all(g.map(async k=>{const{data:N,error:_}=await Y.from("pitches").select("*, complexes(*)").eq("id",k.pitch_id).single();_&&console.error(" [BOOKINGS] Error fetching pitch:",_);const{data:S,error:T}=await Y.from("user_profiles").select("*").eq("id",k.user_id).single();return T&&console.error(" [BOOKINGS] Error fetching user profile:",T),{...k,pitches:N?[N]:[],user_profiles:S?[S]:[]}}));console.log(" [BOOKINGS] Expanded bookings:",(j==null?void 0:j.length)||0),j&&j.length>0&&console.log(" [BOOKINGS] First expanded booking:",{id:j[0].id,status:j[0].status,pitch_id:j[0].pitch_id,pitches:j[0].pitches});const E=await Promise.all((j||[]).map(async k=>{if(!k.status||k.status===""){console.log(" [BOOKINGS] Fixing empty status for booking:",k.id);const N=k.access_code?"approved":"pending";try{const{data:_,error:S}=await Y.from("bookings").update({status:N}).eq("id",k.id).select().single();if(S)throw S;return console.log(" [BOOKINGS] Fixed booking status:",k.id,"->",N),_}catch(_){return console.error(" [BOOKINGS] Error fixing booking status:",_),{...k,status:N}}}return k}));return a==="approved"&&console.log(" [BOOKINGS] Approved bookings:",E.map(k=>({id:k.id,status:k.status,start:k.start_time}))),console.log(" [BOOKINGS] First booking data:",E[0]),E}catch(l){return console.error("Error getting complex bookings:",l),[]}},tx=async(s,a)=>{try{const{data:n,error:l}=await Y.from("bookings").update({status:a}).eq("id",s).select().single();if(l)throw l;return n}catch(n){throw console.error("Error updating booking status:",n),n}},ax=async s=>{try{const{data:a,error:n}=await Y.from("bookings").update({status:"cancelled"}).eq("id",s).select().single();if(n)throw n;return a}catch(a){throw console.error("Error cancelling booking:",a),a}},pj=async s=>{try{const{data:a,error:n}=await Y.from("bookings").update({status:"cancel_request"}).eq("id",s).select().single();if(n)throw n;return a}catch(a){throw console.error("Error requesting cancellation:",a),a}},xj=async s=>{try{const a=await Wl(s,void 0,!1);console.log(" [STATS] Calculating statistics for complex:",s),console.log(" [STATS] Total active bookings:",a.length),console.log(" [STATS] Bookings by status:",{pending:a.filter(l=>l.status==="pending").length,approved:a.filter(l=>l.status==="approved").length,cancel_request:a.filter(l=>l.status==="cancel_request").length,rejected:a.filter(l=>l.status==="rejected").length});const n={total:a.length,pending:a.filter(l=>l.status==="pending").length,approved:a.filter(l=>l.status==="approved").length,cancel_request:a.filter(l=>l.status==="cancel_request").length,rejected:a.filter(l=>l.status==="rejected").length,totalRevenue:a.filter(l=>l.status==="approved").reduce((l,c)=>l+(c.total_price||0),0),thisMonth:{bookings:a.filter(l=>{const c=new Date(l.start_time),u=new Date;return c.getMonth()===u.getMonth()&&c.getFullYear()===u.getFullYear()}).length,revenue:a.filter(l=>{const c=new Date(l.start_time),u=new Date;return c.getMonth()===u.getMonth()&&c.getFullYear()===u.getFullYear()&&l.status==="approved"}).reduce((l,c)=>l+(c.total_price||0),0)}};return console.log(" [STATS] Final stats:",n),n}catch(a){return console.error("Error getting statistics:",a),null}},qs=({isOpen:s,title:a,message:n,details:l=[],confirmText:c="Confirm",cancelText:u="Cancel",onConfirm:f,onCancel:m,type:p="default"})=>{if(!s)return null;const g={default:{bg:"bg-primary",text:"text-primary-dark",border:"border-primary",icon:"verified_user"},success:{bg:"bg-emerald-500",text:"text-emerald-500",border:"border-emerald-500",icon:"check_circle"},warning:{bg:"bg-amber-500",text:"text-amber-500",border:"border-amber-500",icon:"warning"},danger:{bg:"bg-rose-500",text:"text-rose-500",border:"border-rose-500",icon:"dangerous"}}[p];return i.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-8 bg-slate-950/80 backdrop-blur-md animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-slate-900 rounded-[3.5rem] w-full max-w-md shadow-2xl animate-in zoom-in-95 duration-300 border border-white/10 overflow-hidden font-sans",children:[i.jsx("div",{className:"p-8 pb-6 border-b border-white/5 relative",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:a}),i.jsx("button",{onClick:m,className:"w-10 h-10 flex items-center justify-center bg-white/5 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),i.jsxs("div",{className:"p-8",children:[i.jsx("p",{className:"text-slate-400 text-[13px] font-bold leading-relaxed mb-6",children:n}),l.length>0&&i.jsx("div",{className:"bg-white/5 rounded-[2.5rem] p-6 space-y-4 mb-6 border border-white/5",children:l.map((y,j)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:y.label}),i.jsx("span",{className:"text-sm font-black text-white tracking-tight",children:y.value})]},j))}),i.jsxs("div",{className:`flex items-start gap-4 p-5 rounded-[2rem] ${g.text} bg-slate-950/50 border-2 border-white/5 group`,children:[i.jsx("span",{className:"material-symbols-rounded text-2xl group-hover:scale-110 transition-transform",children:g.icon}),i.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest leading-relaxed",children:[p==="default"&&"Payment will be collected in cash on arrival at the venue.",p==="success"&&"Everything looks good. No action needed.",p==="warning"&&"Please double-check the details before proceeding.",p==="danger"&&"Caution: This action is permanent and cannot be reversed."]})]})]}),i.jsxs("div",{className:`p-8 pt-4 flex gap-4 ${u?"":"justify-center"}`,children:[u&&i.jsx("button",{onClick:m,className:"flex-1 bg-white/5 text-slate-400 font-black py-5 rounded-[1.8rem] hover:bg-white/10 hover:text-white transition-all text-[11px] tracking-[0.2em] uppercase active:scale-95",children:u}),i.jsx("button",{onClick:f,className:`${u?"flex-1":"w-full max-w-[200px]"} ${g.bg} ${p==="default"?"text-slate-900":"text-white"} font-black py-5 rounded-[1.8rem] transition-all text-[11px] tracking-[0.2em] uppercase shadow-xl shadow-${p==="default"?"primary":p}/20 active:scale-95`,children:c})]})]})})},ja=({isOpen:s,title:a,message:n,buttonText:l="OK",onClose:c})=>s?i.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-8 bg-slate-950/80 backdrop-blur-md animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-slate-900 rounded-[4rem] w-full max-w-md shadow-2xl animate-in zoom-in-95 duration-500 border border-white/10 overflow-hidden font-sans text-center p-10",children:[i.jsx("div",{className:"mb-8 flex justify-center",children:i.jsx("div",{className:"w-24 h-24 bg-primary rounded-[2.5rem] flex items-center justify-center animate-bounce-short shadow-2xl shadow-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-900 font-bold",children:"celebration"})})}),i.jsx("h2",{className:"text-3xl font-black text-white mb-3 tracking-tighter uppercase",children:a}),i.jsx("p",{className:"text-slate-400 text-[13px] font-bold leading-relaxed mb-8",children:n}),i.jsx("button",{onClick:c,className:"w-full bg-slate-950 text-white font-black py-5 rounded-[1.8rem] hover:bg-black transition-all text-[11px] tracking-[0.2em] uppercase shadow-2xl shadow-black/20 active:scale-95 border border-white/5",children:l})]})}):null,bj=()=>{var k,N;const s=rt(),[a,n]=v.useState(null),[l,c]=v.useState([]),[u,f]=v.useState(null),[m,p]=v.useState(!0),[x,g]=v.useState(!1);v.useEffect(()=>{y()},[]),v.useEffect(()=>{u&&j()},[u]);const y=async()=>{try{const{data:{user:_}}=await Y.auth.getUser();if(!_){p(!1);return}const{data:S,error:T}=await Y.from("complexes").select("*").eq("owner_id",_.id);if(T)throw T;c(S||[]),S&&S.length>0&&f(S[0])}catch(_){console.error("Error fetching complexes:",_)}p(!1)},j=async()=>{if(!u)return;const _=await xj(u.id);n(_)},E=async()=>{g(!0),await j(),g(!1)};return m?i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-950 px-8 text-center",children:[i.jsxs("div",{className:"relative mb-8",children:[i.jsx("div",{className:"w-24 h-24 bg-primary/10 rounded-[2rem] border border-primary/20 flex items-center justify-center animate-pulse",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-primary font-black",children:"robot_2"})}),i.jsx("div",{className:"absolute -inset-4 border-2 border-primary/20 border-dashed rounded-full animate-spin-slow"})]}),i.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter mb-2 italic",children:"Syncing Hub"}),i.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em]",children:"Connecting to Command Center"})]}):l.length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 p-8 text-center",children:i.jsxs("div",{className:"max-w-xs",children:[i.jsx("div",{className:"bg-white/5 w-24 h-24 rounded-[3rem] flex items-center justify-center mx-auto mb-8 border border-white/5",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-700",children:"storefront"})}),i.jsx("h2",{className:"text-3xl font-black text-white mb-2 tracking-tighter uppercase",children:"No Venue Found"}),i.jsx("p",{className:"text-slate-500 text-[11px] font-bold uppercase tracking-widest leading-relaxed mb-8",children:"You don't own any active venues in our system yet."}),i.jsx("button",{onClick:()=>s("/"),className:"w-full bg-primary text-slate-900 px-8 py-5 rounded-[2rem] font-black text-[11px] uppercase tracking-[0.2em] shadow-2xl shadow-primary/20 active:scale-95 transition-all",children:"Return Home"})]})}):i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-[calc(8rem+env(safe-area-inset-bottom))] font-sans relative overflow-x-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),i.jsx("div",{className:"absolute top-[-100px] right-[-100px] w-80 h-80 bg-primary/20 rounded-full blur-[120px] pointer-events-none"}),i.jsxs("div",{className:"relative z-10 px-6 pt-[calc(5rem+env(safe-area-inset-top))] pb-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsxs("h1",{className:"text-3xl font-black text-white tracking-tighter mb-1",children:["Welcome, ",i.jsx("span",{className:"text-primary italic",children:"Pitch Owner"})]})}),i.jsx("button",{onClick:E,disabled:x,className:"w-12 h-12 flex items-center justify-center bg-white/5 rounded-full text-white hover:bg-white/10 transition-all border border-white/10",children:i.jsx("span",{className:`material-symbols-rounded text-xl ${x?"animate-spin":""}`,children:"sync"})})]})]}),l.length>1&&i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar py-2",children:l.map(_=>i.jsx("button",{onClick:()=>f(_),className:`flex-shrink-0 px-5 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${(u==null?void 0:u.id)===_.id?"bg-primary text-slate-950 shadow-lg shadow-primary/20":"bg-white/5 text-slate-400 hover:bg-white/10"}`,children:_.Name||_.name},_.id))})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),i.jsx("h2",{className:"text-[11px] font-black text-white uppercase tracking-widest",children:"STATISTICS"})]}),i.jsxs("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:[i.jsxs("div",{className:"flex-shrink-0 w-[280px] bg-slate-900/60 rounded-3xl p-6 border border-white/5",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-primary",children:"account_balance_wallet"})}),i.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"+12%"})]}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Total Revenue"}),i.jsxs("p",{className:"text-2xl font-black text-white tracking-tight mb-3",children:[a!=null&&a.totalRevenue?`${a.totalRevenue.toLocaleString()}`:"0"," ",i.jsx("span",{className:"text-xs text-slate-500",children:"TND"})]}),i.jsx("div",{className:"h-1 bg-primary/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"75%"}})})]}),i.jsxs("div",{className:"flex-shrink-0 w-[280px] bg-slate-900/60 rounded-3xl p-6 border border-white/5",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-primary",children:"trending_up"})}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"This Month"})]}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Monthly Revenue"}),i.jsxs("p",{className:"text-2xl font-black text-white tracking-tight mb-3",children:[(k=a==null?void 0:a.thisMonth)!=null&&k.revenue?`${a.thisMonth.revenue.toLocaleString()}`:"0"," ",i.jsx("span",{className:"text-xs text-slate-500",children:"TND"})]}),i.jsx("div",{className:"h-1 bg-primary/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"60%"}})})]}),i.jsxs("div",{className:"flex-shrink-0 w-[280px] bg-slate-900/60 rounded-3xl p-6 border border-white/5",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-primary",children:"calendar_month"})}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Today"})]}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Bookings Week"}),i.jsx("p",{className:"text-2xl font-black text-white tracking-tight mb-3",children:((N=a==null?void 0:a.thisMonth)==null?void 0:N.bookings)||0}),i.jsx("div",{className:"h-1 bg-primary/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"45%"}})})]}),i.jsxs("div",{className:"flex-shrink-0 w-[280px] bg-slate-900/60 rounded-3xl p-6 border border-white/5",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsx("div",{className:"w-12 h-12 bg-amber-500/10 rounded-2xl flex items-center justify-center border border-amber-500/20",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-amber-400",children:"notification_important"})})}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Pending Requests"}),i.jsx("p",{className:"text-2xl font-black text-white tracking-tight mb-3",children:(a==null?void 0:a.pending)||0}),i.jsx("div",{className:"h-1 bg-amber-500/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-amber-400 rounded-full",style:{width:a!=null&&a.pending?"30%":"0%"}})})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),i.jsx("h2",{className:"text-[11px] font-black text-white uppercase tracking-widest",children:"RECENT BOOKINGS"})]}),i.jsx("button",{onClick:()=>s(`/owner/bookings/${u==null?void 0:u.id}`),className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest hover:text-primary transition-colors",children:"View All"})]}),i.jsx("div",{className:"space-y-3",children:i.jsx(gj,{complexId:u==null?void 0:u.id,onUpdate:j})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),i.jsx("h2",{className:"text-[11px] font-black text-white uppercase tracking-widest",children:"VENUE SETTINGS"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>s(`/owner/bookings/${u==null?void 0:u.id}`),className:"bg-slate-900/60 rounded-3xl p-6 border border-white/5 text-left group hover:bg-slate-900 transition-all",children:[i.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20 mb-4 group-hover:scale-110 transition-transform",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-primary",children:"history"})}),i.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-tight",children:"Timeline"}),i.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Full Ledger"})]}),i.jsxs("button",{onClick:()=>s(`/owner/pitches/${u==null?void 0:u.id}`),className:"bg-slate-900/60 rounded-3xl p-6 border border-white/5 text-left group hover:bg-slate-900 transition-all",children:[i.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center border border-primary/20 mb-4 group-hover:scale-110 transition-transform",children:i.jsx("span",{className:"material-symbols-rounded text-2xl text-primary",children:"tune"})}),i.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-tight",children:"Settings"}),i.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Configuration"})]})]})]})]})]})},gj=({complexId:s,onUpdate:a})=>{const[n,l]=v.useState([]),[c,u]=v.useState(!0),[f,m]=v.useState(null),[p,x]=v.useState(!1),[g,y]=v.useState(!1),[j,E]=v.useState("");v.useEffect(()=>{s&&k()},[s]);const k=async()=>{u(!0);const S=await Wl(s,"pending"),T=await Wl(s,"cancel_request"),A=[...S,...T].slice(0,5);l(A),u(!1),a()},N=async S=>{try{await tx(S,"approved"),k()}catch{E("Failed to approve booking."),y(!0)}},_=async S=>{try{await ax(S),k()}catch{E("Failed to approve cancellation."),y(!0)}};return c?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full shadow-inner opacity-50"})}):n.length===0?i.jsxs("div",{className:"bg-slate-900/40 p-12 rounded-[3.5rem] text-center border border-white/5 flex flex-col items-center",children:[i.jsx("div",{className:"w-20 h-20 bg-primary/5 rounded-[2rem] flex items-center justify-center mb-6 border border-primary/10",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary/30",children:"verified_user"})}),i.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-[0.2em] mb-2",children:"Operational Excellence"}),i.jsx("p",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest",children:"Your queue is currently empty"})]}):i.jsxs("div",{className:"space-y-3",children:[n.map(S=>{const T=Array.isArray(S.user_profiles)?S.user_profiles[0]:S.user_profiles,A=Array.isArray(S.pitches)?S.pitches[0]:S.pitches,M=new Date(S.start_time),K=new Date(S.end_time),z=()=>S.status==="approved"?"bg-primary text-slate-950":S.status==="pending"?"bg-orange-500 text-white":S.status==="cancel_request"||S.status==="rejected"?"bg-red-500 text-white":"bg-slate-500 text-white",O=()=>S.status==="approved"?"CONFIRMED":S.status==="pending"?"PENDING":S.status==="cancel_request"?"CANC":S.status==="rejected"?"CANCELLED":S.status.toUpperCase(),L=()=>{const q=((A==null?void 0:A.name)||"").toLowerCase();return q.includes("football")||q.includes("soccer")?"sports_soccer":q.includes("padel")||q.includes("tennis")?"sports_tennis":q.includes("basketball")?"sports_basketball":"sports_soccer"};return i.jsx("div",{className:"bg-slate-900/60 rounded-3xl p-5 border border-white/5 group hover:bg-slate-900 transition-all",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary",children:L()})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-black text-[15px] text-white uppercase tracking-tight mb-1 truncate",children:(A==null?void 0:A.name)||"Main Pitch"}),i.jsxs("p",{className:"text-[12px] text-slate-300 font-bold mb-1",children:[M.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})," - ",K.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-slate-400",children:[i.jsx("span",{className:"material-symbols-rounded text-sm",children:"person"}),i.jsx("span",{className:"w-1 h-1 bg-slate-500 rounded-full"}),i.jsx("span",{children:(T==null?void 0:T.name)||"Player"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${z()}`,children:O()}),S.status==="pending"||S.status==="cancel_request"?i.jsx("button",{onClick:()=>{S.status==="cancel_request"?_(S.id):N(S.id)},className:"w-8 h-8 bg-white/5 rounded-full flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-rounded text-lg text-slate-400",children:"more_vert"})}):i.jsx("div",{className:"w-8 h-8"})]})]})},S.id)}),i.jsx(ja,{isOpen:g,title:"Drift Error",message:j,buttonText:"Return",onClose:()=>y(!1)})]})},yj=()=>{const s=rt();return i.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:()=>s("/profile"),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"arrow_back_ios_new"})}),i.jsx("h1",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:"Achievements"})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-[3rem] p-8 text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-6xl text-slate-500 mb-6",children:"military_tech"}),i.jsx("h2",{className:"text-xl font-black text-white mb-4 uppercase tracking-widest",children:"Coming Soon"}),i.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-[0.2em]",children:"Achievements system under development"}),i.jsx("p",{className:"text-slate-600 text-xs mt-2",children:"Earn badges and stats by playing matches"})]})]})},vj=()=>{const s=rt();return i.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:()=>s("/profile"),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"arrow_back_ios_new"})}),i.jsx("h1",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:"Match History"})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-[3rem] p-8 text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-6xl text-slate-500 mb-6",children:"history"}),i.jsx("h2",{className:"text-xl font-black text-white mb-4 uppercase tracking-widest",children:"Coming Soon"}),i.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-[0.2em]",children:"Match history system under development"}),i.jsx("p",{className:"text-slate-600 text-xs mt-2",children:"View all your past bookings and match receipts"})]})]})},wj=()=>{const s=rt();return i.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:()=>s("/profile"),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"arrow_back_ios_new"})}),i.jsx("h1",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:"Active Squads"})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-[3rem] p-8 text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-6xl text-slate-500 mb-6",children:"groups"}),i.jsx("h2",{className:"text-xl font-black text-white mb-4 uppercase tracking-widest",children:"Coming Soon"}),i.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-[0.2em]",children:"Teams and squads system under development"}),i.jsx("p",{className:"text-slate-600 text-xs mt-2",children:"Manage your sports crews and team information"})]})]})},jj=()=>{const s=rt();return i.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("button",{onClick:()=>s("/profile"),className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"arrow_back_ios_new"})}),i.jsx("h1",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:"Preferences"})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-[3rem] p-8 text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-6xl text-slate-500 mb-6",children:"settings"}),i.jsx("h2",{className:"text-xl font-black text-white mb-4 uppercase tracking-widest",children:"Coming Soon"}),i.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-[0.2em]",children:"Preferences system under development"}),i.jsx("p",{className:"text-slate-600 text-xs mt-2",children:"Manage your notifications and safety settings"})]})]})},_j=async s=>{try{const{data:a,error:n}=await Y.from("pitches").select("*, complexes(*), sport_types(*)").eq("id",s).single();if(n)throw n;return a}catch(a){return console.error("Error fetching pitch:",a),null}},eo=async s=>{try{console.log("[DATA SERVICE] Fetching complexes from API...",s?`(filtered by sport: ${s})`:"");let a=[];if(!s){const{data:n,error:l}=await Y.from("complexes").select("*").order("created_at",{ascending:!1});if(l)throw l;a=n||[]}return console.log("[DATA SERVICE] Successfully fetched complexes:",a.length),a}catch(a){return console.error("[DATA SERVICE] Error fetching complexes:",a),[]}},sx=async s=>{try{const{data:a,error:n}=await Y.from("complexes").select("*").eq("id",s).single();if(n)throw n;return a}catch(a){return console.error("Error fetching complex:",a),null}},Wu=async s=>{try{const{data:a,error:n}=await Y.from("pitches").select("*, complexes(*), sport_types(*)").eq("complex_id",s);if(n)throw n;return a||[]}catch(a){return console.error("Error fetching pitches for complex:",a),[]}},Nj=async(s,a=!0)=>{try{console.log(" [BOOKINGS] ===== FETCH START ====="),console.log(" [BOOKINGS] User ID:",s),console.log(" [BOOKINGS] Include completed:",a);let n=Y.from("bookings").select("*, pitches(*, complexes(*))").eq("user_id",s).order("start_time",{ascending:!1});a||(n=n.neq("status","cancelled")),console.log(" [BOOKINGS] Executing query...");const{data:l,error:c}=await n;if(c)throw console.error(" [BOOKINGS] Query error:",c),c;return console.log(" [BOOKINGS] Query successful!"),console.log(" [BOOKINGS] Total bookings fetched:",(l==null?void 0:l.length)||0),l&&l.length>0?console.log(" [BOOKINGS] First booking sample:",{id:l[0].id,status:l[0].status,start_time:l[0].start_time,end_time:l[0].end_time,pitch_id:l[0].pitch_id,has_pitch:!!l[0].pitches,has_complex:!!(l[0].pitches&&l[0].pitches.complexes)}):console.warn(" [BOOKINGS] No bookings found for user:",s),console.log(" [BOOKINGS] ===== FETCH END ====="),l||[]}catch(n){return console.error(" [BOOKINGS] Fatal error:",n),[]}},fi=(s,a,n,l)=>{const u=(n-s)*Math.PI/180,f=(l-a)*Math.PI/180,m=Math.sin(u/2)*Math.sin(u/2)+Math.cos(s*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)))},fd=async()=>{const s={lat:36.8065,lng:10.1815};if(navigator.geolocation)try{console.log(" [Location] Trying browser geolocation...");const a=await new Promise((l,c)=>{navigator.geolocation.getCurrentPosition(l,c,{enableHighAccuracy:!1,timeout:5e3,maximumAge:6e5})}),n={lat:a.coords.latitude,lng:a.coords.longitude};return console.log(" [Location] Browser geolocation success:",n),n}catch(a){console.warn(" [Location] Browser geolocation failed:",a)}try{console.log(" [Location] Trying ipapi.co...");const n=await(await fetch("https://ipapi.co/json/",{signal:AbortSignal.timeout(3e3)})).json();if(n.latitude&&n.longitude){const l={lat:n.latitude,lng:n.longitude};return console.log(" [Location] ipapi.co success:",l),l}}catch(a){console.warn(" [Location] ipapi.co failed:",a)}try{console.log(" [Location] Trying ipwho.is...");const n=await(await fetch("https://ipwho.is/",{signal:AbortSignal.timeout(3e3)})).json();if(n.latitude&&n.longitude){const l={lat:n.latitude,lng:n.longitude};return console.log(" [Location] ipwho.is success:",l),l}}catch(a){console.warn(" [Location] ipwho.is failed:",a)}return console.log(" [Location] All methods failed, using Tunis default"),s},Sj=async s=>{try{console.log(`[DATA SERVICE] Fetching reviews for complex: ${s}`);const{data:a,error:n}=await Y.from("reviews").select(`
                id,
                rating,
                comment,
                created_at,
                complex_id,
                user_id,
                user_profiles:user_id (
                    name,
                    avatar,
                    phone
                )
            `).eq("complex_id",s).order("created_at",{ascending:!1});if(n)throw console.error("[DATA SERVICE] Supabase error fetching reviews:",n),n;return console.log(`[DATA SERVICE] Successfully fetched ${(a==null?void 0:a.length)||0} reviews`),a||[]}catch(a){return console.error("[DATA SERVICE] Error in getReviews:",a),[]}},kj=async s=>{try{const{data:a,error:n}=await Y.from("reviews").insert([s]).select();if(n)throw n;return{success:!0,data:a[0]}}catch(a){return console.error("Error submitting review:",a),{success:!1,error:a.message}}},Ej=async s=>{try{const a=s.trim();if(a.length<2)return[];let n=Y.from("user_profiles").select("id, name, avatar, takwira_id, phone");a.startsWith("#TAK-")?n=n.eq("takwira_id",a.toUpperCase()):/^\d{4}$/.test(a)?n=n.eq("takwira_id",`#TAK-${a}`):/^\d+$/.test(a)?n=n.ilike("phone",`%${a}%`):n=n.ilike("name",`%${a}%`);const{data:l,error:c}=await n.limit(20);if(c)throw c;return l||[]}catch(a){return console.error("Error searching users:",a),[]}},dr=async s=>{try{const{data:a,error:n}=await Y.from("friendships").select(`
                *,
                user:user_id (id, name, avatar, takwira_id, phone),
                friend:friend_id (id, name, avatar, takwira_id, phone)
            `).or(`user_id.eq.${s},friend_id.eq.${s}`);if(n)throw n;return a||[]}catch(a){return console.error("Error fetching friendships:",a),[]}},Tj=async(s,a)=>{try{const{data:n,error:l}=await Y.from("friendships").insert([{user_id:s,friend_id:a,status:"pending"}]).select().single();if(l)throw l;return{success:!0,data:n}}catch(n){return console.error("Error sending friend request:",n),{success:!1,error:n.message}}},Aj=async(s,a)=>{try{const{data:n,error:l}=await Y.from("friendships").update({status:a,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(l)throw l;return{success:!0,data:n}}catch(n){return console.error("Error updating friendship:",n),{success:!1,error:n.message}}},Cj=async s=>{try{const{data:a,error:n}=await Y.from("messages").select("*").eq("friendship_id",s).order("created_at",{ascending:!0});if(n)throw n;return a||[]}catch(a){return console.error("Error fetching messages:",a),[]}},Oj=async(s,a,n)=>{try{const{data:l,error:c}=await Y.from("messages").insert([{friendship_id:s,sender_id:a,content:n}]).select().single();if(c)throw c;return{success:!0,data:l}}catch(l){return console.error("Error sending message:",l),{success:!1,error:l.message}}},Rj=async(s,a)=>{try{const{data:n,error:l}=await Y.from("lobbies").select(`
                *,
                host:host_id (id, name, avatar, phone),
                complex:complex_id (id, name, address, images, location_lat, location_lng),
                members:lobby_members (user_id, status)
            `).order("created_at",{ascending:!1});if(l)throw l;let c=n||[],u=[];if(s&&(u=(await dr(s)).filter(m=>m.status==="accepted").map(m=>m.user_id===s?m.friend_id:m.user_id),c=c.filter(m=>{var g;const p=m.host_id===s,x=(g=m.members)==null?void 0:g.some(y=>y.user_id===s);if(m.type==="private"){const y=u.includes(m.host_id);return p||x||y}return!0})),a){const f=c.filter(p=>{var x,g;return p.type==="public"&&((x=p.complex)==null?void 0:x.location_lat)&&((g=p.complex)==null?void 0:g.location_lng)}),m=c.filter(p=>p.type==="private");f.forEach(p=>{var x,g;(x=p.complex)!=null&&x.location_lat&&((g=p.complex)!=null&&g.location_lng)?p._distance=fi(a.lat,a.lng,p.complex.location_lat,p.complex.location_lng):p._distance=1/0}),f.sort((p,x)=>p._distance!==x._distance?p._distance-x._distance:new Date(x.created_at).getTime()-new Date(p.created_at).getTime()),c=[...f,...m.sort((p,x)=>new Date(x.created_at).getTime()-new Date(p.created_at).getTime())]}return c}catch(n){return console.error("Error fetching lobbies:",n),[]}},Dj=async s=>{try{const{data:a,error:n}=await Y.from("lobbies").insert([{name:s.name,host_id:s.host_id,complex_id:s.complex_id,max_players:s.max_players,type:s.type,preferred_date:s.preferred_date,preferred_time:s.preferred_time,status:s.status||"open"}]).select().single();if(n)throw n;return await Y.from("lobby_members").insert([{lobby_id:a.id,user_id:s.host_id,status:"joined"}]),{success:!0,data:a}}catch(a){return console.error("Error creating lobby:",a),{success:!1,error:a.message}}},Mj=async(s,a)=>{try{console.log("[deleteLobby] Starting deletion for lobby:",s,"by user:",a);const{data:n,error:l}=await Y.from("lobbies").select("host_id").eq("id",s).single();if(l)throw console.error("[deleteLobby] Error fetching lobby:",l),l;if(!n)return console.error("[deleteLobby] Lobby not found:",s),{success:!1,error:"Lobby not found"};if(console.log("[deleteLobby] Lobby host_id:",n.host_id,"User id:",a),n.host_id!==a)return console.error("[deleteLobby] Permission denied - user is not host"),{success:!1,error:"Only the lobby host can delete the lobby"};console.log("[deleteLobby] Deleting lobby messages...");const{error:c}=await Y.from("lobby_messages").delete().eq("lobby_id",s);c?console.error("[deleteLobby] Error deleting messages:",c):console.log("[deleteLobby] Messages deleted successfully"),console.log("[deleteLobby] Deleting lobby members...");const{error:u}=await Y.from("lobby_members").delete().eq("lobby_id",s);u?console.error("[deleteLobby] Error deleting members:",u):console.log("[deleteLobby] Members deleted successfully"),console.log("[deleteLobby] Deleting lobby...");const{data:f,error:m,count:p}=await Y.from("lobbies").delete().eq("id",s).select();if(m)throw console.error("[deleteLobby] Error deleting lobby:",m),console.error("[deleteLobby] Error details:",JSON.stringify(m,null,2)),m;if(console.log("[deleteLobby] Delete response - data:",f,"count:",p),!f||f.length===0)return console.error("[deleteLobby] WARNING: Delete returned empty array - no rows deleted"),{success:!1,error:"Delete operation was blocked. You may not have permission to delete this lobby. Please check your database policies."};const{data:x,error:g}=await Y.from("lobbies").select("id").eq("id",s).maybeSingle();return x?(console.error("[deleteLobby] WARNING: Lobby still exists after deletion!"),console.error("[deleteLobby] Remaining lobby data:",x),{success:!1,error:"Lobby deletion failed - lobby still exists. This may be due to Row Level Security policies."}):(console.log("[deleteLobby] Lobby successfully deleted and verified"),{success:!0})}catch(n){return console.error("[deleteLobby] Error deleting lobby:",n),{success:!1,error:n.message||"Failed to delete lobby"}}},Lj=async(s,a,n)=>{try{const{data:l,error:c}=await Y.from("lobbies").select("type, host_id").eq("id",s).single();if(c)throw c;const u=l.type==="public"?"requested":"invited",{data:f,error:m}=await Y.from("lobby_members").insert([{lobby_id:s,user_id:a,status:u,request_message:n||null}]).select().single();if(m)throw m;return{success:!0,data:f,message:u==="requested"?"Access request sent! The host will review your request.":"Successfully joined the lobby!"}}catch(l){return console.error("Error joining lobby:",l),{success:!1,error:l.message}}},rx=async(s,a,n)=>{try{const{data:l}=await Y.from("lobby_members").select("lobby_id, user_id, status").eq("lobby_id",s).eq("user_id",a).maybeSingle();if(l){if(l.status==="invited"||l.status==="requested")return{success:!0,data:l,message:"User already has a pending invitation"};if(l.status==="joined")return{success:!0,data:l,message:"User is already a member"}}const{data:c,error:u}=await Y.from("lobby_members").insert([{lobby_id:s,user_id:a,status:"invited",invited_by:n}]).select().single();if(u)throw u;return{success:!0,data:c}}catch(l){return console.error("Error inviting to lobby:",l),{success:!1,error:l.message}}},qj=async(s,a,n)=>{try{const{data:l,error:c}=await Y.from("lobbies").select("host_id").eq("id",s).single();if(c)throw c;if(l.host_id!==n)return{success:!1,error:"Only the lobby host can kick members."};if(l.host_id===a)return{success:!1,error:"Cannot kick the lobby host."};const{error:u}=await Y.from("lobby_members").delete().eq("lobby_id",s).eq("user_id",a);if(u)throw u;return{success:!0}}catch(l){return console.error("Error kicking lobby member:",l),{success:!1,error:l.message}}},zj=async(s,a)=>{try{const{data:n,error:l}=await Y.from("lobbies").select("host_id").eq("id",s).single();if(l)throw l;if(n.host_id===a)return{success:!1,error:"Lobby hosts cannot leave. Please delete the lobby instead."};const{error:c}=await Y.from("lobby_members").delete().eq("lobby_id",s).eq("user_id",a);if(c)throw c;return{success:!0}}catch(n){return console.error("Error leaving lobby:",n),{success:!1,error:n.message}}},ed=async(s,a,n,l)=>{try{const{data:c,error:u}=await Y.from("lobbies").select("host_id").eq("id",s).single();if(u)throw u;if(!(c.host_id===l)&&!(a===l))return{success:!1,error:"You do not have permission to respond to this request"};const{data:p,error:x}=await Y.from("lobby_members").select("*").eq("lobby_id",s).eq("user_id",a).maybeSingle();if(x)throw x;if(!p)return{success:!1,error:"Member record not found"};if(n==="accepted"){const{data:g,error:y}=await Y.from("lobby_members").update({status:"joined"}).eq("lobby_id",s).eq("user_id",a).select("*");if(y)throw console.error("Error updating lobby member status:",y),y;return!g||g.length===0?{success:!1,error:"Failed to update member status. The record may not exist or you may not have permission."}:{success:!0,data:g[0]}}else{const{error:g}=await Y.from("lobby_members").delete().eq("lobby_id",s).eq("user_id",a);if(g){console.error("Error deleting lobby member:",g);const{data:y,error:j}=await Y.from("lobby_members").update({status:"declined"}).eq("lobby_id",s).eq("user_id",a).select("*");if(j)throw j;return{success:!0,data:(y==null?void 0:y[0])||p}}return{success:!0,data:p}}}catch(c){return console.error("Error responding to lobby request:",c),{success:!1,error:c.message}}},t0=async s=>{try{const{data:a,error:n}=await Y.from("lobby_members").select(`
                *,
                user:user_id (id, name, avatar, takwira_id, phone)
            `).eq("lobby_id",s).order("created_at",{ascending:!0});if(n)throw n;return a||[]}catch(a){return console.error("Error fetching lobby members:",a),[]}},Uj=async s=>{try{const{data:a,error:n}=await Y.from("teams").select(`
                *,
                admin:admin_id (id, name, avatar, phone),
                members:team_members (user_id)
            `).order("created_at",{ascending:!1});if(n)throw n;let l=a||[];if(s){const u=(await dr(s)).filter(f=>f.status==="accepted").map(f=>f.user_id===s?f.friend_id:f.user_id);l=l.filter(f=>{var g;const m=f.admin_id===s,p=(g=f.members)==null?void 0:g.some(y=>y.user_id===s),x=u.includes(f.admin_id);return m||p||x})}return l}catch(a){return console.error("Error fetching teams:",a),[]}},Bj=async s=>{try{const{data:a,error:n}=await Y.from("teams").insert([s]).select().single();if(n)throw n;return await Y.from("team_members").insert([{team_id:a.id,user_id:s.admin_id,role:"admin"}]),{success:!0,data:a}}catch(a){return console.error("Error creating team:",a),{success:!1,error:a.message}}},nx=async(s,a,n="member")=>{try{const{data:l,error:c}=await Y.from("team_members").insert([{team_id:s,user_id:a,role:n}]).select().single();if(c)throw c;return{success:!0,data:l}}catch(l){return console.error("Error adding team member:",l),{success:!1,error:l.message}}},a0=async s=>{try{const{data:a,error:n}=await Y.from("team_members").select(`
                *,
                user:user_id (id, name, avatar, takwira_id, phone)
            `).eq("team_id",s);if(n)throw n;return a||[]}catch(a){return console.error("Error fetching team members:",a),[]}},s0=async s=>{try{const{data:a,error:n}=await Y.from("lobby_messages").select(`
                *,
                sender:sender_id (id, name, avatar, phone)
            `).eq("lobby_id",s).order("created_at",{ascending:!0});if(n)throw n;return a||[]}catch(a){return console.error("Error fetching lobby messages:",a),[]}},$j=async(s,a,n)=>{try{const{data:l,error:c}=await Y.from("lobbies").select("host_id").eq("id",s).single();if(c)throw c;if(!(l.host_id===a)){const{data:p,error:x}=await Y.from("lobby_members").select("status").eq("lobby_id",s).eq("user_id",a).eq("status","joined").maybeSingle();if(x)throw x;if(!p)return{success:!1,error:"You must be an approved member to send messages in this lobby."}}const{data:f,error:m}=await Y.from("lobby_messages").insert([{lobby_id:s,sender_id:a,content:n}]).select().single();if(m)throw m;return{success:!0,data:f}}catch(l){return console.error("Error sending lobby message:",l),{success:!1,error:l.message}}},Pj=async s=>{try{const{data:a,error:n}=await Y.from("team_messages").select(`
                *,
                sender:sender_id (id, name, avatar, phone)
            `).eq("team_id",s).order("created_at",{ascending:!0});if(n)throw n;return a||[]}catch(a){return console.error("Error fetching team messages:",a),[]}},Hj=async(s,a,n)=>{try{const{data:l,error:c}=await Y.from("team_messages").insert([{team_id:s,sender_id:a,content:n}]).select().single();if(c)throw c;return{success:!0,data:l}}catch(l){return console.error("Error sending team message:",l),{success:!1,error:l.message}}},Gj=({currentUser:s})=>{const a=rt(),[n,l]=v.useState("lobbies"),[c,u]=v.useState([]),[f,m]=v.useState([]),[p,x]=v.useState(!0),[g,y]=v.useState(null),[j,E]=v.useState(!1),[k,N]=v.useState(!1),[_,S]=v.useState(""),[T,A]=v.useState(10),[M,K]=v.useState("public"),[z,O]=v.useState(""),[L,q]=v.useState(""),[re,P]=v.useState("18:00"),[Q,oe]=v.useState([]),[ge,Ae]=v.useState({isOpen:!1,lobbyId:null}),[V,se]=v.useState("");v.useEffect(()=>{he(),ce()},[]),v.useEffect(()=>{(g||!s)&&pe()},[g,s]);const he=async()=>{try{const ee=await fd();y(ee)}catch(ee){console.error("Error fetching user location:",ee)}},ce=async()=>{try{const ee=await eo();oe(ee)}catch(ee){console.error("Error fetching complexes:",ee)}},pe=async()=>{x(!0);const[ee,Re]=await Promise.all([Rj(s==null?void 0:s.id,g||void 0),Uj(s==null?void 0:s.id)]);u(ee),m(Re),x(!1)},R=async ee=>{if(ee.preventDefault(),!_.trim()||!s||!z||!L||!re){Rt({isOpen:!0,message:"Please fill in all required fields"});return}const{success:Re,error:Qe}=await Dj({name:_.trim(),host_id:s.id,complex_id:z,max_players:T,type:M,preferred_date:L,preferred_time:re,status:"open"});Re?(E(!1),S(""),O(""),q(""),P("18:00"),K("public"),Ot({isOpen:!0,message:"Lobby created successfully!"}),pe()):Rt({isOpen:!0,message:Qe||"Failed to create lobby"})},X=async ee=>{if(ee.preventDefault(),!_.trim()||!s)return;const{success:Re,error:Qe}=await Bj({name:_.trim(),admin_id:s.id,description:""});Re?(N(!1),S(""),Ot({isOpen:!0,message:"Team created successfully!"}),pe()):Rt({isOpen:!0,message:Qe||"Failed to create team"})},ie=async ee=>{if(!s)return;const Re=c.find(Qe=>Qe.id===ee);if((Re==null?void 0:Re.type)==="public"){Ae({isOpen:!0,lobbyId:ee});return}Rt({isOpen:!0,message:"This is a private lobby. You need to be invited."})},F=async()=>{if(!ge.lobbyId||!s)return;const{success:ee,error:Re,message:Qe}=await Lj(ge.lobbyId,s.id,V.trim()||void 0);ee?(Ae({isOpen:!1,lobbyId:null}),se(""),Ot({isOpen:!0,message:Qe||"Access request sent!"}),pe()):Rt({isOpen:!0,message:Re||"Failed to send access request"})},I=async(ee,Re)=>{Re.stopPropagation(),s&&(et(ee),Ge(!0))},ae=async()=>{if(!ha||!s)return;const{success:ee,error:Re}=await Mj(ha,s.id);Ge(!1),et(null),ee?(Ot({isOpen:!0,message:"Lobby deleted successfully"}),pe()):Rt({isOpen:!0,message:Re||"Failed to delete lobby"})},[B,ne]=v.useState(!1),[le,ue]=v.useState("lobby"),[me,Be]=v.useState(null),[We,lt]=v.useState([]),[Zt,Ge]=v.useState(!1),[ha,et]=v.useState(null),[Wt,Ot]=v.useState({isOpen:!1,message:""}),[_a,Rt]=v.useState({isOpen:!1,message:""}),Na=async(ee,Re)=>{if(!s)return;Be(ee),ue(Re);const fa=(await dr(s.id)).filter(yt=>yt.status==="accepted").map(yt=>yt.user_id===s.id?yt.friend:yt.user).filter(yt=>{var Sa;return!((Sa=ee.members)!=null&&Sa.some(qa=>qa.user_id===yt.id))});lt(fa),ne(!0)},jt=async ee=>{if(!me||!s)return;let Re,Qe;if(le==="lobby"){const mt=await rx(me.id,ee,s.id);Re=mt.success,Qe=mt.error}else{const mt=await nx(me.id,ee);Re=mt.success,Qe=mt.error}Re?(lt(mt=>mt.filter(fa=>fa.id!==ee)),Ot({isOpen:!0,message:"Friend invited successfully!"}),pe()):Rt({isOpen:!0,message:Qe||"Failed to invite friend"})};return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-[calc(8rem+env(safe-area-inset-bottom))] font-sans",children:[i.jsxs("header",{className:"px-8 pt-[calc(3.5rem+env(safe-area-inset-top))] pb-8 sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Collaboration"}),i.jsx("h1",{className:"text-3xl font-black tracking-tighter text-white",children:"Spaces"})]}),i.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center border border-white/5 shadow-sm text-primary",children:i.jsx("span",{className:"material-symbols-rounded",children:"groups"})})]}),i.jsx("div",{className:"flex gap-2 p-1.5 bg-slate-900/50 rounded-[2rem] border border-white/5 shadow-inner",children:[{key:"lobbies",label:"Lobbies",icon:"stadium"},{key:"teams",label:"Teams",icon:"shield_person"}].map(({key:ee,label:Re,icon:Qe})=>i.jsxs("button",{onClick:()=>l(ee),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-[1.5rem] transition-all duration-500 ${n===ee?"bg-primary text-slate-900 shadow-lg shadow-primary/20":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:[i.jsx("span",{className:"material-symbols-rounded text-lg",children:Qe}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:Re})]},ee))})]}),i.jsx("div",{className:"px-8",children:n==="lobbies"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("button",{onClick:()=>E(!0),className:"w-full bg-slate-900/30 border-2 border-dashed border-white/10 p-8 rounded-[3.5rem] flex flex-col items-center justify-center gap-3 group hover:border-primary/50 hover:bg-slate-900/50 transition-all active:scale-[0.98] shadow-inner",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/10 transition-all group-hover:rotate-12",children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"add"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"block text-sm font-black text-white uppercase tracking-widest",children:"Start a Lobby"}),i.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:"Gather players for a match"})]})]}),p?i.jsxs("div",{className:"bg-white/5 p-20 rounded-[3.5rem] flex flex-col items-center justify-center border border-white/5 shadow-inner",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full mb-4"}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Finding matches..."})]}):c.length===0?i.jsxs("div",{className:"bg-white/5 p-20 rounded-[4rem] text-center border border-white/5 shadow-inner",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-[2rem] flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"sports_soccer"})}),i.jsx("p",{className:"text-white font-extrabold text-lg mb-2",children:"No active lobbies"}),i.jsx("p",{className:"text-slate-500 text-xs leading-relaxed max-w-[200px] mx-auto",children:"Be the first to organize a game today!"})]}):i.jsx("div",{className:"space-y-4",children:c.map(ee=>{var Re,Qe,mt,fa,yt,Sa,qa,ma,pt,Mt,xt;return i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-6 rounded-[2.5rem] border border-white/5 shadow-lg hover:bg-slate-900 transition-all duration-500 group cursor-pointer animate-in fade-in slide-in-from-bottom-4 relative overflow-hidden",onClick:()=>{var ka;const Oe=ee.host_id===(s==null?void 0:s.id),pa=(ka=ee.members)==null?void 0:ka.some(Ea=>Ea.user_id===(s==null?void 0:s.id)&&Ea.status==="joined"),za=ee.type==="public";Oe||pa||za?a(`/lobby/${ee.id}`):Rt({isOpen:!0,message:"This is a private lobby. You need to be invited to view it."})},children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full filter blur-3xl -translate-y-1/2 translate-x-1/2"}),i.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-black text-xl text-white tracking-tight group-hover:text-primary transition-colors",children:ee.name}),ee.type&&i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-widest ${ee.type==="public"?"bg-primary/20 text-primary border border-primary/30":"bg-white/10 text-slate-300 border border-white/10"}`,children:ee.type})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"material-symbols-rounded text-sm text-primary",children:"stadium"}),i.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:((Re=ee.complex)==null?void 0:Re.name)||"Local Ground"})]}),(ee.preferred_date||ee.preferred_time)&&i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"material-symbols-rounded text-sm text-slate-500",children:"schedule"}),i.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:[ee.preferred_date?new Date(ee.preferred_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"",ee.preferred_date&&ee.preferred_time?"  ":"",ee.preferred_time||""]})]}),ee._distance!==void 0&&i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx("span",{className:"material-symbols-rounded text-xs text-slate-500",children:"location_on"}),i.jsxs("span",{className:"text-[9px] font-black text-slate-500",children:[ee._distance<1?`${Math.round(ee._distance*1e3)}m`:`${ee._distance.toFixed(1)}km`," away"]})]})]}),i.jsxs("div",{className:"bg-slate-800 text-white px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/5 shadow-lg",children:[((Qe=ee.members)==null?void 0:Qe.length)||0,i.jsx("span",{className:"text-slate-500 mx-1",children:"/"}),ee.max_players]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-auto relative z-10",children:[i.jsxs("div",{className:"flex -space-x-3",children:[Array.from({length:Math.min(((mt=ee.members)==null?void 0:mt.length)||0,5)}).map((Oe,pa)=>{var za,ka,Ea,zs,Ta,Us,is,Ei,pn;return i.jsx("div",{className:"w-9 h-9 rounded-xl border-2 border-slate-900 bg-slate-800 overflow-hidden shadow-sm",children:i.jsx("img",{src:ft((Ea=(ka=(za=ee.members)==null?void 0:za[pa])==null?void 0:ka.user)==null?void 0:Ea.avatar,(Us=(Ta=(zs=ee.members)==null?void 0:zs[pa])==null?void 0:Ta.user)==null?void 0:Us.name,(pn=(Ei=(is=ee.members)==null?void 0:is[pa])==null?void 0:Ei.user)==null?void 0:pn.id),className:"w-full h-full object-cover",alt:"Member"})},pa)}),((fa=ee.members)==null?void 0:fa.length)>5&&i.jsxs("div",{className:"w-9 h-9 rounded-xl border-2 border-slate-900 bg-slate-700 flex items-center justify-center text-[10px] font-black text-primary",children:["+",ee.members.length-5]})]}),i.jsxs("div",{className:"flex gap-2",onClick:Oe=>Oe.stopPropagation(),children:[ee.host_id===(s==null?void 0:s.id)&&i.jsx("button",{onClick:Oe=>I(ee.id,Oe),className:"w-11 h-11 rounded-2xl bg-red-500/10 border border-red-500/20 flex items-center justify-center text-red-400 hover:text-red-300 hover:bg-red-500/20 transition-all shadow-sm active:scale-90",title:"Delete Lobby",children:i.jsx("span",{className:"material-symbols-rounded",children:"delete"})}),i.jsx("button",{onClick:()=>Na(ee,"lobby"),className:"w-11 h-11 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-primary hover:bg-white/10 transition-all shadow-sm active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"person_add"})}),ee.type==="public"?i.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),ie(ee.id)},disabled:(yt=ee.members)==null?void 0:yt.some(Oe=>Oe.user_id===(s==null?void 0:s.id)&&(Oe.status==="joined"||Oe.status==="requested")),className:`h-11 px-6 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all ${(Sa=ee.members)!=null&&Sa.some(Oe=>Oe.user_id===(s==null?void 0:s.id)&&(Oe.status==="joined"||Oe.status==="requested"))?"bg-white/5 text-slate-500 border border-white/5":"bg-primary text-slate-900 shadow-lg shadow-primary/20 active:scale-95 hover:bg-primary-dark"}`,children:(qa=ee.members)!=null&&qa.some(Oe=>Oe.user_id===(s==null?void 0:s.id)&&Oe.status==="joined")?"Joined":(ma=ee.members)!=null&&ma.some(Oe=>Oe.user_id===(s==null?void 0:s.id)&&Oe.status==="requested")?"Requested":"Request Access"}):i.jsx("button",{onClick:()=>Na(ee,"lobby"),disabled:(pt=ee.members)==null?void 0:pt.some(Oe=>Oe.user_id===(s==null?void 0:s.id)),className:`h-11 px-6 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all ${(Mt=ee.members)!=null&&Mt.some(Oe=>Oe.user_id===(s==null?void 0:s.id))?"bg-white/5 text-slate-500 border border-white/5":"bg-white/5 text-slate-400 border border-white/5 hover:bg-white/10"}`,children:(xt=ee.members)!=null&&xt.some(Oe=>Oe.user_id===(s==null?void 0:s.id))?"Joined":"Private"})]})]})]},ee.id)})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("button",{onClick:()=>N(!0),className:"w-full bg-slate-900/30 border-2 border-dashed border-white/10 p-8 rounded-[3.5rem] flex flex-col items-center justify-center gap-3 group hover:border-primary/50 hover:bg-slate-900/50 transition-all active:scale-[0.98] shadow-inner",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center text-slate-400 group-hover:text-primary group-hover:bg-primary/10 transition-all group-hover:rotate-12",children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"shield_person"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("span",{className:"block text-sm font-black text-white uppercase tracking-widest",children:"Form a Team"}),i.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-tight",children:"Create your own football club"})]})]}),p?i.jsxs("div",{className:"bg-white/5 p-20 rounded-[3.5rem] flex flex-col items-center justify-center border border-white/5 shadow-inner",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full mb-4"}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Loading clubs..."})]}):f.length===0?i.jsxs("div",{className:"bg-white/5 p-20 rounded-[4rem] text-center border border-white/5 shadow-inner",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-[2rem] flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"shield"})}),i.jsx("p",{className:"text-white font-extrabold text-lg mb-2",children:"No teams joined"}),i.jsx("p",{className:"text-slate-500 text-xs leading-relaxed max-w-[200px] mx-auto",children:"Start a team and compete in local tournaments!"})]}):i.jsx("div",{className:"space-y-4",children:f.map(ee=>{var Re,Qe,mt;return i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-6 rounded-[2.5rem] border border-white/5 shadow-lg hover:bg-slate-900 transition-all duration-500 group flex gap-5 items-center cursor-pointer animate-in fade-in slide-in-from-bottom-4",onClick:()=>a(`/team/${ee.id}`),children:[i.jsx("div",{className:"w-20 h-20 rounded-[2rem] bg-slate-800 flex items-center justify-center border border-white/5 overflow-hidden relative shadow-inner p-1 group-hover:border-primary/30 transition-colors",children:ee.avatar_url?i.jsx("img",{src:ee.avatar_url,className:"w-full h-full object-cover rounded-[1.6rem]",alt:"Team logo"}):i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-600",children:"shield"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-black text-xl text-white truncate group-hover:text-primary transition-colors tracking-tight",children:ee.name}),i.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:[((Re=ee.members)==null?void 0:Re.length)||0," Professional Members"]}),i.jsxs("div",{className:"flex -space-x-2",children:[Array.from({length:Math.min(((Qe=ee.members)==null?void 0:Qe.length)||0,3)}).map((fa,yt)=>{var Sa,qa,ma,pt,Mt,xt,Oe,pa,za;return i.jsx("div",{className:"w-8 h-8 rounded-xl border-2 border-slate-900 bg-slate-800 overflow-hidden shadow-sm",children:i.jsx("img",{src:ft((ma=(qa=(Sa=ee.members)==null?void 0:Sa[yt])==null?void 0:qa.user)==null?void 0:ma.avatar,(xt=(Mt=(pt=ee.members)==null?void 0:pt[yt])==null?void 0:Mt.user)==null?void 0:xt.name,(za=(pa=(Oe=ee.members)==null?void 0:Oe[yt])==null?void 0:pa.user)==null?void 0:za.id),className:"w-full h-full object-cover",alt:"Member"})},yt)}),((mt=ee.members)==null?void 0:mt.length)>3&&i.jsxs("div",{className:"w-8 h-8 rounded-xl border-2 border-slate-900 bg-slate-700 flex items-center justify-center text-[9px] font-black text-primary",children:["+",ee.members.length-3]})]})]}),i.jsxs("div",{className:"flex gap-2",onClick:fa=>fa.stopPropagation(),children:[i.jsx("button",{onClick:()=>Na(ee,"team"),className:"w-11 h-11 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-primary hover:bg-white/10 transition-all shadow-sm active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"person_add"})}),i.jsx("button",{className:"w-11 h-11 rounded-2xl bg-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})})]})]},ee.id)})})]})}),(j||k)&&i.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/80 backdrop-blur-md flex items-end justify-center p-6 animate-in fade-in duration-500",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3.5rem] p-8 shadow-2xl animate-in slide-in-from-bottom-32 duration-700 relative border border-white/10",children:[i.jsx("button",{onClick:()=>{E(!1),N(!1)},className:"absolute top-6 right-6 w-10 h-10 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})}),i.jsxs("div",{className:"mb-8",children:[i.jsx("p",{className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"New Space"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter",children:j?"Create Lobby":"Register Team"})]}),i.jsxs("form",{onSubmit:j?R:X,className:"space-y-8",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Display Name"}),i.jsx("input",{type:"text",value:_,onChange:ee=>S(ee.target.value),placeholder:j?"Saturday Night...":"Club Elite...",className:"w-full bg-slate-950 border-2 border-white/5 rounded-[1.5rem] px-6 py-4 font-black text-white placeholder:text-slate-600 focus:ring-2 focus:ring-primary/20 outline-none transition-all"})]}),j&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Lobby Type"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>K("public"),className:`flex-1 py-3 rounded-[1.5rem] font-black text-[10px] uppercase tracking-widest transition-all ${M==="public"?"bg-primary text-slate-900 shadow-lg shadow-primary/20":"bg-white/5 text-slate-400 border border-white/5 hover:bg-white/10"}`,children:"Public"}),i.jsx("button",{type:"button",onClick:()=>K("private"),className:`flex-1 py-3 rounded-[1.5rem] font-black text-[10px] uppercase tracking-widest transition-all ${M==="private"?"bg-primary text-slate-900 shadow-lg shadow-primary/20":"bg-white/5 text-slate-400 border border-white/5 hover:bg-white/10"}`,children:"Private"})]}),i.jsx("p",{className:"text-[9px] text-slate-500 px-1",children:M==="public"?"Anyone can see and request to join":"Only your friends can see this lobby"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Venue *"}),i.jsxs("select",{value:z,onChange:ee=>O(ee.target.value),className:"w-full bg-slate-950 border-2 border-white/5 rounded-[1.5rem] px-6 py-4 font-black text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all",required:!0,children:[i.jsx("option",{value:"",children:"Select a venue..."}),Q.map(ee=>i.jsx("option",{value:ee.id,className:"bg-slate-900",children:ee.name},ee.id))]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Preferred Date *"}),i.jsx("input",{type:"date",value:L,onChange:ee=>q(ee.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-slate-950 border-2 border-white/5 rounded-[1.5rem] px-6 py-4 font-black text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Preferred Time *"}),i.jsx("input",{type:"time",value:re,onChange:ee=>P(ee.target.value),className:"w-full bg-slate-950 border-2 border-white/5 rounded-[1.5rem] px-6 py-4 font-black text-white focus:ring-2 focus:ring-primary/20 outline-none transition-all",required:!0})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center px-1",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Capacity"}),i.jsxs("span",{className:"text-sm font-black text-primary",children:[T," Players"]})]}),i.jsx("input",{type:"range",min:"2",max:"22",step:"2",value:T,onChange:ee=>A(parseInt(ee.target.value)),className:"w-full h-1.5 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-primary"}),i.jsxs("div",{className:"flex justify-between text-[8px] font-black text-slate-500 uppercase tracking-widest",children:[i.jsx("span",{children:"2 Players"}),i.jsx("span",{children:"22 Players"})]})]})]}),i.jsx("button",{type:"submit",disabled:!_.trim(),className:"w-full bg-primary text-slate-900 py-5 rounded-[1.5rem] font-black uppercase tracking-widest shadow-xl shadow-primary/20 active:scale-95 transition-all text-[11px] disabled:opacity-20",children:j?"Launch Lobby":"Establish Club"})]})]})}),B&&i.jsx("div",{className:"fixed inset-0 z-[110] bg-slate-950/80 backdrop-blur-md flex items-end justify-center p-6 animate-in fade-in duration-500",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3.5rem] p-8 shadow-2xl animate-in slide-in-from-bottom-32 duration-700 flex flex-col max-h-[80vh] relative border border-white/10",children:[i.jsx("button",{onClick:()=>ne(!1),className:"absolute top-6 right-6 w-10 h-10 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})}),i.jsxs("div",{className:"mb-8",children:[i.jsx("p",{className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Send Invites"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter",children:"Invite Crew"}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:["To: ",me==null?void 0:me.name]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4 no-scrollbar",children:We.length===0?i.jsxs("div",{className:"py-20 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"material-symbols-rounded text-slate-500",children:"person_off"})}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"No friends available"})]}):We.map(ee=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/50 rounded-[1.5rem] border border-white/5 hover:bg-slate-950 transition-colors group",children:[i.jsx("div",{className:"w-12 h-12 rounded-[1rem] overflow-hidden border border-slate-900 p-0.5 bg-slate-800 shadow-sm shrink-0",children:i.jsx("img",{src:ft(ee.avatar,ee.name,ee.id),className:"w-full h-full object-cover rounded-[0.8rem]",alt:"Friend"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-black text-white text-[13px] truncate",children:ee.name}),i.jsxs("p",{className:"text-[9px] font-black text-slate-500 tracking-widest uppercase",children:["#",ee.takwira_id||"PRO"]})]}),i.jsx("button",{onClick:()=>jt(ee.id),className:"bg-primary hover:bg-primary-dark text-slate-900 h-10 px-4 rounded-xl font-black text-[9px] uppercase tracking-widest active:scale-95 transition-all shadow-lg shadow-primary/10",children:"Invite"})]},ee.id))})]})}),ge.isOpen&&ge.lobbyId&&i.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/80 backdrop-blur-md flex items-end justify-center p-6 animate-in fade-in duration-500",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3.5rem] p-8 shadow-2xl animate-in slide-in-from-bottom-32 duration-700 relative border border-white/10",children:[i.jsx("button",{onClick:()=>{Ae({isOpen:!1,lobbyId:null}),se("")},className:"absolute top-6 right-6 w-10 h-10 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})}),i.jsxs("div",{className:"mb-8",children:[i.jsx("p",{className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Request Access"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter",children:"Send Request"}),i.jsx("p",{className:"text-[10px] text-slate-500 mt-2",children:"Add an optional message to the lobby owner"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block px-1",children:"Message (Optional)"}),i.jsx("textarea",{value:V,onChange:ee=>se(ee.target.value),placeholder:"Hey! I'd love to join this game...",rows:4,className:"w-full bg-slate-950 border-2 border-white/5 rounded-[1.5rem] px-6 py-4 font-black text-white placeholder:text-slate-600 focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{Ae({isOpen:!1,lobbyId:null}),se("")},className:"flex-1 bg-white/5 text-slate-400 py-4 rounded-[1.5rem] font-black uppercase tracking-widest text-[10px] hover:bg-white/10 transition-all active:scale-95",children:"Cancel"}),i.jsx("button",{onClick:F,className:"flex-1 bg-primary text-slate-900 py-4 rounded-[1.5rem] font-black uppercase tracking-widest text-[10px] shadow-xl shadow-primary/20 active:scale-95 transition-all",children:"Send Request"})]})]})]})}),i.jsx(qs,{isOpen:Zt,title:"Delete Lobby",message:"Are you sure you want to delete this lobby? This action cannot be undone and all members will be removed.",confirmText:"Delete",cancelText:"Cancel",type:"danger",onConfirm:ae,onCancel:()=>{Ge(!1),et(null)}}),i.jsx(ja,{isOpen:Wt.isOpen,title:"Success",message:Wt.message,buttonText:"OK",onClose:()=>Ot({isOpen:!1,message:""})}),i.jsx(qs,{isOpen:_a.isOpen,title:"Error",message:_a.message,confirmText:"OK",cancelText:"",type:"danger",onConfirm:()=>Rt({isOpen:!1,message:""}),onCancel:()=>Rt({isOpen:!1,message:""})})]})},Ij=({currentUser:s})=>{const{id:a}=fr(),n=rt(),[l,c]=v.useState(null),[u,f]=v.useState([]),[m,p]=v.useState([]),[x,g]=v.useState(!0),[y,j]=v.useState("chat"),[E,k]=v.useState(""),N=v.useRef(null),[_,S]=v.useState(!1),[T,A]=v.useState([]),[M,K]=v.useState({isOpen:!1,message:""}),[z,O]=v.useState({isOpen:!1,message:""}),[L,q]=v.useState(!1),[re,P]=v.useState(!1),[Q,oe]=v.useState(null);v.useEffect(()=>{if(a){ge();const B=Ae();return()=>{Y.removeChannel(B)}}},[a]),v.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[m,y]);const ge=async()=>{g(!0);try{const{data:B,error:ne}=await Y.from("lobbies").select("*, host:host_id(id, name, avatar, phone)").eq("id",a).single();if(ne)throw ne;c(B);const le=await t0(a);if(f(le),s){const ue=B.host_id===s.id,me=le.some(Be=>Be.user_id===s.id&&Be.status==="joined");if(ue||me){const Be=await s0(a);p(Be)}else p([])}else p([]);if(s){const ue=B.host_id===s.id,me=le.some(We=>We.user_id===s.id&&We.status==="joined");if(!(B.type==="public")&&!ue&&!me&&!(await dr(s.id)).filter(Ge=>Ge.status==="accepted").map(Ge=>Ge.user_id===s.id?Ge.friend_id:Ge.user_id).includes(B.host_id)){O({isOpen:!0,message:"You do not have access to this private lobby. You need to be invited."}),setTimeout(()=>n("/spaces"),2e3),g(!1);return}}else{n("/spaces"),g(!1);return}}catch(B){console.error("Error fetching lobby details:",B),n("/spaces")}finally{g(!1)}},Ae=()=>Y.channel(`lobby:${a}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_messages",filter:`lobby_id=eq.${a}`},async ne=>{if(s){const le=(l==null?void 0:l.host_id)===s.id,ue=u.some(me=>me.user_id===s.id&&me.status==="joined");if(le||ue){const{data:me}=await Y.from("user_profiles").select("id, name, avatar, phone").eq("id",ne.new.sender_id).single(),Be={...ne.new,sender:me};p(We=>We.find(lt=>lt.id===Be.id)?We:[...We,Be])}}}).on("postgres_changes",{event:"*",schema:"public",table:"lobby_members",filter:`lobby_id=eq.${a}`},async()=>{const ne=await t0(a);if(f(ne),s){const le=(l==null?void 0:l.host_id)===s.id,ue=ne.some(me=>me.user_id===s.id&&me.status==="joined");if((le||ue)&&m.length===0){const me=await s0(a);p(me)}}}).subscribe(),V=async B=>{if(B.preventDefault(),!E.trim()||!s||!a)return;const ne=u.some(Ge=>Ge.user_id===s.id&&Ge.status==="joined");if(!((l==null?void 0:l.host_id)===s.id)&&!ne){O({isOpen:!0,message:"You need to be approved to send messages in this lobby."});return}const ue=E.trim();k("");const me="temp-"+Date.now(),Be={id:me,lobby_id:a,sender_id:s.id,content:ue,created_at:new Date().toISOString(),sender:{id:s.id,name:s.name,avatar:ft(s.avatar,s.name,s.id)},isPending:!0};p(Ge=>[...Ge,Be]);const{success:We,data:lt,error:Zt}=await $j(a,s.id,ue);We?p(Ge=>Ge.map(ha=>ha.id===me?{...lt,sender:Be.sender}:ha)):(p(Ge=>Ge.filter(ha=>ha.id!==me)),O({isOpen:!0,message:"Failed to send message: "+Zt}))},se=async()=>{if(!s)return;const le=(await dr(s.id)).filter(ue=>ue.status==="accepted").map(ue=>ue.user_id===s.id?ue.friend:ue.user).filter(ue=>!u.some(me=>me.user_id===ue.id&&me.status==="joined"));A(le),S(!0)},he=async(B,ne)=>{if(!(!a||!s))try{const{success:le,error:ue}=await ed(a,B,ne,s.id);le?(K({isOpen:!0,message:ne==="accepted"?"Request approved! User has been added to the lobby.":"Request declined."}),setTimeout(()=>{ge()},500)):O({isOpen:!0,message:ue||"Failed to respond to request"})}catch(le){console.error("Error responding to request:",le),O({isOpen:!0,message:(le==null?void 0:le.message)||"An unexpected error occurred"})}},ce=async B=>{if(!a||!s)return;const{success:ne,error:le}=await rx(a,B,s.id);ne?A(ue=>ue.filter(me=>me.id!==B)):alert("Error inviting friend: "+le)},pe=async()=>{if(!a||!s)return;const{success:B,error:ne}=await zj(a,s.id);B?(q(!1),K({isOpen:!0,message:"You have left the lobby."}),setTimeout(()=>{n("/spaces")},1500)):O({isOpen:!0,message:ne||"Failed to leave lobby"})},R=async()=>{if(!a||!s||!Q)return;const{success:B,error:ne}=await qj(a,Q.userId,s.id);B?(P(!1),oe(null),K({isOpen:!0,message:`${Q.userName} has been removed from the lobby.`}),ge()):O({isOpen:!0,message:ne||"Failed to kick member"})},X=u.some(B=>B.user_id===(s==null?void 0:s.id)&&B.status==="joined"),ie=(l==null?void 0:l.host_id)===(s==null?void 0:s.id),F=ie||X,I=u.some(B=>B.user_id===(s==null?void 0:s.id)&&B.status==="requested"),ae=u.some(B=>B.user_id===(s==null?void 0:s.id)&&B.status==="invited");return x?i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-24 flex flex-col h-screen font-sans",children:[i.jsxs("header",{className:"bg-slate-950/80 backdrop-blur-xl px-6 pt-14 pb-6 border-b border-white/5 flex items-center gap-4 z-40 shrink-0 sticky top-0",children:[i.jsx("button",{onClick:()=>n("/spaces"),className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 hover:text-white border border-white/5 shadow-sm transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"arrow_back_ios_new"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl font-black text-white tracking-tighter truncate leading-tight uppercase",children:l==null?void 0:l.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-pulse shadow-lg shadow-primary/50"}),i.jsxs("span",{className:"text-[9px] font-black uppercase text-primary-dark tracking-widest",children:[l==null?void 0:l.status," SESSION"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[X&&!ie&&i.jsx("button",{onClick:()=>q(!0),className:"w-10 h-10 rounded-xl bg-red-500/10 text-red-400 border border-red-500/20 flex items-center justify-center active:scale-90 transition-all shadow-sm hover:bg-red-500/20",title:"Leave Lobby",children:i.jsx("span",{className:"material-symbols-rounded",children:"exit_to_app"})}),(F||ie)&&i.jsx("button",{onClick:se,className:"w-10 h-10 rounded-xl bg-primary text-slate-900 flex items-center justify-center active:scale-90 transition-all shadow-lg shadow-primary/10 border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded",children:"person_add"})}),(l==null?void 0:l.host_id)===(s==null?void 0:s.id)&&i.jsx("button",{className:"w-10 h-10 rounded-xl bg-white/5 text-slate-400 flex items-center justify-center active:scale-90 transition-all border border-white/5 shadow-sm",children:i.jsx("span",{className:"material-symbols-rounded",children:"settings"})})]})]}),i.jsx("div",{className:"px-6 py-4 bg-slate-950 border-b border-white/5 shrink-0",children:i.jsx("div",{className:"flex p-1.5 bg-slate-900 rounded-[1.5rem] gap-2 border border-white/5",children:[{key:"chat",label:"Match Chat",icon:"forum"},{key:"players",label:"Squad List",icon:"groups"}].map(({key:B,label:ne,icon:le})=>i.jsxs("button",{onClick:()=>j(B),className:`flex-1 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${y===B?"bg-primary text-slate-900 shadow-lg shadow-primary/10":"text-slate-500 hover:text-white"}`,children:[i.jsx("span",{className:"material-symbols-rounded text-lg",children:le}),ne," ",B==="players"&&`(${u.length})`]},B))})}),i.jsx("div",{className:"flex-1 overflow-hidden relative",children:y==="chat"?i.jsxs("div",{className:"h-full flex flex-col",children:[!F&&s&&i.jsx("div",{className:"bg-amber-500/10 border-b border-amber-500/20 px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"material-symbols-rounded text-amber-400",children:"lock"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:I?"Access Request Pending":ae?"Invitation Pending":"Access Required"}),i.jsx("p",{className:"text-[9px] text-amber-300/80 font-bold",children:I?"Your request is being reviewed by the lobby host. You can view but cannot participate yet.":ae?"You have been invited! Accept the invitation to participate.":"You need to request access to chat and participate in this lobby."})]})]})}),i.jsx("div",{ref:N,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth pb-32",children:!F&&s?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center py-20",children:[i.jsx("div",{className:"w-20 h-20 rounded-[2.5rem] bg-amber-500/10 border border-amber-500/20 flex items-center justify-center mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-amber-400",children:"lock"})}),i.jsx("p",{className:"text-sm font-black uppercase tracking-widest text-amber-400 mb-2",children:"Access Required"}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold leading-relaxed max-w-[280px]",children:I?"Your access request is pending approval. The lobby host will review your request soon.":ae?"You have been invited to this lobby. Please accept the invitation to participate.":"You need to request access to view messages and participate in this lobby."})]}):m.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40 py-20 grayscale",children:[i.jsx("div",{className:"w-20 h-20 rounded-[2.5rem] bg-white/5 flex items-center justify-center mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"chat_bubble"})}),i.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Match-day strategy starts here!"}),i.jsx("p",{className:"text-[9px] font-bold text-slate-600 mt-2 uppercase tracking-tight",children:"Break the ice and lead your team..."})]}):m.map(B=>{var le;const ne=B.sender_id===(s==null?void 0:s.id);return i.jsxs("div",{className:`flex flex-col ${ne?"items-end":"items-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5 px-2",children:[!ne&&i.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:(le=B.sender)==null?void 0:le.name}),i.jsx("span",{className:"text-[8px] font-black text-slate-200 uppercase tabular-nums tracking-widest",children:new Date(B.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{className:`max-w-[85%] px-5 py-3.5 rounded-[2rem] text-[13px] shadow-sm relative group transition-all hover:scale-[1.02] ${ne?"bg-primary text-slate-900 rounded-br-none shadow-primary/10":"bg-white/10 text-white backdrop-blur-md border border-white/5 rounded-bl-none"}`,children:[i.jsx("p",{className:"leading-relaxed font-bold whitespace-pre-wrap tracking-tight",children:B.content}),ne&&i.jsx("div",{className:"absolute -bottom-1 -right-1",children:i.jsx("span",{className:`material-symbols-rounded text-[14px] ${B.isPending?"text-slate-900/40":"text-slate-900/60"}`,children:"done_all"})})]})]},B.id)})}),F?i.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 z-50 bg-gradient-to-t from-slate-950 via-slate-950 to-transparent",children:i.jsxs("form",{onSubmit:V,className:"max-w-md mx-auto flex items-center gap-3 bg-slate-900 p-2 rounded-[2.5rem] shadow-2xl border border-white/5",children:[i.jsxs("div",{className:"flex-1 flex items-center bg-slate-950/50 rounded-[2rem] px-5 py-3.5 border border-white/5",children:[i.jsx("input",{type:"text",value:E,onChange:B=>k(B.target.value),placeholder:"Discuss the pitch...",className:"flex-1 bg-transparent border-none outline-none text-[13px] font-bold text-white placeholder:text-slate-600"}),i.jsx("button",{type:"button",className:"text-slate-600 hover:text-primary transition-colors",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"mood"})})]}),i.jsx("button",{type:"submit",disabled:!E.trim(),className:`w-12 h-12 rounded-[1.8rem] flex items-center justify-center transition-all ${E.trim()?"bg-primary text-slate-900 shadow-lg shadow-primary/20 active:scale-95":"bg-white/5 text-slate-500 opacity-50"}`,children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"send"})})]})}):i.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 z-50 bg-gradient-to-t from-slate-950 via-slate-950 to-transparent",children:i.jsxs("div",{className:"max-w-md mx-auto bg-slate-900/50 p-4 rounded-[2rem] border border-amber-500/20 text-center",children:[i.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:"Access Required"}),i.jsx("p",{className:"text-[9px] text-slate-400 font-bold",children:I?"Waiting for host approval...":ae?"Check the Squad List tab to accept your invitation":"Request access to participate in this lobby"})]})})]}):i.jsxs("div",{className:"h-full overflow-y-auto p-8 space-y-4 no-scrollbar",children:[(l==null?void 0:l.host_id)===(s==null?void 0:s.id)&&i.jsx(i.Fragment,{children:u.filter(B=>B.status==="requested"||B.status==="invited").length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 px-1",children:"Pending Requests"}),u.filter(B=>B.status==="requested"||B.status==="invited").map(B=>{var ne,le,ue,me,Be;return i.jsxs("div",{className:"bg-amber-500/10 p-5 rounded-[2.5rem] border border-amber-500/20 flex items-center gap-5 shadow-sm mb-4 animate-in slide-in-from-bottom-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-amber-500/30 shadow-sm relative shrink-0 p-0.5 bg-slate-800",children:i.jsx("img",{src:ft((ne=B.user)==null?void 0:ne.avatar,(le=B.user)==null?void 0:le.name,(ue=B.user)==null?void 0:ue.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"Avatar"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("p",{className:"font-black text-white text-sm truncate",children:(me=B.user)==null?void 0:me.name})}),i.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mt-0.5",children:["#",((Be=B.user)==null?void 0:Be.takwira_id)||"PRO_PLAYER"]}),B.request_message&&i.jsxs("p",{className:"text-[10px] text-slate-300 mt-2 italic",children:['"',B.request_message,'"']}),i.jsx("div",{className:`mt-2 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-[0.1em] border-2 inline-block ${B.status==="requested"?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-purple-500/10 text-purple-400 border-purple-500/20"}`,children:B.status==="requested"?"Access Request":"Invited"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>he(B.user_id,"accepted"),className:"bg-primary text-slate-900 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-primary-dark transition-all active:scale-95 shadow-lg shadow-primary/20",children:"Approve"}),i.jsx("button",{onClick:()=>he(B.user_id,"declined"),className:"bg-red-500/10 text-red-400 border border-red-500/20 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-red-500/20 transition-all active:scale-95",children:"Decline"})]})]},B.id)})]})}),i.jsxs("div",{children:[(l==null?void 0:l.host_id)===(s==null?void 0:s.id)&&u.filter(B=>B.status==="joined").length>0&&i.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 px-1",children:"Members"}),u.filter(B=>B.status==="joined").map(B=>{var ne,le,ue,me,Be,We,lt;return i.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-[2.5rem] border border-white/5 flex items-center gap-5 shadow-sm hover:bg-slate-900 hover:shadow-xl transition-all duration-500 group animate-in slide-in-from-bottom-4 mb-4",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-slate-800 shadow-sm relative shrink-0 p-0.5 bg-slate-800",children:[i.jsx("img",{src:ft((ne=B.user)==null?void 0:ne.avatar,(le=B.user)==null?void 0:le.name,(ue=B.user)==null?void 0:ue.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"Avatar"}),((me=B.user)==null?void 0:me.id)===(l==null?void 0:l.host_id)&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-slate-900 p-1 rounded-lg shadow-md border-2 border-slate-900",children:i.jsx("span",{className:"material-symbols-rounded text-[14px]",children:"stars"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-black text-white text-sm truncate group-hover:text-primary transition-colors",children:(Be=B.user)==null?void 0:Be.name}),((We=B.user)==null?void 0:We.id)===(l==null?void 0:l.host_id)&&i.jsx("span",{className:"text-[7px] font-black text-slate-900 uppercase bg-primary px-1.5 py-0.5 rounded-full border border-primary/20",children:"CAPTAIN"})]}),i.jsxs("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-0.5",children:["#",((lt=B.user)==null?void 0:lt.takwira_id)||"PRO_PLAYER"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"px-4 py-1.5 rounded-full text-[8px] font-black uppercase tracking-[0.1em] border-2 shadow-sm bg-emerald-500/10 text-emerald-500 border-emerald-500/20",children:"Joined"}),ie&&B.user_id!==(s==null?void 0:s.id)&&i.jsx("button",{onClick:Zt=>{var Ge;Zt.stopPropagation(),oe({userId:B.user_id,userName:((Ge=B.user)==null?void 0:Ge.name)||"Member"}),P(!0)},className:"w-8 h-8 rounded-xl bg-red-500/10 text-red-400 border border-red-500/20 flex items-center justify-center hover:bg-red-500/20 transition-all active:scale-90",title:"Remove Member",children:i.jsx("span",{className:"material-symbols-rounded text-sm",children:"close"})})]})]},B.id)})]}),(l==null?void 0:l.host_id)!==(s==null?void 0:s.id)&&!F&&i.jsxs("div",{className:"mt-6",children:[ae&&i.jsx("div",{className:"bg-purple-500/10 p-5 rounded-[2.5rem] border border-purple-500/20 flex items-center gap-5 shadow-sm mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-black text-white text-sm mb-2",children:"You have been invited to this lobby!"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>he(s.id,"accepted"),className:"bg-primary text-slate-900 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-primary-dark transition-all active:scale-95 shadow-lg shadow-primary/20",children:"Accept"}),i.jsx("button",{onClick:()=>he(s.id,"declined"),className:"bg-red-500/10 text-red-400 border border-red-500/20 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-red-500/20 transition-all active:scale-95",children:"Decline"})]})]})}),I&&i.jsx("div",{className:"bg-blue-500/10 p-5 rounded-[2.5rem] border border-blue-500/20 flex items-center gap-5 shadow-sm mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-black text-white text-sm mb-2",children:"Your access request is pending"}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"The lobby host will review your request. You'll be notified when they respond."})]})}),!I&&!ae&&(l==null?void 0:l.type)==="public"&&i.jsx("div",{className:"bg-slate-900/50 p-5 rounded-[2.5rem] border border-white/5 flex items-center gap-5 shadow-sm mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-black text-white text-sm mb-2",children:"Request Access to Participate"}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold mb-3",children:"You can view this lobby but need approval to chat and participate."}),i.jsx("button",{onClick:()=>n("/spaces"),className:"bg-primary text-slate-900 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest hover:bg-primary-dark transition-all active:scale-95 shadow-lg shadow-primary/20",children:"Go to Spaces to Request Access"})]})})]})]})}),_&&i.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/80 backdrop-blur-md flex items-end justify-center p-6 animate-in fade-in duration-500",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3.5rem] p-8 shadow-2xl animate-in slide-in-from-bottom-32 duration-700 max-h-[80vh] flex flex-col relative border border-white/10",children:[i.jsx("button",{onClick:()=>S(!1),className:"absolute top-6 right-6 w-10 h-10 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})}),i.jsxs("div",{className:"mb-8",children:[i.jsx("p",{className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Squad Builder"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter",children:"Invite Crew"}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Strengthen the lobby squad"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4 no-scrollbar",children:T.length===0?i.jsxs("div",{className:"py-20 text-center grayscale opacity-40",children:[i.jsx("div",{className:"w-20 h-20 rounded-[2.5rem] bg-white/5 flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"person_off"})}),i.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-[0.2em]",children:"Everyone is in!"}),i.jsx("p",{className:"text-[8px] text-slate-500 mt-2 uppercase font-black",children:"All crew mates have joined"})]}):T.map(B=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/50 rounded-[2rem] border border-white/5 hover:bg-slate-950 transition-all group",children:[i.jsx("div",{className:"w-12 h-12 rounded-[1rem] overflow-hidden border border-slate-900 p-0.5 bg-slate-800 shadow-sm shrink-0",children:i.jsx("img",{src:ft(B.avatar,B.name,B.id),className:"w-full h-full object-cover rounded-[0.8rem]",alt:"Friend avatar"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-black text-white text-[13px] truncate",children:B.name}),i.jsxs("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-[0.1em]",children:["#",B.takwira_id||"CREW"]})]}),i.jsx("button",{onClick:()=>ce(B.id),className:"bg-primary hover:bg-primary-dark text-slate-900 h-10 px-5 rounded-[1rem] font-black text-[9px] uppercase tracking-widest active:scale-95 transition-all shadow-lg shadow-primary/20 border-2 border-primary/20",children:"INVITE"})]},B.id))})]})}),i.jsx(ja,{isOpen:M.isOpen,message:M.message,onClose:()=>K({isOpen:!1,message:""})}),i.jsx(ja,{isOpen:z.isOpen,message:z.message,onClose:()=>O({isOpen:!1,message:""}),type:"error"}),i.jsx(qs,{isOpen:L,title:"Leave Lobby",message:"Are you sure you want to leave this lobby? You will need to request access again to rejoin.",confirmText:"Leave",cancelText:"Cancel",type:"warning",onConfirm:pe,onCancel:()=>q(!1)}),i.jsx(qs,{isOpen:re,title:"Remove Member",message:`Are you sure you want to remove ${Q==null?void 0:Q.userName} from this lobby?`,confirmText:"Remove",cancelText:"Cancel",type:"danger",onConfirm:R,onCancel:()=>{P(!1),oe(null)}})]})},Vj=({currentUser:s})=>{const{id:a}=fr(),n=rt(),[l,c]=v.useState(null),[u,f]=v.useState([]),[m,p]=v.useState([]),[x,g]=v.useState(!0),[y,j]=v.useState("chat"),[E,k]=v.useState(""),N=v.useRef(null),[_,S]=v.useState(!1),[T,A]=v.useState([]);v.useEffect(()=>{if(a){M();const q=K();return()=>{Y.removeChannel(q)}}},[a]),v.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[m,y]);const M=async()=>{g(!0);try{const{data:q,error:re}=await Y.from("teams").select("*, admin:admin_id(id, name, avatar, phone)").eq("id",a).single();if(re)throw re;c(q);const[P,Q]=await Promise.all([a0(a),Pj(a)]);f(P),p(Q)}catch(q){console.error("Error fetching team details:",q),n("/spaces")}finally{g(!1)}},K=()=>Y.channel(`team:${a}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"team_messages",filter:`team_id=eq.${a}`},async re=>{const{data:P}=await Y.from("user_profiles").select("id, name, avatar, phone").eq("id",re.new.sender_id).single(),Q={...re.new,sender:P};p(oe=>oe.find(ge=>ge.id===Q.id)?oe:[...oe,Q])}).on("postgres_changes",{event:"*",schema:"public",table:"team_members",filter:`team_id=eq.${a}`},()=>{a0(a).then(f)}).subscribe(),z=async q=>{if(q.preventDefault(),!E.trim()||!s||!a)return;const re=E.trim();k("");const P="temp-"+Date.now(),Q={id:P,team_id:a,sender_id:s.id,content:re,created_at:new Date().toISOString(),sender:{id:s.id,name:s.name,avatar:ft(s.avatar,s.name,s.id)},isPending:!0};p(V=>[...V,Q]);const{success:oe,data:ge,error:Ae}=await Hj(a,s.id,re);oe?p(V=>V.map(se=>se.id===P?{...ge,sender:Q.sender}:se)):(p(V=>V.filter(se=>se.id!==P)),alert("Failed to send: "+Ae))},O=async()=>{if(!s)return;const P=(await dr(s.id)).filter(Q=>Q.status==="accepted").map(Q=>Q.user_id===s.id?Q.friend:Q.user).filter(Q=>!u.some(oe=>oe.user_id===Q.id));A(P),S(!0)},L=async q=>{if(!a||!s)return;const{success:re,error:P}=await nx(a,q);re?A(Q=>Q.filter(oe=>oe.id!==q)):alert("Error inviting friend: "+P)};return x?i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-24 flex flex-col h-screen font-sans",children:[i.jsxs("header",{className:"bg-slate-950/80 backdrop-blur-xl px-6 pt-14 pb-6 border-b border-white/5 flex items-center gap-4 z-40 shrink-0 sticky top-0",children:[i.jsx("button",{onClick:()=>n("/spaces"),className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 hover:text-white border border-white/5 shadow-sm transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"arrow_back_ios_new"})}),i.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden border-2 border-slate-700 shrink-0 shadow-md p-0.5 bg-slate-800",children:i.jsx("img",{src:ft(l==null?void 0:l.avatar_url,l==null?void 0:l.name,l==null?void 0:l.id),className:"w-full h-full object-cover rounded-lg",alt:"Team Avatar"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl font-black text-white tracking-tighter truncate leading-tight uppercase",children:l==null?void 0:l.name}),i.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[i.jsx("span",{className:"material-symbols-rounded text-primary text-sm",children:"verified"}),i.jsxs("span",{className:"text-[10px] font-black uppercase text-primary-dark tracking-widest",children:[u.length," SQUAD MEMBERS"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:O,className:"w-10 h-10 rounded-xl bg-primary text-slate-900 flex items-center justify-center active:scale-90 transition-all shadow-lg shadow-primary/10 border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded",children:"person_add"})}),i.jsx("button",{className:"w-10 h-10 rounded-xl bg-white/5 text-slate-400 flex items-center justify-center active:scale-90 transition-all border border-white/5 shadow-sm",children:i.jsx("span",{className:"material-symbols-rounded",children:"more_vert"})})]})]}),i.jsx("div",{className:"px-6 py-4 bg-slate-950 border-b border-white/5 shrink-0",children:i.jsx("div",{className:"flex p-1.5 bg-slate-900 rounded-[1.5rem] gap-2 border border-white/5",children:[{key:"chat",label:"Squad HQ",icon:"shield"},{key:"members",label:"Roster",icon:"sports_soccer"}].map(({key:q,label:re,icon:P})=>i.jsxs("button",{onClick:()=>j(q),className:`flex-1 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${y===q?"bg-primary text-slate-900 shadow-xl shadow-primary/10":"text-slate-500 hover:text-white"}`,children:[i.jsx("span",{className:"material-symbols-rounded text-lg",children:P}),re]},q))})}),i.jsx("div",{className:"flex-1 overflow-hidden relative",children:y==="chat"?i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsx("div",{ref:N,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth pb-32",children:m.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40 py-20 grayscale",children:[i.jsx("div",{className:"w-20 h-20 rounded-[2.5rem] bg-white/5 flex items-center justify-center mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"security"})}),i.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Team HQ is online"}),i.jsx("p",{className:"text-[9px] font-bold text-slate-500 mt-2 uppercase tracking-tight",children:"Coordinate your next win here..."})]}):m.map(q=>{var P;const re=q.sender_id===(s==null?void 0:s.id);return i.jsxs("div",{className:`flex flex-col ${re?"items-end":"items-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5 px-2",children:[!re&&i.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:(P=q.sender)==null?void 0:P.name}),i.jsx("span",{className:"text-[8px] font-black text-slate-200 uppercase tabular-nums tracking-widest",children:new Date(q.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{className:`max-w-[85%] px-5 py-3.5 rounded-[2rem] text-[13px] shadow-sm relative group transition-all hover:scale-[1.02] ${re?"bg-primary text-slate-900 rounded-br-none shadow-primary/10":"bg-white/10 text-white backdrop-blur-md border border-white/5 rounded-bl-none"}`,children:[i.jsx("p",{className:"leading-relaxed font-bold whitespace-pre-wrap tracking-tight",children:q.content}),re&&i.jsx("div",{className:"absolute -bottom-1 -right-1",children:i.jsx("span",{className:`material-symbols-rounded text-[14px] ${q.isPending?"text-slate-900/40":"text-slate-900/60"}`,children:"done_all"})})]})]},q.id)})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 z-50 bg-gradient-to-t from-slate-950 via-slate-950 to-transparent",children:i.jsxs("form",{onSubmit:z,className:"max-w-md mx-auto flex items-center gap-3 bg-slate-900 p-2 rounded-[2.5rem] shadow-2xl border border-white/5",children:[i.jsxs("div",{className:"flex-1 flex items-center bg-slate-950/50 rounded-[2rem] px-5 py-3.5 border border-white/5",children:[i.jsx("input",{type:"text",value:E,onChange:q=>k(q.target.value),placeholder:"Message the squad...",className:"flex-1 bg-transparent border-none outline-none text-[13px] font-bold text-white placeholder:text-slate-600"}),i.jsx("button",{type:"button",className:"text-slate-600 hover:text-primary transition-colors",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"mood"})})]}),i.jsx("button",{type:"submit",disabled:!E.trim(),className:`w-12 h-12 rounded-[1.8rem] flex items-center justify-center transition-all ${E.trim()?"bg-primary text-slate-900 shadow-lg shadow-primary/20 active:scale-95":"bg-white/5 text-slate-500 opacity-50"}`,children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"send"})})]})})]}):i.jsx("div",{className:"h-full overflow-y-auto p-8 space-y-4 no-scrollbar",children:u.map(q=>{var re,P,Q,oe,ge;return i.jsxs("div",{className:"bg-slate-900/50 p-5 rounded-[2.5rem] border border-white/5 flex items-center gap-5 shadow-sm hover:bg-slate-900 hover:shadow-xl transition-all duration-500 group animate-in slide-in-from-bottom-4",children:[i.jsxs("div",{className:"w-14 h-14 rounded-2xl overflow-hidden border-2 border-slate-800 shadow-sm relative shrink-0 p-0.5 bg-slate-800",children:[i.jsx("img",{src:ft((re=q.user)==null?void 0:re.avatar,(P=q.user)==null?void 0:P.name,(Q=q.user)==null?void 0:Q.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"Member Avatar"}),q.role==="admin"&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-primary text-slate-900 p-1 rounded-lg shadow-md border-2 border-slate-900",children:i.jsx("span",{className:"material-symbols-rounded text-[14px]",children:"stars"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"font-black text-white text-sm truncate group-hover:text-primary transition-colors",children:(oe=q.user)==null?void 0:oe.name}),q.role==="admin"&&i.jsx("span",{className:"text-[7px] font-black text-slate-900 uppercase bg-primary px-1.5 py-0.5 rounded-full border border-primary/20",children:"ADMIN"})]}),i.jsxs("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mt-0.5",children:["#",((ge=q.user)==null?void 0:ge.takwira_id)||"SQUAD_MEMBER"]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase tracking-widest",children:"Joined"}),i.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-tighter",children:new Date(q.created_at).toLocaleDateString()})]})]},q.id)})})}),_&&i.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-950/80 backdrop-blur-md flex items-end justify-center p-6 animate-in fade-in duration-500",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3.5rem] p-8 shadow-2xl animate-in slide-in-from-bottom-32 duration-700 max-h-[80vh] flex flex-col relative border border-white/10",children:[i.jsx("button",{onClick:()=>S(!1),className:"absolute top-6 right-6 w-10 h-10 bg-white/5 rounded-full flex items-center justify-center text-slate-400 hover:text-white active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})}),i.jsxs("div",{className:"mb-8",children:[i.jsx("p",{className:"text-primary text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Squad Recruitment"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tighter",children:"Draft Friends"}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:["Add friends to ",l==null?void 0:l.name]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4 no-scrollbar",children:T.length===0?i.jsxs("div",{className:"py-20 text-center grayscale opacity-40",children:[i.jsx("div",{className:"w-20 h-20 rounded-[2.5rem] bg-slate-50 flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-200",children:"person_off"})}),i.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-[0.2em]",children:"Full Squad"}),i.jsx("p",{className:"text-[8px] text-slate-300 mt-2 uppercase font-black",children:"All friends are already in teams"})]}):T.map(q=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-950/50 rounded-[2rem] border border-white/5 hover:bg-slate-950 transition-all group",children:[i.jsx("div",{className:"w-12 h-12 rounded-[1rem] overflow-hidden border border-slate-900 p-0.5 bg-slate-800 shadow-sm shrink-0",children:i.jsx("img",{src:ft(q.avatar,q.name,q.id),className:"w-full h-full object-cover rounded-[0.8rem]",alt:"Friend avatar"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-black text-white text-[13px] truncate",children:q.name}),i.jsxs("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-[0.1em]",children:["#",q.takwira_id||"ROOKIE"]})]}),i.jsx("button",{onClick:()=>L(q.id),className:"bg-primary hover:bg-primary-dark text-slate-900 h-10 px-5 rounded-[1rem] font-black text-[9px] uppercase tracking-widest active:scale-95 transition-all shadow-lg shadow-primary/20 border-2 border-primary/20",children:"RECRUIT"})]},q.id))})]})})]})},r0=({currentUser:s,onlineUsers:a})=>{const[n,l]=v.useState(""),[c,u]=v.useState([]),[f,m]=v.useState([]),[p,x]=v.useState(!1),[g,y]=v.useState(!1),[j,E]=v.useState({isOpen:!1,message:""}),[k,N]=v.useState({isOpen:!1,message:""});v.useEffect(()=>{let z=!0;if(s&&z){_(s.id),window.dispatchEvent(new CustomEvent("refreshPendingRequests"));const O=Y.channel("social_updates").on("postgres_changes",{event:"*",schema:"public",table:"friendships"},()=>{_(s.id),window.dispatchEvent(new CustomEvent("refreshPendingRequests"))}).subscribe();return()=>{Y.removeChannel(O)}}return()=>{z=!1}},[s]);const _=async z=>{x(!0);const O=await dr(z);m(O),x(!1)},S=async z=>{if(l(z),z.trim().length>=2){y(!0);const O=await Ej(z);u(O.filter(L=>L.id!==(s==null?void 0:s.id))),y(!1)}else u([])},T=async z=>{if(!s)return;const{success:O,error:L}=await Tj(s.id,z);O?(E({isOpen:!0,message:"Friend request sent successfully!"}),_(s.id)):N({isOpen:!0,message:L||"Failed to send friend request"})},A=async(z,O)=>{const{success:L,error:q}=await Aj(z,O);L&&s?(O==="accepted"&&E({isOpen:!0,message:"Friend request accepted! They are now in your crew."}),_(s.id),window.dispatchEvent(new CustomEvent("refreshPendingRequests"))):q&&N({isOpen:!0,message:q||"Failed to update friend request"})},M=f.filter(z=>z.status==="pending"&&z.friend_id===(s==null?void 0:s.id)),K=f.filter(z=>z.status==="accepted");return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-[calc(8rem+env(safe-area-inset-bottom))] font-sans",children:[i.jsxs("header",{className:"px-8 pt-[calc(3.5rem+env(safe-area-inset-top))] pb-8 sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Social Hub"}),i.jsx("h1",{className:"text-3xl font-black tracking-tighter text-white",children:"The Crew"})]}),i.jsx("div",{className:"flex -space-x-3",children:K.slice(0,3).map((z,O)=>{const L=z.user_id===(s==null?void 0:s.id)?z.friend:z.user;return i.jsx("div",{className:"w-10 h-10 rounded-2xl border-2 border-slate-900 bg-slate-800 overflow-hidden shadow-sm",children:i.jsx("img",{src:ft(L.avatar,L.name,L.id),className:"w-full h-full object-cover",alt:"Friend"})},O)})})]}),i.jsxs("div",{className:"relative group",children:[i.jsx("span",{className:"material-symbols-rounded absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-primary transition-colors",children:"search"}),i.jsx("input",{type:"text",value:n,onChange:z=>S(z.target.value),placeholder:"Search by ID or name...",className:"w-full h-14 pl-12 pr-12 rounded-2xl bg-white/5 border border-white/5 shadow-inner text-sm font-bold text-white focus:ring-2 focus:ring-primary/20 placeholder:text-slate-600 transition-all"}),g&&i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:i.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-primary border-t-transparent rounded-full"})})]})]}),i.jsx("div",{className:"px-8 space-y-8",children:n.trim().length>=2?i.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsxs("h3",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-1 h-1 bg-primary rounded-full"})," Potential Crewmates"]}),c.length===0&&!g?i.jsxs("div",{className:"bg-white/5 p-12 rounded-[3rem] text-center border border-white/5 shadow-inner",children:[i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-700 mb-2",children:"person_search"}),i.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"No players found"})]}):i.jsx("div",{className:"space-y-3",children:c.map(z=>{const O=f.find(L=>L.user_id===z.id||L.friend_id===z.id);return i.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-[2rem] flex items-center gap-4 shadow-lg border border-white/5 hover:border-primary/20 transition-all",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden bg-slate-800 border border-white/5 p-0.5",children:i.jsx("img",{src:ft(z.avatar,z.name,z.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"User"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-black text-white text-sm truncate",children:z.name}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-500 tracking-wider uppercase",children:["#",z.takwira_id||"RECRUIT"]})]}),O?i.jsx("div",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${O.status==="accepted"?"bg-primary/10 text-primary border border-primary/20":"bg-white/5 text-slate-400"}`,children:O.status==="accepted"?"Crew":"Pending"}):i.jsx("button",{onClick:()=>T(z.id),className:"w-10 h-10 bg-primary text-slate-900 rounded-xl shadow-lg shadow-primary/20 active:scale-90 transition-all flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-rounded",children:"person_add"})})]},z.id)})})]}):i.jsxs(i.Fragment,{children:[M.length>0&&i.jsxs("section",{className:"animate-in zoom-in-95 duration-500 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest flex items-center gap-2",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-ping"}),"Crew Invites"]}),i.jsxs("span",{className:"px-3 py-1 bg-primary/20 text-primary rounded-full text-[9px] font-black uppercase tracking-widest border border-primary/30",children:[M.length," New"]})]}),i.jsx("div",{className:"space-y-3",children:M.map(z=>{const O=z.user;return O?i.jsxs("div",{className:"bg-primary/5 p-5 rounded-[2.5rem] flex items-center gap-4 border border-primary/10 group",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl overflow-hidden bg-slate-900 shrink-0 shadow-sm p-0.5 border border-primary/10",children:i.jsx("img",{src:ft(O.avatar,O.name,O.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"Requester"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-black text-white text-sm truncate",children:O.name}),i.jsx("p",{className:"text-[10px] font-bold text-primary uppercase tracking-widest",children:"Wants to join crew"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>A(z.id,"accepted"),className:"w-10 h-10 bg-primary text-slate-900 rounded-xl shadow-lg shadow-primary/20 flex items-center justify-center active:scale-90 transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"check"})}),i.jsx("button",{onClick:()=>A(z.id,"blocked"),className:"w-10 h-10 bg-white/5 text-slate-400 rounded-xl border border-white/5 flex items-center justify-center active:scale-90 transition-all font-black text-xs hover:bg-white/10 hover:text-white",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]},z.id):null})})]}),i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h3",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest flex items-center gap-2",children:[i.jsx("span",{className:"w-1 h-1 bg-primary rounded-full"})," My Crew"]}),i.jsxs("span",{className:"px-3 py-1 bg-white/5 rounded-full text-[9px] font-black text-slate-400 border border-white/5 uppercase tracking-widest",children:[K.length," Members"]})]}),p?i.jsxs("div",{className:"bg-white/5 p-20 rounded-[3rem] flex flex-col items-center justify-center border border-white/5 shadow-inner",children:[i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mb-4"}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Checking status..."})]}):K.length===0?i.jsxs("div",{className:"bg-white/5 border-2 border-dashed border-white/5 rounded-[3rem] p-16 text-center animate-in fade-in zoom-in duration-700",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-[2rem] flex items-center justify-center mx-auto mb-6",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-600",children:"group_add"})}),i.jsxs("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest leading-relaxed",children:["Empty crew.",i.jsx("br",{}),"Search players above!"]})]}):i.jsx("div",{className:"space-y-4",children:K.map(z=>{var q;const O=z.user_id===(s==null?void 0:s.id)?z.friend:z.user;if(!O)return null;const L=((q=a[O.id])==null?void 0:q.status)==="online";return i.jsxs(Rs,{to:`/chat/${z.id}`,className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[2.5rem] flex items-center gap-5 shadow-lg border border-white/5 group active:scale-[0.98] transition-all hover:bg-slate-900 animate-in fade-in slide-in-from-bottom-2",children:[i.jsxs("div",{className:"w-16 h-16 rounded-[1.5rem] overflow-hidden shrink-0 border border-white/5 relative bg-slate-800 p-0.5",children:[i.jsx("img",{src:ft(O.avatar,O.name,O.id),className:"w-full h-full object-cover rounded-[1.2rem]",alt:"Friend"}),L&&i.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-4 border-white bg-primary shadow-sm"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"flex justify-between items-start mb-1",children:i.jsx("h4",{className:"font-black text-white text-lg truncate group-hover:text-primary transition-colors",children:O.name})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-full ${L?"bg-primary/10 text-primary border border-primary/20":"bg-white/10 text-slate-300 border border-white/10"}`,children:L?"Active":"Offline"}),i.jsx("p",{className:"text-[11px] font-bold text-slate-400 truncate",children:"Tap to chat"})]})]}),i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 flex items-center justify-center text-slate-300 group-hover:bg-primary group-hover:text-slate-900 transition-all group-hover:rotate-12",children:i.jsx("span",{className:"material-symbols-rounded",children:"chat_bubble"})})]},z.id)})})]})]})}),i.jsx(ja,{isOpen:j.isOpen,title:"Success",message:j.message,buttonText:"OK",onClose:()=>E({isOpen:!1,message:""})}),i.jsx(qs,{isOpen:k.isOpen,title:"Error",message:k.message,confirmText:"OK",cancelText:"",type:"danger",onConfirm:()=>N({isOpen:!1,message:""}),onCancel:()=>N({isOpen:!1,message:""})})]})},n0=({currentUser:s,onlineUsers:a})=>{var N;const{friendshipId:n}=fr(),l=rt(),[c,u]=v.useState([]),[f,m]=v.useState(""),[p,x]=v.useState(!0),[g,y]=v.useState(null),j=v.useRef(null);v.useEffect(()=>{if(!n||!s)return;(async()=>{try{const{data:T}=await Y.from("friendships").select(`
                      *,
                      user:user_id (id, name, avatar, takwira_id, phone),
                      friend:friend_id (id, name, avatar, takwira_id, phone)
                    `).eq("id",n).single();T&&y(T.user_id===s.id?T.friend:T.user);const A=await Cj(n);u(A)}catch(T){console.error("Error loading chat:",T)}finally{x(!1)}})();const S=Y.channel(`chat:${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`friendship_id=eq.${n}`},T=>{u(A=>A.some(K=>K.id===T.new.id)?A:[...A,T.new])}).subscribe();return()=>{Y.removeChannel(S)}},[n,s]),v.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[c]);const E=async _=>{if(_.preventDefault(),!f.trim()||!n||!s)return;const S=f.trim();m("");const T="temp-"+Date.now(),A={id:T,friendship_id:n,sender_id:s.id,content:S,created_at:new Date().toISOString(),is_read:!1,isPending:!0};u(z=>[...z,A]);const{success:M,data:K}=await Oj(n,s.id,S);M?u(z=>z.map(O=>O.id===T?K:O)):(alert("Failed to send message"),u(z=>z.filter(O=>O.id!==T)))};if(p)return i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});const k=g&&((N=a[g.id])==null?void 0:N.status)==="online";return i.jsxs("div",{className:"fixed inset-0 bg-slate-950 flex flex-col z-[70] animate-in slide-in-from-right duration-500 font-sans",children:[i.jsxs("header",{className:"bg-slate-950/80 backdrop-blur-xl px-6 pt-[calc(3.5rem+env(safe-area-inset-top))] pb-4 border-b border-white/5 flex items-center gap-4 sticky top-0 z-40",children:[i.jsx("button",{onClick:()=>l(-1),className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 hover:text-white border border-white/5 shadow-lg transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"arrow_back_ios_new"})}),i.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-11 h-11 rounded-2xl overflow-hidden border-2 border-slate-900 shadow-sm bg-slate-800 p-0.5",children:i.jsx("img",{src:ft(g==null?void 0:g.avatar,g==null?void 0:g.name,g==null?void 0:g.id),className:"w-full h-full object-cover rounded-[0.9rem]",alt:"Avatar"})}),k&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-primary rounded-full border-4 border-white shadow-sm"})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-black text-white text-[15px] leading-tight tracking-tight",children:g==null?void 0:g.name}),i.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[i.jsx("span",{className:`w-1 h-1 rounded-full ${k?"bg-primary":"bg-slate-500"}`}),i.jsx("p",{className:`text-[9px] font-black uppercase tracking-widest ${k?"text-primary":"text-slate-500"}`,children:k?"Active Now":"Offline"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 border border-white/5 shadow-sm hover:bg-white/10 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"phone"})}),i.jsx("button",{className:"w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center text-slate-400 border border-white/5 shadow-sm hover:bg-white/10 hover:text-white transition-all",children:i.jsx("span",{className:"material-symbols-rounded",children:"videocam"})})]})]}),i.jsx("div",{ref:j,className:"flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth pb-32",children:c.length===0?i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40 grayscale space-y-6",children:[i.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-[2.5rem] flex items-center justify-center border border-white/5",children:i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500",children:"forum"})}),i.jsxs("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:["No messages yet.",i.jsx("br",{}),"Start talking strategy!"]})]}):c.map((_,S)=>{const T=_.sender_id===s.id,A=!T&&(S===0||c[S-1].sender_id!==_.sender_id);return i.jsxs("div",{className:`flex items-end gap-3 ${T?"flex-row-reverse animate-in slide-in-from-right duration-300":"flex-row animate-in slide-in-from-left duration-300"}`,children:[!T&&A?i.jsx("div",{className:"w-8 h-8 rounded-lg overflow-hidden shrink-0 border border-white/10 mb-1 bg-slate-800",children:i.jsx("img",{src:ft(g==null?void 0:g.avatar,g==null?void 0:g.name,g==null?void 0:g.id),className:"w-full h-full object-cover",alt:"Avatar"})}):T?null:i.jsx("div",{className:"w-8 shrink-0"}),i.jsxs("div",{className:`max-w-[80%] px-5 py-3.5 rounded-[2rem] shadow-sm relative transition-all hover:scale-[1.02] ${T?"bg-primary text-slate-900 rounded-br-none shadow-lg shadow-primary/10":"bg-white/10 backdrop-blur-md text-white rounded-bl-none border border-white/5"}`,children:[i.jsx("p",{className:"text-[13px] font-bold leading-relaxed",children:_.content}),i.jsxs("div",{className:`flex items-center gap-1 mt-1.5 opacity-40 ${T?"justify-end":"justify-start"}`,children:[i.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:new Date(_.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),T&&i.jsx("span",{className:"material-symbols-rounded text-[10px]",children:_.is_read?"done_all":"done"})]})]})]},_.id)})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 pb-[calc(1.5rem+env(safe-area-inset-bottom))] z-50 bg-gradient-to-t from-slate-950 via-slate-950 to-transparent",children:i.jsxs("form",{onSubmit:E,className:"max-w-md mx-auto flex gap-3 items-center bg-slate-900/90 backdrop-blur-xl p-2 rounded-[2rem] shadow-2xl border border-white/10",children:[i.jsx("button",{type:"button",className:"w-12 h-12 flex items-center justify-center text-slate-500 hover:text-primary transition-colors",children:i.jsx("span",{className:"material-symbols-rounded",children:"add_circle"})}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:f,onChange:_=>m(_.target.value),placeholder:"Type a message...",className:"w-full bg-white/5 border-none rounded-[1.5rem] py-3.5 px-5 text-sm font-bold focus:ring-2 focus:ring-primary/20 outline-none transition-all placeholder:text-slate-500 text-white"})}),i.jsx("button",{type:"submit",disabled:!f.trim(),className:"w-12 h-12 bg-slate-900 text-primary rounded-[1.4rem] flex items-center justify-center active:scale-95 transition-all shadow-lg shadow-slate-900/10 disabled:opacity-20 disabled:scale-100",children:i.jsx("span",{className:"material-symbols-rounded",children:"send"})})]})})]})},rr=mr("PushNotifications",{}),i0=async s=>{try{console.log(" [Push] Starting initialization for user:",s);let a=await rr.checkPermissions();return console.log(" [Push] Current permission status:",a),a.receive==="prompt"&&(console.log(" [Push] Requesting permissions..."),a=await rr.requestPermissions(),console.log(" [Push] Permission request result:",a)),a.receive!=="granted"?(console.warn(" [Push] Permission denied:",a),{success:!1,error:"Permission denied"}):(console.log(" [Push] Permission granted! Setting up listeners..."),await rr.addListener("registration",async n=>{console.log(" [Push]  Registration success! Token received:",n.value.substring(0,20)+"...");try{const l=await Kj(s,n.value);console.log(" [Push] Token save result:",l),l.success?console.log(" [Push]  Token successfully saved to database!"):console.error(" [Push]  Failed to save token:",l.error)}catch(l){console.error(" [Push]  Error saving token:",l)}}),await rr.addListener("registrationError",n=>{console.error(" [Push]  Registration error:",JSON.stringify(n))}),await rr.addListener("pushNotificationReceived",n=>{console.log(" [Push] Notification received while app open:",n)}),await rr.addListener("pushNotificationActionPerformed",n=>{console.log(" [Push] Notification tapped:",n.actionId),Yj(n)}),console.log(" [Push] Listeners set up. Now registering with FCM..."),await rr.register(),console.log(" [Push] Registration call completed. Waiting for token callback..."),{success:!0})}catch(a){return console.error(" [Push]  Error initializing push notifications:",a),{success:!1,error:a.message}}},Kj=async(s,a)=>{try{console.log(" [Push] Saving device token:",{userId:s,token:a.substring(0,20)+"..."});const{data:n,error:l}=await Y.from("device_tokens").select("id").eq("user_id",s).eq("token",a).maybeSingle();if(l&&console.error(" [Push] Error checking existing token:",l),n){console.log(" [Push] Token exists for this user, updating timestamp...");const{error:p}=await Y.from("device_tokens").update({last_used_at:new Date().toISOString()}).eq("id",n.id);return p?(console.error(" [Push] Error updating token:",p),{success:!1,error:p.message}):(console.log(" [Push] Token updated successfully"),{success:!0})}const{data:c,error:u}=await Y.from("device_tokens").select("id, user_id").eq("token",a).neq("user_id",s).maybeSingle();if(u&&console.error(" [Push] Error checking token for other users:",u),c){console.log(" [Push] Token exists for different user, updating to current user...");const{error:p}=await Y.from("device_tokens").update({user_id:s,last_used_at:new Date().toISOString()}).eq("id",c.id);return p?(console.error(" [Push] Error updating token user:",p),{success:!1,error:p.message}):(console.log(" [Push] Token reassigned to current user successfully"),{success:!0})}console.log(" [Push] Inserting new token...");const{data:f,error:m}=await Y.from("device_tokens").insert({user_id:s,token:a,platform:"android",last_used_at:new Date().toISOString()}).select();return m?(console.error(" [Push] Error inserting token:",m),{success:!1,error:m.message}):(console.log(" [Push] Token inserted successfully:",f),{success:!0,data:f})}catch(n){return console.error(" [Push] Error saving device token:",n),{success:!1,error:n.message}}},Yj=s=>{const a=s.notification.data;(a==null?void 0:a.type)==="lobby_invite"||(a==null?void 0:a.type)==="lobby_access_request"?window.location.href=`/#/spaces/lobby/${a.lobby_id}`:(a==null?void 0:a.type)==="friend_request"?window.location.href="/#/crew":window.location.href="/#/"},l0=({show:s,debugMsg:a})=>{const[n,l]=v.useState(!0);return v.useEffect(()=>{if(!s){const c=setTimeout(()=>l(!1),500);return()=>clearTimeout(c)}},[s]),n?i.jsxs("div",{className:`fixed inset-0 z-[9999] bg-slate-950 flex flex-col items-center justify-center transition-opacity duration-700 ease-in-out ${s?"opacity-100":"opacity-0"}`,children:[i.jsxs("div",{className:"relative flex flex-col items-center",children:[i.jsx("div",{className:"w-32 h-32 flex items-center justify-center mb-8 animate-bounce",children:i.jsx("img",{src:"/assets/logo-v2.png",alt:"Arena Logo",className:"w-full h-full object-contain"})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"flex items-center text-primary font-black text-5xl tracking-tighter animate-pulse uppercase",style:{fontFamily:"'Sakana', 'Plus Jakarta Sans', sans-serif"},children:"Larena"}),i.jsx("div",{className:"mt-2 text-white/90 font-bold text-[10px] uppercase tracking-[0.5em]",children:"Tunisian Football Bookings"})]}),i.jsx("div",{className:"mt-8 text-white/80 font-bold text-xs uppercase tracking-[0.3em] opacity-0 animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-500 fill-mode-forwards text-center px-6",children:a||"Your Game. Your Pitch."})]}),i.jsx("div",{className:"absolute bottom-12 left-12 right-12 h-1 bg-white/30 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary w-full origin-left animate-[loading_2.5s_ease-in-out_infinite]"})}),i.jsx("style",{children:`
        @keyframes loading {
          0% { transform: scaleX(0); }
          50% { transform: scaleX(0.7); }
          100% { transform: scaleX(1); }
        }
      `})]}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fj=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,n,l)=>l?l.toUpperCase():n.toLowerCase()),o0=s=>{const a=Fj(s);return a.charAt(0).toUpperCase()+a.slice(1)},ix=(...s)=>s.filter((a,n,l)=>!!a&&a.trim()!==""&&l.indexOf(a)===n).join(" ").trim(),Qj=s=>{for(const a in s)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=v.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:f,...m},p)=>v.createElement("svg",{ref:p,...Xj,width:a,height:a,stroke:s,strokeWidth:l?Number(n)*24/Number(a):n,className:ix("lucide",c),...!u&&!Qj(m)&&{"aria-hidden":"true"},...m},[...f.map(([x,g])=>v.createElement(x,g)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(s,a)=>{const n=v.forwardRef(({className:l,...c},u)=>v.createElement(Zj,{ref:u,iconNode:a,className:ix(`lucide-${Jj(o0(s))}`,`lucide-${s}`,l),...c}));return n.displayName=o0(s),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],e_=Ue("arrow-left",Wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lx=Ue("calendar",t_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],s_=Ue("car",a_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],n_=Ue("check",r_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ki=Ue("chevron-left",i_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],o_=Ue("chevron-right",l_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],u_=Ue("circle-check",c_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],h_=Ue("credit-card",d_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],m_=Ue("funnel",f_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],x_=Ue("heart",p_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],g_=Ue("layout-grid",b_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ox=Ue("map-pin",y_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],w_=Ue("map",v_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],__=Ue("phone",j_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c0=Ue("plus",N_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],k_=Ue("qr-code",S_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],T_=Ue("save",E_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],C_=Ue("school",A_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],R_=Ue("search",O_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],M_=Ue("share-2",D_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["path",{d:"m4 4 2.5 2.5",key:"uv2vmf"}],["path",{d:"M13.5 6.5a4.95 4.95 0 0 0-7 7",key:"frdkwv"}],["path",{d:"M15 5 5 15",key:"1ag8rq"}],["path",{d:"M14 17v.01",key:"eokfpp"}],["path",{d:"M10 16v.01",key:"14uyyl"}],["path",{d:"M13 13v.01",key:"1v1k97"}],["path",{d:"M16 10v.01",key:"5169yg"}],["path",{d:"M11 20v.01",key:"cj92p8"}],["path",{d:"M17 14v.01",key:"11cswd"}],["path",{d:"M20 11v.01",key:"19e0od"}]],q_=Ue("shower-head",L_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],cx=Ue("star",z_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],B_=Ue("target",U_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ux=Ue("trophy",$_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],H_=Ue("user",P_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],I_=Ue("users",G_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],K_=Ue("wifi",V_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],md=Ue("x",Y_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],td=Ue("zap",J_),F_=({isOpen:s,onClose:a,filters:n,setFilters:l,onApply:c})=>{if(!s)return null;const u=["Grass","3G","4G","Synthetic","Indoor"],f=["Parking","Cafe","Changing Rooms","Showers","Lighting","Wi-Fi"];return i.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col animate-in slide-in-from-bottom duration-300",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-slate-900 sticky top-0 z-10",children:[i.jsx("h2",{className:"text-xl font-black text-white",children:"Filters"}),i.jsx("button",{onClick:a,className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:i.jsx(md,{size:20,className:"text-slate-400"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-10 space-y-10 scroll-smooth pb-32",children:i.jsxs("div",{className:"space-y-10",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Max Distance"}),i.jsxs("span",{className:"text-primary font-black text-lg",children:[n.maxDistance," km"]})]}),i.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.maxDistance,onChange:m=>l({...n,maxDistance:parseInt(m.target.value)}),className:"w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"}),i.jsxs("p",{className:"text-[10px] text-slate-500 mt-2 font-medium italic",children:["Showing complexes within ",n.maxDistance,"km of your location."]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Max Price (per hour)"}),i.jsxs("span",{className:"text-primary font-black text-lg",children:[n.maxPrice," TND"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:n.maxPrice,onChange:m=>l({...n,maxPrice:parseInt(m.target.value)}),className:"w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer accent-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest block mb-4",children:"Minimum Rating"}),i.jsx("div",{className:"flex gap-2",children:[0,3,4,4.5].map(m=>i.jsx("button",{onClick:()=>l({...n,minRating:m}),className:`flex-1 py-3.5 rounded-2xl text-xs font-bold transition-all border ${n.minRating===m?"bg-primary text-slate-900 border-primary shadow-xl shadow-primary/20":"bg-white/5 text-slate-400 border-white/5 hover:border-white/20"}`,children:m===0?"Any":`${m}+ `},m))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest block mb-4",children:"Surface Type"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(m=>i.jsx("button",{onClick:()=>{const p=n.surfaces.includes(m)?n.surfaces.filter(x=>x!==m):[...n.surfaces,m];l({...n,surfaces:p})},className:`px-5 py-3 rounded-2xl text-xs font-bold transition-all border ${n.surfaces.includes(m)?"bg-primary text-slate-900 border-primary shadow-lg":"bg-white/5 text-slate-400 border-white/5 hover:border-white/20"}`,children:m},m))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest block mb-4",children:"Amenities"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.map(m=>i.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-2xl border transition-all cursor-pointer ${n.amenities.includes(m)?"bg-primary/10 border-primary/20":"bg-white/5 border-transparent hover:bg-white/10"}`,children:[i.jsx("input",{type:"checkbox",checked:n.amenities.includes(m),onChange:()=>{const p=n.amenities.includes(m)?n.amenities.filter(x=>x!==m):[...n.amenities,m];l({...n,amenities:p})},className:"w-5 h-5 rounded text-primary focus:ring-primary accent-primary border-slate-700 bg-slate-800"}),i.jsx("span",{className:`text-[11px] font-bold ${n.amenities.includes(m)?"text-primary":"text-slate-300"}`,children:m})]},m))})]})]})}),i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 px-6 pt-6 pb-[calc(1.5rem+env(safe-area-inset-bottom,20px))] bg-slate-900/95 backdrop-blur-md border-t border-white/5 flex gap-3 z-20",children:[i.jsx("button",{onClick:()=>{l({maxPrice:200,minRating:0,maxDistance:100,surfaces:[],amenities:[]}),c()},className:"flex-1 py-4.5 rounded-2xl text-[11px] font-black text-slate-400 border border-white/10 hover:bg-white/5 transition-all uppercase tracking-widest",children:"Reset"}),i.jsx("button",{onClick:()=>c(),className:"flex-[2] py-4.5 rounded-2xl text-[11px] font-black text-slate-900 bg-primary shadow-2xl shadow-primary/30 hover:scale-[1.02] active:scale-95 transition-all uppercase tracking-widest",children:"Apply Filters"})]})]})},Q_=({isOpen:s,onClose:a,userId:n})=>{const[l,c]=v.useState([]),[u,f]=v.useState(!0),m=rt();v.useEffect(()=>{s&&n&&(x(),p())},[s,n]);const p=async()=>{if(n)try{const{data:y}=await Y.from("friendships").select("id").eq("friend_id",n).eq("status","pending"),{data:j}=await Y.from("lobby_members").select("lobby_id, user_id").eq("user_id",n).eq("status","invited"),E=new Date;E.setDate(E.getDate()-7);const{data:k}=await Y.from("complexes").select("id").gte("created_at",E.toISOString()),{data:N}=await Y.from("pitches").select("id").gte("created_at",E.toISOString()),_=`seen_notifications_${n}`,T=[...JSON.parse(localStorage.getItem(_)||"[]")];(y||[]).forEach(M=>{T.includes(`friend_${M.id}`)||T.push(`friend_${M.id}`)}),(j||[]).forEach(M=>{const K=`lobby_${M.lobby_id}_${M.user_id}`;T.includes(K)||T.push(K)});const{data:A}=await Y.from("lobbies").select("id").eq("host_id",n);if(A&&A.length>0){const M=A.map(z=>z.id),{data:K}=await Y.from("lobby_members").select("lobby_id, user_id").eq("status","requested").in("lobby_id",M);(K||[]).forEach(z=>{const O=`lobby_request_${z.lobby_id}_${z.user_id}`;T.includes(O)||T.push(O)})}(k||[]).forEach(M=>{T.includes(`venue_${M.id}`)||T.push(`venue_${M.id}`)}),(N||[]).forEach(M=>{T.includes(`pitch_${M.id}`)||T.push(`pitch_${M.id}`)}),localStorage.setItem(_,JSON.stringify(T))}catch(y){console.error("Error marking notifications as seen:",y)}},x=async()=>{f(!0);try{const{data:y}=await Y.from("friendships").select("*, user:user_id(id, name, avatar)").eq("friend_id",n).eq("status","pending"),{data:j}=await Y.from("lobby_members").select("*, lobby:lobby_id(id, name), invited_by_user:invited_by(id, name)").eq("user_id",n).eq("status","invited"),{data:E}=await Y.from("lobbies").select("id").eq("host_id",n);let k=[];if(E&&E.length>0){const A=E.map(K=>K.id),{data:M}=await Y.from("lobby_members").select("*, lobby:lobby_id(id, name), user:user_id(id, name, avatar)").eq("status","requested").in("lobby_id",A);k=M||[]}const N=new Date;N.setDate(N.getDate()-7);const{data:_}=await Y.from("complexes").select("id, name, address, created_at").gte("created_at",N.toISOString()).order("created_at",{ascending:!1}).limit(10),{data:S}=await Y.from("pitches").select("id, name, sport_type, created_at, complexes(id, name)").gte("created_at",N.toISOString()).order("created_at",{ascending:!1}).limit(10),T=[...(y||[]).map(A=>({...A,type:"friend_request"})),...(j||[]).map(A=>({...A,type:"lobby_invite"})),...(k||[]).map(A=>({...A,type:"lobby_access_request"})),...(_||[]).map(A=>({...A,type:"new_venue"})),...(S||[]).map(A=>({...A,type:"new_pitch"}))].sort((A,M)=>new Date(M.created_at).getTime()-new Date(A.created_at).getTime());c(T)}catch(y){console.error("Error fetching notifications:",y)}finally{f(!1)}},g=async(y,j,E,k)=>{try{if(y==="friend_request")E==="accept"?await Y.from("friendships").update({status:"accepted"}).eq("id",j):await Y.from("friendships").delete().eq("id",j);else if(y==="lobby_invite"){const N=(k==null?void 0:k.lobby_id)||(j.includes("_")?j.split("_")[0]:null),_=(k==null?void 0:k.user_id)||(j.includes("_")?j.split("_")[1]:null);if(!N||!_){console.error("Missing lobby_id or user_id for lobby invite action");return}if(E==="accept"){const{error:S}=await Y.from("lobby_members").update({status:"joined"}).eq("lobby_id",N).eq("user_id",_);if(S)throw S}else{const{error:S}=await Y.from("lobby_members").delete().eq("lobby_id",N).eq("user_id",_);if(S)throw S}}else if(y==="lobby_access_request"){const N=(k==null?void 0:k.lobby_id)||(j.includes("_")?j.split("_")[0]:null),_=(k==null?void 0:k.user_id)||(j.includes("_")?j.split("_")[1]:null);if(!N||!_){console.error("Missing lobby_id or user_id for lobby access request action");return}if(E==="accept"){const{success:S,error:T}=await ed(N,_,"accepted",n);if(!S&&T)throw new Error(T)}else{const{success:S,error:T}=await ed(N,_,"declined",n);if(!S&&T)throw new Error(T)}}x(),window.dispatchEvent(new CustomEvent("notificationAction"))}catch(N){console.error("Error handling notification action:",N)}};return s?i.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-950/40 backdrop-blur-md animate-in fade-in duration-300",children:[i.jsx("div",{className:"absolute inset-0",onClick:a}),i.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-sm bg-slate-900 shadow-[0_0_100px_rgba(0,0,0,0.5)] animate-in slide-in-from-right duration-500 flex flex-col font-sans border-l border-white/5",children:[i.jsxs("div",{className:"p-8 pb-6 bg-slate-900 flex justify-between items-center border-b border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center text-primary",children:i.jsx("span",{className:"material-symbols-rounded text-2xl font-bold",children:"notifications_active"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-black text-white tracking-tighter uppercase",children:"Activity"}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[l.length," Pending Actions"]})]})]}),i.jsx("button",{onClick:a,className:"w-10 h-10 flex items-center justify-center bg-white/5 rounded-full text-slate-400 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4",children:u?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4 opacity-50",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full shadow-inner"}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest animate-pulse",children:"Scanning Pitch..."})]}):l.length===0?i.jsxs("div",{className:"text-center py-20 px-8 flex flex-col items-center",children:[i.jsx("div",{className:"bg-white/5 w-24 h-24 rounded-[3rem] flex items-center justify-center mb-6 shadow-inner border border-white/5",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-700",children:"inbox"})}),i.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest mb-2",children:"Zero Drift"}),i.jsxs("p",{className:"text-[10px] text-slate-400 font-bold leading-relaxed uppercase tracking-widest",children:["You're all caught up. ",i.jsx("br",{}),"Go join a match!"]})]}):l.map(y=>{const E=(()=>{var k,N,_,S,T,A,M;switch(y.type){case"friend_request":return{icon:"person_add",iconBg:"bg-blue-500/10 text-blue-500",badge:"Crew Invite",badgeColor:"bg-blue-50 text-blue-600",title:i.jsxs(i.Fragment,{children:[(k=y.user)==null?void 0:k.name," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"wants to join your crew"})]}),showActions:!0};case"lobby_invite":return{icon:"sports_soccer",iconBg:"bg-primary/10 text-primary",badge:"Lobby Invite",badgeColor:"bg-primary/20 text-primary-dark",title:i.jsxs(i.Fragment,{children:[(N=y.invited_by_user)==null?void 0:N.name," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"invited you to"})," ",(_=y.lobby)==null?void 0:_.name]}),showActions:!0};case"lobby_access_request":return{icon:"person_add",iconBg:"bg-amber-500/10 text-amber-500",badge:"Access Request",badgeColor:"bg-amber-500/20 text-amber-500",title:i.jsxs(i.Fragment,{children:[(S=y.user)==null?void 0:S.name," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"wants to join"})," ",(T=y.lobby)==null?void 0:T.name]}),subtitle:y.request_message,showActions:!0};case"new_venue":return{icon:"stadium",iconBg:"bg-emerald-500/10 text-emerald-500",badge:"New Venue",badgeColor:"bg-emerald-500/20 text-emerald-500",title:i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-white font-black",children:y.name})," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"just opened!"})]}),subtitle:y.address,showActions:!1,actionLabel:"View Venue",actionLink:`/complex/${y.id}`};case"new_pitch":return{icon:"sports_soccer",iconBg:"bg-purple-500/10 text-purple-500",badge:"New Pitch",badgeColor:"bg-purple-500/20 text-purple-500",title:i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-white font-black",children:y.name})," ",i.jsx("span",{className:"text-slate-400 font-bold",children:"added at"})," ",(A=y.complexes)==null?void 0:A.name]}),subtitle:y.sport_type?`${y.sport_type} pitch`:"New pitch available",showActions:!1,actionLabel:"View Complex",actionLink:`/complex/${(M=y.complexes)==null?void 0:M.id}`};default:return null}})();return E?i.jsx("div",{className:"group bg-white/5 p-5 rounded-[2.5rem] border border-white/5 shadow-lg transition-all duration-300 animate-in fade-in slide-in-from-bottom-4 hover:bg-white/10",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 transition-transform group-hover:scale-110 duration-500 ${E.iconBg}`,children:i.jsx("span",{className:"material-symbols-rounded text-2xl font-bold",children:E.icon})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-full ${E.badgeColor}`,children:E.badge}),i.jsx("span",{className:"text-[9px] text-slate-300 font-bold uppercase tracking-widest",children:new Date(y.created_at).toLocaleDateString()})]}),i.jsx("p",{className:"text-[12px] text-white font-black mb-1 leading-tight uppercase tracking-tight",children:E.title}),E.subtitle&&i.jsx("p",{className:"text-[10px] text-slate-400 font-bold mb-3",children:E.subtitle}),E.showActions?i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsxs("button",{onClick:()=>g(y.type,y.type==="lobby_invite"||y.type==="lobby_access_request"?`${y.lobby_id}_${y.user_id||y.user_id}`:y.id,"accept",y.type==="lobby_invite"||y.type==="lobby_access_request"?{lobby_id:y.lobby_id,user_id:y.user_id}:void 0),className:"flex-1 bg-primary text-slate-900 py-3 rounded-[1.2rem] text-[10px] font-black tracking-widest uppercase hover:bg-primary-dark transition-all active:scale-95 shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"material-symbols-rounded text-sm",children:"check"})," Accept"]}),i.jsx("button",{onClick:()=>g(y.type,y.type==="lobby_invite"||y.type==="lobby_access_request"?`${y.lobby_id}_${y.user_id||y.user_id}`:y.id,"decline",y.type==="lobby_invite"||y.type==="lobby_access_request"?{lobby_id:y.lobby_id,user_id:y.user_id}:void 0),className:"flex-[0.6] bg-white/5 text-slate-400 py-3 rounded-[1.2rem] text-[10px] font-black tracking-widest uppercase hover:bg-white/10 hover:text-white transition-all active:scale-95",children:"Ignore"})]}):i.jsxs("button",{onClick:()=>{E.actionLink&&(m(E.actionLink),a())},className:"w-full bg-primary text-slate-900 py-3 rounded-[1.2rem] text-[10px] font-black tracking-widest uppercase hover:bg-primary-dark transition-all active:scale-95 shadow-lg shadow-primary/20 flex items-center justify-center gap-2 mt-4",children:[i.jsx("span",{className:"material-symbols-rounded text-sm",children:"arrow_forward"})," ",E.actionLabel]})]})]})},y.id):null})}),i.jsx("div",{className:"p-8 bg-slate-900 border-t border-white/5",children:i.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl flex items-center gap-3 border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-primary text-xl",children:"tips_and_updates"}),i.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest leading-relaxed",children:"Pro Tip: Active players get 2x more lobby invitations."})]})})]})]}):null},X_=(s,a)=>`https://source.unsplash.com/featured/?football,pitch&${s}`,Z_=({onBack:s,showBackButton:a=!0,compact:n=!1,complexes:l,userLocation:c})=>{const u=rt(),[f,m]=v.useState(l||[]),[p,x]=v.useState(null),[g,y]=v.useState(!l||l.length===0),[j,E]=v.useState(c||null),[k,N]=v.useState(!1),_=v.useRef(null),[S,T]=v.useState(null),A=v.useRef(null);v.useEffect(()=>{const O=()=>typeof window<"u"&&window.L?(N(!0),!0):!1;if(!O()){let L=0;const q=50,re=setInterval(()=>{L++,(O()||L>=q)&&(clearInterval(re),L>=q&&y(!1))},100);return()=>clearInterval(re)}},[]),v.useEffect(()=>{k&&(l||M(),c||K())},[k,l,c]),v.useEffect(()=>{l&&(m(l),y(!1))},[l]),v.useEffect(()=>{c&&E(c)},[c]);const M=async()=>{await z()},K=async()=>{try{const O=await fd();E(O)}catch{E(null)}},z=async()=>{try{const O=await eo();if(j){const L=O.map(q=>({...q,distance:fi(j.lat,j.lng,q.location_lat,q.location_lng)})).sort((q,re)=>(q.distance||0)-(re.distance||0));m(L)}else m(O)}catch(O){console.error("Error fetching complexes:",O)}};return v.useEffect(()=>{if(!k||S||!_.current)return;const O=window.L;if(!O)return;const L=O.map(_.current,{zoomControl:!1,attributionControl:!1}).setView([36.8065,10.1815],12);return O.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(L),T(L),y(!1),()=>{L&&(L.remove(),T(null))}},[k]),v.useEffect(()=>{if(!S||!j||!window.L)return;const O=window.L;A.current&&S.removeLayer(A.current);const L=O.divIcon({className:"user-location-marker",html:'<div style="background-color: #3b82f6; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 0 8px rgba(59, 130, 246, 0.3); border: 3px solid white; animation: pulse 2s infinite;"><div style="background-color: white; border-radius: 50%; width: 12px; height: 12px;"></div></div>',iconSize:[24,24],iconAnchor:[12,12]});A.current=O.marker([j.lat,j.lng],{icon:L,zIndexOffset:1e3}).addTo(S),S.setView([j.lat,j.lng],15)},[j,S]),v.useEffect(()=>{if(!S||f.length===0||!window.L)return;const O=window.L;S.eachLayer(q=>{q instanceof O.Marker&&q!==A.current&&S.removeLayer(q)});const L=O.divIcon({className:"custom-marker",html:'<div style="background-color: #10b981; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); border: 3px solid white;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg></div>',iconSize:[32,32],iconAnchor:[16,32]});f.forEach(q=>{q.location_lat&&q.location_lng&&O.marker([q.location_lat,q.location_lng],{icon:L}).addTo(S).on("click",()=>x(q))})},[f,S]),i.jsxs("div",{className:`w-full bg-slate-950 relative overflow-hidden ${n?"h-[400px] rounded-[2rem]":"h-full"}`,children:[i.jsx("div",{ref:_,className:"absolute inset-0 z-0",style:{height:"100%",width:"100%"}}),a&&i.jsx("div",{className:"absolute top-12 left-4 z-[1000]",children:i.jsx("button",{onClick:s||(()=>u(-1)),className:"bg-slate-900/50 backdrop-blur-md p-3.5 rounded-2xl shadow-xl active:scale-90 transition-transform border border-white/10",children:i.jsx(ki,{size:24,className:"text-white"})})}),g&&i.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm z-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full shadow-lg"}),i.jsx("span",{className:"text-xs font-black text-primary tracking-widest uppercase",children:"Locating pitches..."})]})}),p&&i.jsx("div",{onClick:()=>u(`/complex/${p.id}`),className:"absolute bottom-6 left-4 right-4 bg-slate-900/90 backdrop-blur-xl rounded-[2.5rem] p-5 shadow-2xl z-[1000] border border-white/5 animate-in slide-in-from-bottom duration-300 cursor-pointer group active:scale-[0.98] transition-all",children:i.jsxs("div",{className:"flex gap-5",children:[i.jsx("img",{src:X_(p.id),className:"w-20 h-20 rounded-2xl object-cover shadow-lg group-hover:scale-105 transition-transform duration-500 border border-white/5",alt:p.name}),i.jsxs("div",{className:"flex-1 py-1",children:[i.jsx("h3",{className:"font-black text-lg text-white mb-1 leading-tight group-hover:text-primary transition-colors",children:p.name}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{className:"bg-primary text-slate-900 px-4 py-2 rounded-xl font-black text-[10px] shadow-lg shadow-primary/20 tracking-widest uppercase",children:"VIEW DETAILS"})})]})]})})]})},Uu={STADIUMS:["https://images.unsplash.com/photo-1574629810360-7efbbe195018?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1556056504-517cf0154970?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1508098682722-e99c43a406b2?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1522778119026-d647f0596c20?auto=format&fit=crop&q=80&w=1000"],PITCHES:["https://images.unsplash.com/photo-1529900245061-5ef6f24d2091?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1551958219-acbc608c6377?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1431324155629-1a6deb1dec8d?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1518091043644-c1d445ebb752?auto=format&fit=crop&q=80&w=1000"],INDOR:["https://images.unsplash.com/photo-1510566337590-2fc1f21d0faa?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1543326727-cf6c39e8f84c?auto=format&fit=crop&q=80&w=1000"]},ur=(s,a="pitch")=>{const n=s.split("").reduce((c,u)=>c+u.charCodeAt(0),0);let l=Uu.PITCHES;return a==="complex"&&(l=Uu.STADIUMS),a==="indoor"&&(l=Uu.INDOR),l[n%l.length]},W_=({user:s,pendingCount:a})=>{const[n,l]=v.useState("list"),[c,u]=v.useState([]),[f,m]=v.useState([]),[p,x]=v.useState(!0),[g,y]=v.useState(""),[j,E]=v.useState(!1),[k,N]=v.useState(!1),[_,S]=v.useState({maxPrice:200,minRating:0,maxDistance:100,surfaces:[],amenities:[]}),[T,A]=v.useState(0),[M,K]=v.useState(null),[z,O]=v.useState(0),[L,q]=v.useState(new Date().toISOString().split("T")[0]),[re,P]=v.useState("18:00"),[Q,oe]=v.useState(null),[ge,Ae]=v.useState(null),V=rt();v.useEffect(()=>{if(he(),s!=null&&s.id){se();const F=Y.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"friendships",filter:`friend_id=eq.${s.id}`},()=>{console.log(" Friend request notification change detected"),se()}).on("postgres_changes",{event:"*",schema:"public",table:"lobby_members",filter:`user_id=eq.${s.id}`},()=>{console.log(" Lobby invite notification change detected"),se()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"lobby_members",filter:"status=eq.requested"},async ae=>{var B;if(console.log(" Lobby access request notification change detected",ae),(B=ae.new)!=null&&B.lobby_id){const{data:ne}=await Y.from("lobbies").select("host_id").eq("id",ae.new.lobby_id).single();(ne==null?void 0:ne.host_id)===s.id&&(console.log(" Lobby access request is for your lobby, refreshing count"),se())}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"complexes"},()=>{console.log(" New complex notification change detected"),se()}).on("postgres_changes",{event:"INSERT",schema:"public",table:"pitches"},()=>{console.log(" New pitch notification change detected"),se()}).subscribe(),I=()=>{se()};return window.addEventListener("notificationAction",I),()=>{Y.removeChannel(F),window.removeEventListener("notificationAction",I)}}},[s==null?void 0:s.id]);const se=async()=>{if(s!=null&&s.id)try{const F=`seen_notifications_${s.id}`,I=JSON.parse(localStorage.getItem(F)||"[]"),{data:ae}=await Y.from("friendships").select("id").eq("friend_id",s.id).eq("status","pending"),B=(ae||[]).filter(et=>!I.includes(`friend_${et.id}`)).length;let ne=0;try{const{data:et,error:Wt}=await Y.from("lobby_members").select("lobby_id, user_id").eq("user_id",s.id).eq("status","invited");Wt?console.warn("Error fetching lobby invites for notifications:",Wt):ne=(et||[]).filter(Ot=>{const _a=`lobby_${Ot.lobby_id}_${Ot.user_id}`;return!I.includes(_a)}).length}catch(et){console.warn("Error processing lobby invites:",et)}let le=0;try{const{data:et,error:Wt}=await Y.from("lobbies").select("id").eq("host_id",s.id);if(Wt)console.warn("Error fetching user lobbies for notifications:",Wt);else if(et&&et.length>0){const Ot=et.map(Na=>Na.id),{data:_a,error:Rt}=await Y.from("lobby_members").select("lobby_id, user_id, request_message").eq("status","requested").in("lobby_id",Ot);Rt?console.warn("Error fetching lobby requests for notifications:",Rt):le=(_a||[]).filter(Na=>{const jt=`lobby_request_${Na.lobby_id}_${Na.user_id}`;return!I.includes(jt)}).length}}catch(et){console.warn("Error processing lobby requests:",et)}const ue=new Date;ue.setDate(ue.getDate()-7);const{data:me}=await Y.from("complexes").select("id, created_at").gte("created_at",ue.toISOString()),Be=(me||[]).filter(et=>!I.includes(`venue_${et.id}`)).length,{data:We}=await Y.from("pitches").select("id, created_at").gte("created_at",ue.toISOString()),lt=(We||[]).filter(et=>!I.includes(`pitch_${et.id}`)).length,Zt=B+ne+le,Ge=Math.min(Be+lt,5),ha=Zt+Ge;O(ha)}catch(F){console.error("Error fetching notification count:",F)}};v.useEffect(()=>{Q&&c.length>0&&(console.log(" User location updated, re-sorting",c.length,"complexes by distance"),pe(c))},[Q,c.length]),v.useEffect(()=>{if(f.length===0)return;(async()=>{let I=[...f];if(M){const{data:ae}=await Y.from("pitches").select("complex_id, sport_type").eq("sport_type",M),B=new Set((ae==null?void 0:ae.map(ne=>ne.complex_id))||[]);I=I.filter(ne=>B.has(ne.id))}if(g.trim()){const ae=g.toLowerCase();I=I.filter(B=>{var ne,le;return((ne=B.name)==null?void 0:ne.toLowerCase().includes(ae))||((le=B.address)==null?void 0:le.toLowerCase().includes(ae))||(B.amenities||[]).some(ue=>ue.toLowerCase().includes(ae))})}I=I.filter(ae=>!((ae.min_price||0)>_.maxPrice||_.minRating>0&&(ae.avg_rating||0)<_.minRating)),_.surfaces.length>0&&(I=I.filter(ae=>{const B=(ae.available_surfaces||[]).map(ne=>ne.toLowerCase());return _.surfaces.some(ne=>B.includes(ne.toLowerCase()))})),_.amenities.length>0&&(I=I.filter(ae=>{const B=(ae.amenities||[]).map(ne=>ne.toLowerCase());return _.amenities.every(ne=>B.includes(ne.toLowerCase()))})),Q&&_.maxDistance<100&&(I=I.filter(ae=>ae.location_lat&&ae.location_lng?fi(Q.lat,Q.lng,ae.location_lat,ae.location_lng)<=_.maxDistance:!0)),Q?pe(I):u(I)})()},[g,_,f,Q,M]);const he=async()=>{x(!0);const F=ce(),I=R();await Promise.all([F,I]),x(!1)},ce=async()=>{try{console.log(" Requesting location (Racing Strategy)...");const F=await fd();console.log(" Location settled:",F),oe(F),Ae(null)}catch(F){console.warn(" Location fallback active:",(F==null?void 0:F.message)||F)}},pe=F=>{var B,ne,le;if(!Q){u(F);return}const ae=F.map(ue=>{if(ue.location_lat&&ue.location_lng){const me=fi(Q.lat,Q.lng,ue.location_lat,ue.location_lng);return console.log(` Distance to ${ue.name}:`,me.toFixed(2),"km"),{...ue,distance:me}}return ue}).sort((ue,me)=>ue.distance!==void 0&&me.distance!==void 0?ue.distance-me.distance:ue.distance===void 0?1:me.distance===void 0?-1:0);console.log(" Complexes sorted by distance. Nearest:",(B=ae[0])==null?void 0:B.name,(le=(ne=ae[0])==null?void 0:ne.distance)==null?void 0:le.toFixed(2),"km"),u(ae)},R=async()=>{console.log(" Fetching complexes...");const F=await eo();console.log(" Complexes received:",F.length,F),m(F),Q?pe(F):u(F)},X=async F=>{x(!0);const I=F||_;let ae=f.length>0?f:await eo();f.length===0&&m(ae);let B=[...ae];if(g.trim()){const le=g.toLowerCase();B=B.filter(ue=>{var me,Be;return((me=ue.name)==null?void 0:me.toLowerCase().includes(le))||((Be=ue.address)==null?void 0:Be.toLowerCase().includes(le))||(ue.amenities||[]).some(We=>We.toLowerCase().includes(le))})}B=B.filter(le=>(le.min_price||0)<=I.maxPrice),I.minRating>0&&(B=B.filter(le=>(le.avg_rating||0)>=I.minRating)),I.surfaces.length>0&&(B=B.filter(le=>{const ue=(le.available_surfaces||[]).map(me=>me.toLowerCase());return I.surfaces.some(me=>ue.includes(me.toLowerCase()))})),I.amenities.length>0&&(B=B.filter(le=>{const ue=(le.amenities||[]).map(me=>me.toLowerCase());return I.amenities.every(me=>ue.includes(me.toLowerCase()))})),Q&&I.maxDistance<100&&(B=B.filter(le=>le.location_lat&&le.location_lng?fi(Q.lat,Q.lng,le.location_lat,le.location_lng)<=I.maxDistance:!0));let ne=0;I.maxPrice<200&&ne++,I.minRating>0&&ne++,I.maxDistance<100&&Q&&ne++,I.surfaces.length>0&&ne++,I.amenities.length>0&&ne++,console.log(` [FILTER] After filters: ${B.length} matches. Filters:`,I),A(ne),Q?pe(B):u(B),x(!1),N(!1)},ie=["Football","Padel","Tennis","Basketball"].filter(F=>F==="Football"||F==="Padel");return i.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] bg-slate-950 min-h-screen font-sans",children:[i.jsx(F_,{isOpen:k,onClose:()=>N(!1),filters:_,setFilters:S,onApply:X}),i.jsx(Q_,{isOpen:j,onClose:()=>{E(!1),se()},userId:s==null?void 0:s.id,pendingCount:a}),i.jsxs("header",{className:"px-6 pt-[calc(3rem+env(safe-area-inset-top))] pb-8 sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-start mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-60",children:[i.jsx("span",{className:"material-symbols-rounded text-sm text-primary",children:"location_on"}),i.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:Q?"Tunis, TN":"Locating..."})]}),i.jsxs("h1",{className:"text-3xl font-black tracking-tighter text-white leading-none",children:["Explore ",i.jsx("br",{})," ",i.jsx("span",{className:"text-primary italic",children:"Venues"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:F=>{F.stopPropagation(),E(!0)},className:"relative w-12 h-12 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all active:scale-95 group",children:[i.jsx("span",{className:"material-symbols-rounded text-slate-300 group-hover:text-primary transition-colors",children:"notifications"}),z>0&&i.jsx("div",{className:"absolute -top-1 -right-1 min-w-[20px] h-5 bg-rose-500 rounded-full border-2 border-slate-900 flex items-center justify-center px-1.5 animate-pulse",children:i.jsx("span",{className:"text-[10px] font-black text-white",children:z>99?"99+":z})})]}),i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>V("/profile"),children:[i.jsx("div",{className:"w-16 h-16 rounded-[2rem] overflow-hidden border-2 border-white shadow-2xl ring-4 ring-primary/5 group-hover:rotate-6 group-hover:scale-105 transition-all duration-500 bg-slate-800",children:i.jsx("img",{src:ft(s==null?void 0:s.avatar,s==null?void 0:s.name,s==null?void 0:s.id),alt:"Profile",className:"w-full h-full object-cover"})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-slate-900 rounded-full flex items-center justify-center border-2 border-white shadow-lg shadow-black/20",children:i.jsx("span",{className:"material-symbols-rounded text-primary text-[14px]",children:"bolt"})})]})]})]}),i.jsxs("div",{className:"relative group mt-2",children:[i.jsx("span",{className:"material-symbols-rounded absolute left-5 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-primary transition-all duration-300",children:"search"}),i.jsx("input",{type:"text",placeholder:"Search venue or sport...",className:"w-full h-14 pl-12 pr-14 rounded-[1.5rem] bg-white/5 border border-white/5 shadow-inner text-sm font-bold focus:ring-2 focus:ring-primary/20 focus:border-primary/30 text-white transition-all placeholder:text-slate-600",value:g,onChange:F=>y(F.target.value)}),i.jsxs("button",{onClick:()=>N(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center bg-primary rounded-[1rem] text-slate-900 shadow-xl shadow-primary/10 active:scale-90 hover:bg-primary-light transition-all",children:[i.jsx("span",{className:"material-symbols-rounded text-lg",children:"tune"}),T>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-rose-500 text-white text-[8px] font-black w-4 h-4 rounded-full flex items-center justify-center border-2 border-slate-900",children:T})]})]})]}),i.jsxs("main",{className:"animate-in fade-in duration-700",children:[i.jsx("div",{className:"px-6 mt-2 mb-6",children:i.jsxs("div",{className:"flex bg-white/5 rounded-2xl p-1 shadow-inner border border-white/5",children:[i.jsxs("button",{onClick:()=>l("list"),className:`flex-1 py-3 rounded-xl text-[10px] font-black tracking-widest uppercase transition-all flex items-center justify-center gap-2 ${n==="list"?"bg-primary text-slate-900 shadow-lg shadow-primary/10":"text-slate-500 hover:text-slate-300"}`,children:[i.jsx(g_,{size:16})," List"]}),i.jsxs("button",{onClick:()=>l("map"),className:`flex-1 py-3 rounded-xl text-[10px] font-black tracking-widest uppercase transition-all flex items-center justify-center gap-2 ${n==="map"?"bg-primary text-slate-900 shadow-lg shadow-primary/10":"text-slate-500 hover:text-slate-300"}`,children:[i.jsx(w_,{size:16})," Map"]})]})}),n==="list"?i.jsxs(i.Fragment,{children:[i.jsxs("section",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between items-end px-6 mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-white",children:"Popular Sports"}),i.jsx("button",{className:"text-primary text-sm font-semibold hover:opacity-80 transition-opacity",children:"View All"})]}),i.jsx("div",{className:"flex overflow-x-auto gap-4 px-6 no-scrollbar pb-2",children:ie.map(F=>i.jsx("div",{onClick:()=>K(M===F?null:F),className:`flex-none w-44 relative group cursor-pointer active:scale-95 transition-all ${M===F?"ring-4 ring-primary rounded-[2rem]":""}`,children:i.jsxs("div",{className:"aspect-[3/4] rounded-[2rem] overflow-hidden relative shadow-lg",children:[i.jsx("img",{alt:F,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",src:F==="Football"?"https://images.unsplash.com/photo-1574629810360-7efbbe195018?auto=format&fit=crop&q=80&w=1000":"https://images.unsplash.com/photo-1543326727-cf6c39e8f84c?auto=format&fit=crop&q=80&w=1000"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/90 via-transparent to-transparent"}),i.jsxs("div",{className:"absolute bottom-5 left-5",children:[i.jsx("span",{className:`text-black text-[10px] font-bold px-2 py-1 rounded-full uppercase mb-2 inline-block ${F==="Football"?"bg-primary":"bg-blue-400 text-white"}`,children:F==="Football"?"Popular":"Trending"}),i.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:F})]}),M===F&&i.jsx("div",{className:"absolute top-3 right-3 bg-primary text-slate-900 w-8 h-8 rounded-full flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"material-symbols-rounded text-lg",children:"check"})})]})},F))})]}),i.jsx("section",{className:"mt-8 px-6",children:i.jsxs("div",{onClick:()=>V("/academies"),className:"relative bg-gradient-to-br from-primary via-primary-light to-secondary p-8 rounded-[2.5rem] overflow-hidden group cursor-pointer shadow-2xl shadow-primary/20 active:scale-[0.98] transition-all",children:[i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/20 rounded-full blur-3xl -mr-32 -mt-32 animate-pulse"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-secondary/30 rounded-full blur-2xl -ml-16 -mb-16"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"material-symbols-rounded text-slate-900 bg-white/30 p-1.5 rounded-lg text-sm",children:"school"}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-900/60",children:"New Feature"})]}),i.jsxs("h3",{className:"text-3xl font-black text-slate-950 leading-tight mb-2 tracking-tighter",children:["Join the ",i.jsx("br",{}),i.jsx("span",{className:"italic",children:"Elite Academy"})]}),i.jsx("p",{className:"text-slate-900/60 text-xs font-bold mb-6 max-w-[200px]",children:"Professional training for kids aged 5 to 16. Join today!"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-950 font-black text-[10px] uppercase tracking-widest",children:["Explore Now",i.jsx("span",{className:"material-symbols-rounded text-sm group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]})]})}),i.jsxs("section",{className:"mt-6 px-6 pb-10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-black text-white tracking-tighter uppercase",children:["Nearby ",i.jsx("span",{className:"text-primary italic",children:"Venues"})]}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Recommended for you"})]}),i.jsx("button",{onClick:()=>l("map"),className:"w-12 h-12 rounded-2xl bg-white/5 border border-white/5 flex items-center justify-center text-slate-400 hover:text-primary transition-all shadow-lg active:scale-90",children:i.jsx("span",{className:"material-symbols-rounded",children:"map"})})]}),p?i.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>i.jsx("div",{className:"h-32 bg-white/5 rounded-[2.5rem] animate-pulse border border-white/5 shadow-sm"},F))}):i.jsx("div",{className:"space-y-6",children:c.map(F=>{var B;const I=Ls(F.images,F.image),ae=I[0]?I[0].startsWith("http")?I[0]:Ms("complex-images",`${F.id}/${I[0]}`):ur(F.id,"complex");return i.jsx("div",{onClick:()=>V(`/complex/${F.id}`),className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[2.5rem] border border-white/5 shadow-lg transition-all active:scale-[0.98] cursor-pointer hover:bg-slate-900 group relative overflow-hidden",children:i.jsxs("div",{className:"flex gap-5 items-center",children:[i.jsx("div",{className:"w-24 h-24 rounded-[2rem] overflow-hidden bg-slate-800 shrink-0 border border-white/5 p-0.5",children:i.jsx("img",{alt:F.name,className:"w-full h-full object-cover rounded-[1.8rem] group-hover:scale-110 transition-transform duration-700 opacity-90 group-hover:opacity-100",src:ae})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("h4",{className:"font-black text-lg leading-tight text-white truncate group-hover:text-primary transition-colors",children:F.name}),i.jsxs("div",{className:"flex items-center gap-1 bg-primary/10 text-primary px-2.5 py-1 rounded-full border border-primary/20",children:[i.jsx("span",{className:"material-symbols-rounded text-[14px] fill-1",children:"star"}),i.jsx("span",{className:"text-[10px] font-black",children:F.avg_rating||"4.8"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"material-symbols-rounded text-slate-500 text-sm",children:"location_on"}),i.jsx("span",{className:"text-[11px] font-bold text-slate-400 truncate",children:((B=F.address)==null?void 0:B.split(",").slice(0,1))||"Tunis"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-1.5",children:Ls(F.sports||["Football"]).slice(0,2).map((ne,le)=>i.jsx("span",{className:"text-[8px] font-black bg-white/5 text-slate-300 px-2.5 py-1 rounded-lg uppercase tracking-widest border border-white/5",children:ne},le))}),F.distance!==void 0&&i.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:[F.distance.toFixed(1)," km"]})]})]})]})},F.id)})})]})]}):i.jsx("div",{className:"h-[calc(100vh-280px)] mx-8 rounded-3xl overflow-hidden border border-slate-100 shadow-2xl relative animate-in zoom-in-95 duration-500",children:i.jsx(Z_,{onBack:()=>l("list"),showBackButton:!1,complexes:c,userLocation:Q})}),ge&&i.jsxs("div",{className:"mx-8 mt-4 p-4 bg-amber-50 rounded-3xl border border-amber-100 flex items-center gap-4 animate-in slide-in-from-top-4 duration-300",children:[i.jsx("div",{className:"bg-amber-100 p-2.5 rounded-2xl text-amber-600",children:i.jsx("span",{className:"material-symbols-rounded",children:"location_off"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs font-black text-amber-900 uppercase tracking-tight",children:"Location off"}),i.jsx("p",{className:"text-[10px] text-amber-700 leading-tight",children:"Enable GPS for precise distance."})]}),i.jsx("button",{onClick:ce,className:"bg-amber-500 text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase shadow-lg shadow-amber-500/20 active:scale-95 transition-transform",children:"Retry"})]})]}),i.jsx("div",{className:"h-10"})]})},eN=({status:s,message:a})=>{const n=rt(),[l,c]=v.useState(5);return v.useEffect(()=>{if(s==="success"){const u=setInterval(()=>{c(f=>f<=1?(clearInterval(u),n("/"),0):f-1)},1e3);return()=>clearInterval(u)}},[s,n]),i.jsx("div",{className:"min-h-screen bg-background-light flex items-center justify-center p-8 font-sans",children:i.jsxs("div",{className:"bg-white rounded-[4rem] shadow-2xl p-10 max-w-md w-full text-center border border-slate-50 overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-primary/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),s==="verifying"&&i.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsxs("div",{className:"bg-slate-50 w-24 h-24 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 relative",children:[i.jsx("div",{className:"absolute inset-0 border-4 border-primary border-t-transparent rounded-[2.5rem] animate-spin"}),i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-300",children:"hourglass_empty"})]}),i.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2 tracking-tighter uppercase",children:"Verifying"}),i.jsx("p",{className:"text-slate-400 text-[11px] font-bold uppercase tracking-widest leading-relaxed",children:"Securing your identity... Please wait a moment."})]}),s==="success"&&i.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsx("div",{className:"bg-primary w-24 h-24 rounded-[3rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-primary/20 animate-bounce-short",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-900 font-bold",children:"verified"})}),i.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-3 tracking-tighter uppercase",children:"Goal Reached! "}),i.jsx("p",{className:"text-slate-500 text-[13px] font-bold leading-relaxed mb-8",children:"Your email is confirmed. Your Larena journey officially starts now."}),i.jsx("div",{className:"bg-slate-50 rounded-[2rem] p-5 mb-8 border border-slate-100 group",children:i.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-[0.2em] group-hover:text-primary-dark transition-colors",children:["Redirecting to Pitch in ",i.jsx("span",{className:"text-slate-900 text-lg tabular-nums mx-1",children:l})," s"]})}),i.jsx("button",{onClick:()=>n("/"),className:"w-full bg-slate-900 text-white font-black py-5 rounded-[1.8rem] shadow-2xl shadow-slate-900/20 hover:bg-black transition-all active:scale-95 text-[11px] uppercase tracking-[0.2em]",children:"Enter Arena"})]}),s==="error"&&i.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in-95 duration-500",children:[i.jsx("div",{className:"bg-rose-50 w-24 h-24 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 border-2 border-rose-100",children:i.jsx("span",{className:"material-symbols-rounded text-5xl text-rose-500",children:"report"})}),i.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-3 tracking-tighter uppercase",children:"Timeout"}),i.jsx("p",{className:"text-slate-400 text-[13px] font-bold leading-relaxed mb-8",children:a||"The verification link has expired or is invalid. Please try signing in again."}),i.jsx("button",{onClick:()=>n("/"),className:"w-full bg-slate-900 text-white font-black py-5 rounded-[1.8rem] shadow-2xl shadow-slate-900/10 hover:bg-black transition-all active:scale-95 text-[11px] uppercase tracking-[0.2em]",children:"Back to Base"})]})]})})},u0=()=>{const[s,a]=v.useState("verifying"),[n,l]=v.useState("");return v.useEffect(()=>{const c=window.location.hash;if(c.includes("type=signup"))a("success");else if(c.includes("error")){a("error");const u=c.match(/error_description=([^&]*)/);u&&l(decodeURIComponent(u[1]))}else setTimeout(()=>a("success"),1500)},[]),i.jsx(eN,{status:s,message:n})},tN=({pendingCount:s})=>{const a=La(),n=c=>a.pathname===c;return["/pitch/","/chat/","/lobby/","/team/","/owner/bookings/","/owner/pitches/"].some(c=>a.pathname.startsWith(c))?null:i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"fixed bottom-[calc(2rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 w-[92%] max-w-[420px] bg-slate-900/98 backdrop-blur-2xl rounded-[2.5rem] py-2 px-1.5 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] z-50 flex justify-around items-center border border-white/5",children:[i.jsxs(Rs,{to:"/",className:`flex items-center justify-center gap-1.5 px-3 py-2.5 rounded-full transition-all duration-300 relative group ${n("/")?"bg-primary text-slate-900 shadow-lg shadow-primary/20 flex-[1.4]":"text-slate-500 hover:text-white flex-1"}`,children:[i.jsx("span",{className:`material-symbols-rounded text-[22px] ${n("/")?"fill-1":""}`,children:"home"}),n("/")&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest animate-in fade-in zoom-in duration-300",children:"Home"}),!n("/")&&i.jsx("div",{className:"absolute -top-1.5 w-1 h-1 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]}),i.jsxs(Rs,{to:"/spaces",className:`flex items-center justify-center gap-1.5 px-3 py-2.5 rounded-full transition-all duration-300 relative group ${n("/spaces")?"bg-primary text-slate-900 shadow-lg shadow-primary/20 flex-[1.4]":"text-slate-500 hover:text-white flex-1"}`,children:[i.jsx("span",{className:`material-symbols-rounded text-[22px] ${n("/spaces")?"fill-1":""}`,children:"stadium"}),n("/spaces")&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest animate-in fade-in zoom-in duration-300",children:"Spaces"}),!n("/spaces")&&i.jsx("div",{className:"absolute -top-1.5 w-1 h-1 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]}),i.jsxs(Rs,{to:"/social",className:`flex items-center justify-center gap-1.5 px-3 py-2.5 rounded-full transition-all duration-300 relative group ${n("/social")?"bg-primary text-slate-900 shadow-lg shadow-primary/20 flex-[1.4]":"text-slate-500 hover:text-white flex-1"}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:`material-symbols-rounded text-[22px] ${n("/social")?"fill-1":""}`,children:"groups"}),s>0&&i.jsx("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-rose-500 rounded-full border-2 border-slate-900 flex items-center justify-center animate-pulse shadow-lg shadow-rose-500/50 z-10",children:i.jsx("span",{className:"text-[9px] font-black text-white px-0.5",children:s>99?"99+":s})})]}),n("/social")&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest animate-in fade-in zoom-in duration-300",children:"Crew"}),!n("/social")&&i.jsx("div",{className:"absolute -top-1.5 w-1 h-1 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]}),i.jsxs(Rs,{to:"/academies",className:`flex items-center justify-center gap-1.5 px-3 py-2.5 rounded-full transition-all duration-300 relative group ${n("/academies")?"bg-primary text-slate-900 shadow-lg shadow-primary/20 flex-[1.4]":"text-slate-500 hover:text-white flex-1"}`,children:[i.jsx("span",{className:`material-symbols-rounded text-[22px] ${n("/academies")?"fill-1":""}`,children:"school"}),n("/academies")&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest animate-in fade-in zoom-in duration-300",children:"Academy"}),!n("/academies")&&i.jsx("div",{className:"absolute -top-1.5 w-1 h-1 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]}),i.jsxs(Rs,{to:"/profile",className:`flex items-center justify-center gap-1.5 px-3 py-2.5 rounded-full transition-all duration-300 relative group ${n("/profile")?"bg-primary text-slate-900 shadow-lg shadow-primary/20 flex-[1.4]":"text-slate-500 hover:text-white flex-1"}`,children:[i.jsx("span",{className:`material-symbols-rounded text-[22px] ${n("/profile")?"fill-1":""}`,children:"person"}),n("/profile")&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest animate-in fade-in zoom-in duration-300",children:"You"}),!n("/profile")&&i.jsx("div",{className:"absolute -top-1.5 w-1 h-1 bg-primary rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})]})]}),i.jsx("div",{className:"h-32 mb-safe bg-transparent"})]})},dx=({isOpen:s,images:a,currentIndex:n,collectionName:l,recordId:c,onClose:u,onNext:f,onPrevious:m})=>{const[p,x]=v.useState(0),[g,y]=v.useState(0);v.useEffect(()=>{if(!s)return;const T=A=>{A.key==="Escape"?u():A.key==="ArrowLeft"?m():A.key==="ArrowRight"&&f()};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[s,u,f,m]);const j=T=>{x(T.targetTouches[0].clientX)},E=T=>{y(T.targetTouches[0].clientX)},k=()=>{if(!p||!g)return;const T=p-g,A=T>50,M=T<-50;A&&n<a.length-1&&f(),M&&n>0&&m()};if(!s||a.length===0)return null;const N=a[n],_=()=>l==="complexes"||l==="complexes_coll"?"complex-images":l==="pitches"||l==="pitches_coll"?"pitch-images":"uploads",S=N.startsWith("http")?N:Ms(_(),`${c}/${N}`);return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900/95 backdrop-blur-2xl flex items-center justify-center font-sans animate-in fade-in duration-300",children:[i.jsxs("div",{className:"absolute top-0 inset-x-0 p-8 flex items-center justify-between z-50",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em]",children:"Gallery"}),i.jsx("h3",{className:"text-white font-black text-sm uppercase tracking-tighter",children:a.length>1?`Shot ${n+1} of ${a.length}`:"Legacy View"})]}),i.jsx("button",{onClick:u,className:"w-14 h-14 flex items-center justify-center bg-white/10 hover:bg-white/20 text-white rounded-[1.5rem] transition-all active:scale-90 border border-white/10 shadow-lg backdrop-blur-md",children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"close"})})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-between p-6 pointer-events-none",children:a.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:T=>{T.stopPropagation(),m()},disabled:n===0,className:`w-16 h-16 flex items-center justify-center bg-white/5 text-white rounded-[2rem] transition-all border border-white/5 backdrop-blur-sm pointer-events-auto ${n===0?"opacity-0 scale-90":"hover:bg-white/10 hover:scale-110 active:scale-90 shadow-2xl"}`,children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"arrow_back_ios_new"})}),i.jsx("button",{onClick:T=>{T.stopPropagation(),f()},disabled:n===a.length-1,className:`w-16 h-16 flex items-center justify-center bg-white/5 text-white rounded-[2rem] transition-all border border-white/5 backdrop-blur-sm pointer-events-auto ${n===a.length-1?"opacity-0 scale-90":"hover:bg-white/10 hover:scale-110 active:scale-90 shadow-2xl"}`,children:i.jsx("span",{className:"material-symbols-rounded text-3xl",children:"arrow_forward_ios"})})]})}),i.jsx("div",{className:"w-full h-full flex items-center justify-center p-8 active:cursor-grabbing",onTouchStart:j,onTouchMove:E,onTouchEnd:k,onClick:u,children:i.jsx("div",{className:"relative group max-w-6xl w-full h-full flex items-center justify-center",onClick:T=>T.stopPropagation(),children:i.jsx("img",{src:S,alt:"Venue Shot",className:"max-w-full max-h-full object-contain rounded-[2rem] shadow-[0_0_100px_rgba(0,0,0,0.5)] select-none animate-in zoom-in-95 duration-500 ease-out",draggable:!1})})}),i.jsxs("div",{className:"absolute bottom-12 inset-x-0 flex flex-col items-center gap-4 z-50 pointer-events-none",children:[a.length>1&&i.jsx("div",{className:"px-6 py-3 bg-white/10 backdrop-blur-xl border border-white/10 rounded-full flex gap-3 shadow-2xl pointer-events-auto",children:a.map((T,A)=>i.jsx("div",{className:`h-1.5 transition-all duration-300 rounded-full ${A===n?"w-8 bg-primary":"w-1.5 bg-white/20"}`},A))}),i.jsxs("div",{className:"flex items-center gap-2 text-white/40 text-[9px] font-black uppercase tracking-[0.3em] bg-black/20 px-4 py-2 rounded-full backdrop-blur-md",children:[i.jsx("span",{className:"material-symbols-rounded text-xs",children:"swipe"}),"Swipe to explore"]})]})]})},aN=({user:s})=>{var re;const{id:a}=fr(),n=rt(),[l,c]=v.useState(null),[u,f]=v.useState([]),[m,p]=v.useState(!0),[x,g]=v.useState(!1),[y,j]=v.useState(0),[E,k]=v.useState([]),[N,_]=v.useState(!1),[S,T]=v.useState({rating:5,comment:""}),[A,M]=v.useState(!1);v.useEffect(()=>{a&&(K(),z())},[a]);const K=async()=>{p(!0);const P=await sx(a),Q=await Wu(a);c(P),f(Q),p(!1)},z=async()=>{const P=await Sj(a);k(P)},O=async P=>{if(P.preventDefault(),!l||!s)return;_(!0),(await kj({complex_id:l.id,user_id:s.id,rating:S.rating,comment:S.comment})).success?(T({rating:5,comment:""}),M(!1),z(),K()):alert("Error submitting review. Please try again."),_(!1)},L=(P,Q,oe)=>wi(P,Q,oe,Ms);if(m)return i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"animate-ping absolute inset-0 bg-primary/20 rounded-full"}),i.jsx("div",{className:"bg-primary/10 p-6 rounded-full border border-primary/20 relative",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary animate-pulse",children:"stadium"})})]})});if(!l)return i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-6",children:i.jsx("div",{className:"text-center group",children:i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl p-8 rounded-[3rem] shadow-sm border border-white/5 mb-6 group-hover:shadow-xl transition-all duration-500",children:[i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-300 mb-4",children:"search_off"}),i.jsx("p",{className:"text-white font-extrabold text-xl mb-1 tracking-tight",children:"Complex not found"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"This venue might have been moved or removed."}),i.jsx("button",{onClick:()=>n("/"),className:"w-full bg-primary text-slate-900 py-4 rounded-2xl font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 active:scale-95 transition-all",children:"Discover Venues"})]})})});const q=Ls(l.images,l.image);return i.jsxs("div",{className:"bg-slate-950 min-h-screen pb-[calc(9rem+env(safe-area-inset-bottom))] font-sans text-white",children:[i.jsxs("div",{className:"relative h-[450px] overflow-hidden",children:[q.length>0?i.jsx("img",{src:L(q[0],"complex-images",l.id),alt:l.name,className:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform duration-[2s] ease-out",onClick:()=>{j(0),g(!0)},onError:P=>{console.error("Failed to load banner image:",q[0]),P.currentTarget.src=ur(l.id,"complex")}}):i.jsx("img",{src:ur(l.id,"complex"),alt:l.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-x-0 bottom-0 h-2/3 bg-gradient-to-t from-slate-950 via-slate-950/40 to-transparent"}),i.jsx("button",{onClick:()=>n(-1),className:"absolute top-[calc(3rem+env(safe-area-inset-top))] left-6 w-12 h-12 bg-white/10 backdrop-blur-xl flex items-center justify-center rounded-2xl text-white border border-white/10 shadow-2xl active:scale-90 transition-all z-30",children:i.jsx("span",{className:"material-symbols-rounded",children:"arrow_back_ios_new"})}),i.jsxs("div",{className:"absolute bottom-16 left-8 right-8 z-30",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.jsx("span",{className:"bg-primary/20 backdrop-blur-md text-primary font-black text-[9px] px-3 py-1 rounded-full uppercase tracking-widest border border-primary/20",children:"Top Rated"}),i.jsx("span",{className:"bg-white/10 backdrop-blur-md text-white font-black text-[9px] px-3 py-1 rounded-full uppercase tracking-widest border border-white/10",children:"Verified"})]}),i.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter mb-2 leading-none",children:l.name}),i.jsxs("div",{className:"flex items-center text-slate-400 text-xs font-bold gap-2",children:[i.jsx("span",{className:"material-symbols-rounded text-sm text-primary",children:"location_on"}),i.jsx("span",{className:"truncate",children:((re=l.address)==null?void 0:re.split(",").slice(0,2).join(","))||"Tunis, Tunisia"})]})]})]}),i.jsxs("div",{className:"px-8 -mt-8 relative z-30 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[2.5rem] shadow-sm border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("div",{className:"w-8 h-8 rounded-xl bg-primary/10 flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-rounded text-primary text-lg",children:"star"})}),i.jsx("span",{className:"text-xl font-black text-white leading-none",children:l.avg_rating||"0.0"})]}),i.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-11",children:["Rating (",E.length,")"]})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[2.5rem] shadow-sm border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("div",{className:"w-8 h-8 rounded-xl bg-blue-500/10 flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-rounded text-blue-500 text-lg",children:"near_me"})}),i.jsx("span",{className:"text-xl font-black text-white leading-none",children:"1.2 km"})]}),i.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-11",children:"Nearby"})]})]}),i.jsxs("div",{className:"bg-slate-900 p-8 rounded-[3rem] text-white shadow-2xl relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full -mr-16 -mt-16 blur-3xl group-hover:bg-primary/20 transition-all duration-700"}),i.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-primary mb-3",children:"About Venue"}),i.jsx("p",{className:"text-sm font-medium leading-relaxed opacity-90",children:l.description||"Premium sports destination featuring professional-grade pitches, modern amenities, and a vibrant community of athletes in Tunis."}),i.jsxs("div",{className:"mt-6 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary/80",children:"Available Today"})]})]}),i.jsxs("div",{className:"space-y-4",children:[l.facilities&&l.facilities.length>0&&i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl p-6 rounded-[2.5rem] shadow-sm border border-white/5",children:[i.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4",children:"Top Facilities"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:l.facilities.map((P,Q)=>i.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-xl text-[10px] font-black text-slate-300 border border-white/5 flex items-center gap-2 hover:bg-primary hover:text-slate-900 transition-all cursor-default",children:[i.jsx("span",{className:"material-symbols-rounded text-xs",children:"check_circle"}),P]},Q))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.phone&&i.jsxs("a",{href:`tel:${l.phone}`,className:"bg-slate-900/50 backdrop-blur-xl p-4 rounded-3xl flex items-center justify-center gap-3 border border-white/5 shadow-sm hover:border-primary transition-all group",children:[i.jsx("span",{className:"material-symbols-rounded text-slate-400 group-hover:text-primary transition-colors",children:"call"}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-300",children:"Call Now"})]}),i.jsxs("button",{onClick:()=>M(!0),className:"bg-slate-900/50 backdrop-blur-xl p-4 rounded-3xl flex items-center justify-center gap-3 border border-white/5 shadow-sm hover:border-primary transition-all group",children:[i.jsx("span",{className:"material-symbols-rounded text-slate-400 group-hover:text-primary transition-colors",children:"edit_note"}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-300",children:"Write Review"})]})]})]}),q.length>1&&i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:"Photo Gallery"}),i.jsxs("button",{onClick:()=>{j(0),g(!0)},className:"text-primary text-[10px] font-black uppercase tracking-widest hover:text-primary/80 transition-colors",children:["View All (",q.length,")"]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[q.slice(1,7).map((P,Q)=>i.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden border border-white/5 shadow-lg cursor-pointer group relative",onClick:()=>{j(Q+1),g(!0)},children:[i.jsx("img",{src:L(P,"complex-images",l.id),alt:`Gallery ${Q+2}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:oe=>{console.error("Failed to load gallery image:",P),oe.currentTarget.src=ur(l.id,"complex")}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},`gallery-${Q}`)),q.length>7&&i.jsxs("div",{className:"aspect-square rounded-2xl bg-primary/20 border-2 border-primary/30 flex flex-col items-center justify-center cursor-pointer shadow-lg shadow-primary/20 active:scale-95 transition-all group hover:bg-primary/30",onClick:()=>{j(6),g(!0)},children:[i.jsxs("span",{className:"text-primary font-black text-2xl mb-1 group-hover:scale-110 transition-transform",children:["+",q.length-7]}),i.jsx("span",{className:"text-primary/80 text-[9px] font-black uppercase tracking-widest",children:"More"})]})]})]}),i.jsxs("section",{className:"pt-4",children:[i.jsxs("div",{className:"flex justify-between items-end mb-6",children:[i.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:"Available Pitches"}),i.jsxs("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest",children:[u.length," Total"]})]}),i.jsx("div",{className:"space-y-4",children:u.length===0?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl p-12 rounded-[3.5rem] border border-white/5 text-center shadow-inner",children:[i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500 mb-2",children:"sports_soccer"}),i.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"No pitches listed yet"})]}):u.map(P=>i.jsx("div",{onClick:()=>n(`/pitch/${P.id}`),className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[3rem] shadow-sm border border-white/5 hover:bg-slate-900 active:scale-[0.98] transition-all cursor-pointer group",children:i.jsxs("div",{className:"flex gap-5",children:[i.jsxs("div",{className:"relative w-28 h-28 rounded-[2rem] overflow-hidden shrink-0 shadow-lg group-hover:shadow-primary/10 transition-all border border-white/5",children:[i.jsx("img",{src:(()=>{const oe=Ls(P.images,P.image)[0];return oe?oe.startsWith("http")?oe:Ms("pitch-images",`${P.id}/${oe}`):ur(P.id,P.surface==="Indoor"?"indoor":"pitch")})(),alt:P.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),i.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between py-1",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[i.jsx("span",{className:"bg-white/5 px-2 py-0.5 rounded text-[8px] font-black text-slate-400 uppercase tracking-wider",children:P.surface||"Field"}),i.jsx("span",{className:"bg-primary/10 px-2 py-0.5 rounded text-[8px] font-black text-primary uppercase tracking-wider",children:P.size||"5v5"}),P.sport_type&&i.jsxs("span",{className:"bg-blue-500/10 px-2 py-0.5 rounded text-[8px] font-black text-blue-400 uppercase tracking-wider flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-rounded text-[10px]",children:P.sport_type.toLowerCase().includes("football")?"sports_soccer":P.sport_type.toLowerCase().includes("padel")||P.sport_type.toLowerCase().includes("tennis")?"sports_tennis":P.sport_type.toLowerCase().includes("basketball")?"sports_basketball":"sports_soccer"}),P.sport_type]})]}),i.jsx("h3",{className:"font-bold text-lg text-white leading-tight truncate",children:P.name})]}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-0.5",children:"Price / Hour"}),i.jsxs("span",{className:"text-xl font-black text-white tabular-nums",children:[P.price_per_hour||60," ",i.jsx("span",{className:"text-[10px] text-slate-500",children:"TND"})]})]}),i.jsx("div",{className:"bg-primary p-3 rounded-2xl shadow-lg shadow-primary/20 group-hover:scale-110 group-hover:-rotate-12 transition-all",children:i.jsx("span",{className:"material-symbols-rounded text-slate-900 text-lg",children:"arrow_forward"})})]})]})]})},P.id))})]}),i.jsxs("section",{className:"pt-4 pb-12",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:"Player Feedback"}),i.jsxs("div",{className:"flex -space-x-3 group cursor-pointer",onClick:()=>M(!0),children:[[...Array(3)].map((P,Q)=>i.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-slate-900 bg-slate-800 flex items-center justify-center shrink-0",children:i.jsx("span",{className:"material-symbols-rounded text-xs text-slate-500",children:"person"})},Q)),i.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-slate-900 bg-primary flex items-center justify-center text-[10px] font-black text-slate-900",children:"+"})]})]}),E.length===0?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl p-10 rounded-[3.5rem] text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-500 mb-2",children:"reviews"}),i.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:"No reviews yet"}),i.jsx("button",{onClick:()=>M(!0),className:"text-primary font-black text-[10px] uppercase tracking-widest py-2 border-b-2 border-primary active:opacity-50 transition-all",children:"Write First Review"})]}):i.jsx("div",{className:"space-y-6",children:E.map(P=>{var Q,oe,ge;return i.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-6 rounded-[2.5rem] border border-white/5 shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl overflow-hidden border-2 border-white/10 shadow-inner bg-slate-800",children:i.jsx("img",{src:ft((Q=P.user_profiles)==null?void 0:Q.avatar,(oe=P.user_profiles)==null?void 0:oe.name,P.user_id),className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-black text-white leading-none mb-1.5",children:((ge=P.user_profiles)==null?void 0:ge.name)||"Player"}),i.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((Ae,V)=>i.jsx("span",{className:`material-symbols-rounded text-[10px] ${V<P.rating?"text-primary fill-1":"text-slate-700"}`,children:"star"},V))})]})]}),i.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:new Date(P.created_at).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),i.jsx("p",{className:"text-slate-300 text-sm font-medium leading-relaxed pl-1 space-y-2",children:P.comment})]},P.id)})})]})]}),A&&i.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-950/80 backdrop-blur-md p-6 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-sm rounded-[3rem] p-8 shadow-2xl border border-white/5 animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full -mr-16 -mt-16 blur-3xl"}),i.jsx("h2",{className:"text-2xl font-black text-white tracking-tight mb-2",children:"Rate Venue"}),i.jsxs("p",{className:"text-slate-400 text-sm font-medium mb-10 leading-relaxed",children:["Share your experience at ",i.jsx("span",{className:"text-primary font-bold",children:l.name})," with other players."]}),i.jsxs("form",{onSubmit:O,className:"relative z-10",children:[i.jsx("div",{className:"flex justify-center gap-3 mb-10",children:[1,2,3,4,5].map(P=>i.jsx("button",{type:"button",onClick:()=>T({...S,rating:P}),className:"transition-all active:scale-90",children:i.jsx("span",{className:`material-symbols-rounded text-5xl ${P<=S.rating?"text-primary fill-1":"text-slate-800"}`,children:"star"})},P))}),i.jsx("textarea",{value:S.comment,onChange:P=>T({...S,comment:P.target.value}),placeholder:"How was the pitch? The service? ...",className:"w-full bg-slate-800/50 border border-white/5 rounded-[2rem] p-6 text-sm font-medium focus:ring-2 focus:ring-primary focus:bg-slate-800 transition-all mb-8 min-h-[140px] resize-none text-white placeholder:text-slate-600",required:!0}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 py-4.5 rounded-2xl text-[10px] font-black text-slate-500 uppercase tracking-widest hover:bg-white/5 transition-colors",children:"Close"}),i.jsx("button",{type:"submit",disabled:N,className:"flex-[2] py-4.5 rounded-2xl text-[10px] font-black text-slate-900 bg-primary shadow-xl shadow-primary/20 active:scale-95 transition-all uppercase tracking-[0.2em] flex items-center justify-center",children:N?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-slate-900 border-t-transparent rounded-full"}):"Post Review"})]})]})]})}),q.length>0&&i.jsx(dx,{isOpen:x,images:q.map(P=>wi(P,"complex-images",l.id,Ms)),currentIndex:y,collectionName:"complexes",recordId:l.id,onClose:()=>g(!1),onNext:()=>{y<q.length-1&&j(y+1)},onPrevious:()=>{y>0&&j(y-1)}})]})},sN=[{id:"ball",name:"Pro Match Ball",price:5},{id:"bibs",name:"Set of 10 Bibs",price:5},{id:"referee",name:"FA Qualified Referee",price:40}],rN=()=>{var se,he;const{id:s}=fr(),a=rt(),[n,l]=v.useState(null),[c,u]=v.useState(!0),[f,m]=v.useState(new Date().toISOString().split("T")[0]),[p,x]=v.useState(null),[g,y]=v.useState([]),[j,E]=v.useState(!1),[k,N]=v.useState([]),[_,S]=v.useState(!1),[T,A]=v.useState(!1),[M,K]=v.useState(!1),[z,O]=v.useState(!1),[L,q]=v.useState(0);v.useEffect(()=>{s&&re()},[s]),v.useEffect(()=>{n&&f&&P()},[n,f]);const re=async()=>{u(!0);const ce=await _j(s);l(ce),u(!1)},P=async()=>{if(!(!(n!=null&&n.id)||!f)){E(!0);try{const ce=new Date(f+"T00:00:00"),pe=await mj(n.id,ce);y(pe)}catch(ce){console.error("Error fetching slots:",ce),y([])}E(!1)}},Q=()=>{let ce=(p==null?void 0:p.price)||n.price_per_hour||n.pricePerHour||0;return k.forEach(pe=>{const R=sN.find(X=>X.id===pe);R&&(ce+=R.price)}),ce},oe=()=>{p&&Y.auth.getUser().then(({data:{user:ce}})=>{ce&&Y.from("user_profiles").select("phone").eq("id",ce.id).single().then(({data:pe})=>{if(!(pe!=null&&pe.phone)){alert(` Phone Number Required

Please add your phone number in your profile before making a booking.`),a("/profile");return}S(!0)})})},ge=async()=>{S(!1),K(!0);try{const{data:{user:ce}}=await Y.auth.getUser();if(!ce)throw new Error("User not authenticated");await ex({pitch:n.id,user:ce.id,start_time:new Date(p.start),end_time:new Date(p.end),total_price:Q()}),K(!1),A(!0)}catch(ce){K(!1),alert(ce instanceof Error?ce.message:"Failed to create booking.")}},Ae=()=>{A(!1),a("/")},V=Ls(n==null?void 0:n.images,n==null?void 0:n.image);return c?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"animate-ping absolute inset-0 bg-primary/20 rounded-full"}),i.jsx("div",{className:"bg-primary/10 p-6 rounded-full border border-primary/20 relative",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary animate-pulse",children:"sports_soccer"})})]})}):n?i.jsxs("div",{className:"bg-slate-950 text-white antialiased min-h-screen pb-[calc(120px+env(safe-area-inset-bottom))] font-display",children:[i.jsxs("div",{className:"max-w-[430px] mx-auto min-h-screen relative flex flex-col",children:[i.jsxs("div",{className:"relative h-[400px] w-full shrink-0",children:[V.length>0?i.jsx("img",{src:wi(V[0],"pitch-images",n.id,Ms),alt:n.name,className:"w-full h-full object-cover cursor-pointer transition-transform duration-[2s]",onClick:()=>{q(0),O(!0)}}):i.jsx("img",{src:ur(n.id,n.surface==="Indoor"?"indoor":"pitch"),className:"w-full h-full object-cover",alt:n.name}),i.jsxs("div",{className:"absolute top-12 left-6 right-6 flex justify-between items-center z-20",children:[i.jsx("button",{onClick:()=>a(-1),className:"w-10 h-10 rounded-full bg-slate-950/20 backdrop-blur-md flex items-center justify-center text-white border border-white/10 active:scale-90 transition-all",children:i.jsx(ki,{size:24})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"w-10 h-10 rounded-full bg-slate-950/20 backdrop-blur-md flex items-center justify-center text-white border border-white/10 active:scale-90 transition-all",children:i.jsx(M_,{size:20})}),i.jsx("button",{className:"w-10 h-10 rounded-full bg-slate-950/20 backdrop-blur-md flex items-center justify-center text-white border border-white/10 active:scale-90 transition-all",children:i.jsx(x_,{size:20})})]})]}),i.jsx("div",{className:"absolute bottom-10 left-6 z-20",children:i.jsxs("div",{className:"px-3 py-1.5 bg-primary rounded-full text-black text-xs font-bold flex items-center gap-1 shadow-lg shadow-primary/20",children:[i.jsx(cx,{size:14,fill:"currentColor"}),"4.9 (120+ Reviews)"]})})]}),i.jsxs("div",{className:"px-6 pt-8 -mt-6 rounded-t-[32px] bg-slate-950 z-10 flex-grow",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-extrabold tracking-tight mb-1 text-white",children:n.name}),i.jsxs("div",{className:"flex items-center text-slate-400 text-sm font-medium",children:[i.jsx(ox,{className:"text-primary text-base mr-1",size:16}),((se=Array.isArray(n.complexes)?n.complexes[0]:n.complexes)==null?void 0:se.name)||"Premium Venue"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Per Hour"}),i.jsxs("div",{className:"text-xl font-bold text-primary",children:[n.price_per_hour||45,".00 TND"]})]})]}),i.jsxs("div",{className:"flex gap-2 mb-8 overflow-x-auto no-scrollbar pb-1",children:[n.sport_type&&i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-500/10 backdrop-blur-md rounded-full whitespace-nowrap shadow-sm border border-blue-500/20",children:[i.jsx("span",{className:"material-symbols-rounded text-blue-400 text-[18px]",children:n.sport_type.toLowerCase().includes("football")?"sports_soccer":n.sport_type.toLowerCase().includes("padel")||n.sport_type.toLowerCase().includes("tennis")?"sports_tennis":n.sport_type.toLowerCase().includes("basketball")?"sports_basketball":"sports_soccer"}),i.jsx("span",{className:"text-sm font-bold text-blue-400",children:n.sport_type})]}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900/50 backdrop-blur-md rounded-full whitespace-nowrap shadow-sm border border-white/5",children:[i.jsx(K_,{className:"text-primary",size:18}),i.jsx("span",{className:"text-sm font-medium",children:"Free WiFi"})]}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900/50 backdrop-blur-md rounded-full whitespace-nowrap shadow-sm border border-white/5",children:[i.jsx(s_,{className:"text-primary",size:18}),i.jsx("span",{className:"text-sm font-medium",children:"Parking"})]}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900/50 backdrop-blur-md rounded-full whitespace-nowrap shadow-sm border border-white/5",children:[i.jsx(q_,{className:"text-primary",size:18}),i.jsx("span",{className:"text-sm font-medium",children:"Showers"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-lg font-bold mb-3",children:"About Venue"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm leading-relaxed",children:["Experience ",n.name," at ",(he=Array.isArray(n.complexes)?n.complexes[0]:n.complexes)==null?void 0:he.name,". Featuring high-quality ",n.surface||"Field"," surface, ",n.size||"standard"," size, and premium facilities. Perfect for both competitive play and leisure sessions with friends."]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold",children:"Select Date"}),i.jsx("span",{className:"text-primary text-sm font-bold",children:new Date(f).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),i.jsx("div",{className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 px-0.5",children:[0,1,2,3,4,5,6].map(ce=>{const pe=new Date;pe.setDate(pe.getDate()+ce);const R=pe.toISOString().split("T")[0],X=f===R;return i.jsxs("button",{onClick:()=>m(R),className:`flex flex-col items-center justify-center min-w-[64px] h-20 rounded-2xl transition-all duration-300 shadow-sm ${X?"bg-primary text-black":"bg-slate-900/50 text-slate-500 border border-white/5"}`,children:[i.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider mb-1 ${X?"text-black":"text-slate-400"}`,children:pe.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase()}),i.jsx("span",{className:`text-lg font-extrabold ${X?"text-black":"dark:text-slate-200"}`,children:pe.getDate()})]},ce)})}),i.jsxs("div",{className:"mt-4 flex items-center justify-between px-1",children:[i.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Or Pick Other:"}),i.jsx("input",{type:"date",value:f,onChange:ce=>m(ce.target.value),min:new Date().toISOString().split("T")[0],className:"text-xs font-black bg-slate-900/50 text-white border-none rounded-lg focus:ring-1 focus:ring-primary h-8"})]})]}),i.jsxs("div",{className:"mb-8 pb-4",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Select Time Slot"}),j?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-12 rounded-[2rem] flex flex-col items-center justify-center border border-white/5",children:[i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mb-3"}),i.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Checking slots..."})]}):g.length===0?i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-12 rounded-[2rem] text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-700 mb-2",children:"event_busy"}),i.jsx("p",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"No slots today"})]}):i.jsx("div",{className:"grid grid-cols-3 gap-3",children:g.map((ce,pe)=>{const R=new Date(ce.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),X=(p==null?void 0:p.start)===ce.start;return i.jsx("button",{onClick:()=>ce.available&&x(ce),disabled:!ce.available,className:`py-3 px-2 rounded-xl text-[11px] font-bold transition-all border ${ce.available?X?"bg-primary text-black border-primary scale-[1.02]":"bg-slate-900/50 border-white/5 text-slate-300 hover:border-primary":"bg-slate-900/20 border-white/5 text-slate-700 opacity-50 cursor-not-allowed"}`,children:R},pe)})})]})]}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-slate-950/80 backdrop-blur-xl border-t border-white/10 max-w-[430px] mx-auto z-50 rounded-t-[32px] shadow-[0_-10px_30px_-15px_rgba(0,0,0,0.5)] pb-[calc(1.5rem+env(safe-area-inset-bottom))]",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[p&&i.jsxs("div",{className:"flex justify-between items-center px-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Selected Slot"}),i.jsx("p",{className:"text-sm font-bold",children:new Date(p.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Total Price"}),i.jsxs("p",{className:"text-sm font-extrabold text-primary",children:[Q()," TND"]})]})]}),i.jsx("button",{disabled:!p||M,onClick:oe,className:"w-full bg-primary hover:bg-opacity-90 text-black py-4 rounded-2xl font-extrabold text-lg shadow-lg shadow-primary/20 transition-all active:scale-95 disabled:opacity-30 flex items-center justify-center gap-2",children:M?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-black border-t-transparent rounded-full"}),i.jsx("span",{children:"Processing..."})]}):"Book Now"})]})})]}),i.jsx(qs,{isOpen:_,title:"Review Booking",message:"Review your session details before confirming:",details:[{label:"Pitch",value:n.name},{label:"Date",value:new Date(f).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"})},{label:"Time",value:p?`${new Date(p.start).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}`:""},{label:"Amount",value:`${Q()} TND (Cash)`}],confirmText:"Confirm",cancelText:"Edit",onConfirm:ge,onCancel:()=>S(!1)}),i.jsx(ja,{isOpen:T,title:"Booking Sent!",message:`Your request has been sent. Bring ${Q()} TND in cash on arrival once approved.`,buttonText:"Back to Grounds",onClose:Ae}),V.length>0&&i.jsx(dx,{isOpen:z,images:V.map(ce=>wi(ce,"pitch-images",n.id,Ms)),currentIndex:L,collectionName:"pitches",recordId:n.id,onClose:()=>O(!1),onNext:()=>{L<V.length-1&&q(L+1)},onPrevious:()=>{L>0&&q(L-1)}})]}):i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-6 text-center",children:i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl p-8 rounded-[3rem] shadow-sm border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-5xl text-slate-500 mb-4",children:"error"}),i.jsx("p",{className:"font-extrabold text-xl text-white mb-1",children:"Pitch not found"}),i.jsx("button",{onClick:()=>a(-1),className:"mt-4 text-primary font-black uppercase text-[10px] tracking-widest",children:"Go Back"})]})})},nN=()=>{const{state:s}=La(),a=rt(),[n,l]=v.useState(!1),[c,u]=v.useState(!1);if(!s)return a("/"),null;const f=async()=>{u(!0);try{const{data:{user:m}}=await Y.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:p}=await Y.from("user_profiles").select("phone").eq("id",m.id).single();if(!(p!=null&&p.phone))throw new Error("Please add a phone number to your profile before booking.");await ex({pitch:s.pitch.id,user:m.id,start_time:new Date(s.slot.start),end_time:new Date(s.slot.end),total_price:s.total}),l(!0)}catch(m){console.error("Booking failed:",m),alert(m instanceof Error?m.message:"Booking failed. Please try again.")}u(!1)};return n?i.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col items-center justify-center text-white p-8 text-center overflow-auto pb-20",children:[i.jsx("div",{className:"bg-primary text-slate-950 p-5 rounded-full mb-6 animate-bounce shadow-2xl",children:i.jsx(ux,{size:48})}),i.jsx("h1",{className:"text-4xl font-black mb-2 tracking-tight",children:"PENDING APPROVAL!"}),i.jsx("p",{className:"opacity-60 mb-10 font-medium",children:"The owner will review your request soon"}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-xl text-white p-8 rounded-[2.5rem] w-full max-w-sm shadow-2xl mb-10 border border-white/5 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-primary/10"}),i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"bg-white p-3 rounded-3xl",children:i.jsx(k_,{size:140,className:"text-slate-900"})})}),i.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl mb-6 border border-white/5 text-white",children:[i.jsx("p",{className:"text-center font-black text-2xl tracking-[0.2em]",children:"4829"}),i.jsx("p",{className:"text-center text-[10px] font-black text-slate-500 mt-1 uppercase tracking-widest",children:"Digital Access Code"})]}),i.jsxs("div",{className:"text-left text-sm space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2",children:[i.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase",children:"Pitch"}),i.jsx("span",{className:"font-black text-white",children:s.pitch.name})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-2",children:[i.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase",children:"Schedule"}),i.jsxs("span",{className:"font-black text-white text-right",children:[new Date(s.slot.start).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),i.jsx("br",{}),new Date(s.slot.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})," - ",new Date(s.slot.end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-500 font-bold text-xs uppercase",children:"Paid"}),i.jsxs("span",{className:"font-black text-primary text-xl",children:["TND ",s.total]})]})]})]}),i.jsx("button",{onClick:()=>a("/"),className:"w-full bg-white/5 text-primary py-4 rounded-[2rem] font-black shadow-xl active:scale-95 transition-all text-xs tracking-widest uppercase border border-white/5 hover:bg-white/10",children:"BACK TO DASHBOARD"})]}):i.jsxs("div",{className:"min-h-screen bg-slate-950 p-6 flex flex-col pb-safe text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8 pt-6",children:[i.jsx("button",{onClick:()=>a(-1),className:"bg-slate-900/50 backdrop-blur-md p-3 rounded-2xl shadow-sm border border-white/5 text-white",children:i.jsx(ki,{size:20})}),i.jsx("h1",{className:"text-xs font-black tracking-[0.2em] text-slate-500 uppercase",children:"Checkout"}),i.jsx("div",{className:"w-10"})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-6 rounded-[2rem] shadow-sm border border-white/5 mb-6",children:[i.jsx("h2",{className:"font-black text-white text-lg mb-6 tracking-tight",children:"Booking Summary"}),i.jsxs("div",{className:"flex gap-4 mb-6 p-3 bg-white/5 rounded-2xl border border-white/5",children:[i.jsx("img",{src:(()=>{const p=Ls(s.pitch.images,s.pitch.image)[0];return p?wi(p,"pitch-images",s.pitch.id,Ms):ur(s.pitch.id,s.pitch.surface==="Indoor"?"indoor":"pitch")})(),className:"w-16 h-16 rounded-xl object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-white leading-tight mb-1",children:s.pitch.name}),i.jsxs("p",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:[s.date,"  ",s.time]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400",children:[i.jsx("span",{className:"uppercase tracking-widest opacity-60",children:"Pitch Fee"}),i.jsxs("span",{className:"text-white font-black",children:["TND ",s.pitch.price_per_hour||s.pitch.pricePerHour||0]})]}),i.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400",children:[i.jsx("span",{className:"uppercase tracking-widest opacity-60",children:"Service Fee"}),i.jsx("span",{className:"text-white font-black",children:"TND 2.00"})]}),i.jsxs("div",{className:"border-t border-white/5 pt-4 mt-2 flex justify-between items-center",children:[i.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Total Amount"}),i.jsxs("span",{className:"text-2xl font-black text-primary tracking-tight",children:["TND ",s.total+2]})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:i.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-4 rounded-2xl border border-white/5",children:[i.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center text-primary",children:i.jsx("span",{className:"material-symbols-rounded",children:"phone_iphone"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none mb-1",children:"Contact Verification"}),i.jsx("p",{className:"text-xs font-black text-white uppercase tracking-tighter",children:"Phone sync active"})]})]})})]}),i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-6 rounded-[2rem] shadow-sm border border-white/5 mb-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-black text-white tracking-tight uppercase tracking-widest text-[10px]",children:"PAYSPLIT"}),i.jsx("div",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded text-[8px] font-black tracking-widest uppercase",children:"ACTIVE"})]}),i.jsx("p",{className:"text-[10px] text-slate-500 font-bold mb-6 leading-relaxed",children:"Pay the full amount now, or split with your team members automatically. Points will be awarded to all payers."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{className:"flex-1 py-3 border-2 border-white/5 rounded-2xl text-[10px] font-black text-slate-500 tracking-widest uppercase hover:border-primary/20 transition-all",children:"SPLIT (1/10)"}),i.jsx("button",{className:"flex-1 py-3 border-2 border-primary bg-primary/5 text-primary rounded-2xl text-[10px] font-black tracking-widest uppercase shadow-md shadow-primary/5",children:"PAY ALL"})]})]}),i.jsx("button",{disabled:c,onClick:f,className:"w-full bg-primary text-slate-900 py-5 rounded-[2rem] font-black shadow-2xl hover:brightness-110 active:scale-95 transition-all flex items-center justify-center gap-3 mt-8 disabled:opacity-50",children:c?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-slate-900 border-t-transparent rounded-full"}):i.jsxs(i.Fragment,{children:[i.jsx(h_,{size:20,className:"text-slate-900/40"}),i.jsx("span",{className:"text-xs tracking-[0.25em] uppercase",children:"Confirm Booking"})]})})]})},iN=()=>{const s=rt(),[a,n]=v.useState([]),[l,c]=v.useState("upcoming"),[u,f]=v.useState(!0),[m,p]=v.useState(null),[x,g]=v.useState(!1),[y,j]=v.useState(!1),[E,k]=v.useState(!1),[N,_]=v.useState(""),S=O=>O?O instanceof Date?O:new Date(O.replace(" ","T")):new Date;v.useEffect(()=>{T()},[]);const T=async()=>{f(!0);const{data:{user:O}}=await Y.auth.getUser();if(!O){f(!1);return}const L=await Nj(O.id);n(L||[]),f(!1)},A=async()=>{if(m){g(!0);try{await pj(m.id),p(null),g(!1),j(!0),T()}catch{g(!1),_("Failed to send cancel request."),k(!0)}}},K=(()=>{const O=new Date;switch(l){case"upcoming":return a.filter(L=>S(L.end_time||L.start_time)>=O&&(["pending","approved","cancel_request"].includes(L.status)||!L.status&&L.access_code));case"past":return a.filter(L=>S(L.end_time||L.start_time)<O);case"cancelled":return a.filter(L=>L.status==="cancelled"||L.status==="rejected");default:return a}})(),z=O=>{var q;if(S(O.start_time)<new Date&&O.status==="approved")return i.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-500 rounded-lg text-[10px] font-black uppercase tracking-widest",children:"Completed"});switch(O.status){case"pending":return i.jsx("span",{className:"px-3 py-1 bg-amber-50 text-amber-600 rounded-lg text-[10px] font-black uppercase tracking-widest border border-amber-100 italic",children:"Pending"});case"approved":return i.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary-dark rounded-lg text-[10px] font-black uppercase tracking-widest border border-primary/20 shadow-sm shadow-primary/5",children:"Confirmed"});case"cancel_request":return i.jsx("span",{className:"px-3 py-1 bg-orange-50 text-orange-600 rounded-lg text-[10px] font-black uppercase tracking-widest border border-orange-100 italic",children:"Cancelling..."});default:return i.jsx("span",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-lg text-[10px] font-black uppercase tracking-widest",children:((q=O.status)==null?void 0:q.toUpperCase())||"UNKNOWN"})}};return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-[calc(8rem+env(safe-area-inset-bottom))] text-white",children:[i.jsxs("header",{className:"px-6 pt-[calc(3rem+env(safe-area-inset-top))] pb-6 sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.3em] mb-1 opacity-60",children:"Activity Hub"}),i.jsxs("h1",{className:"text-3xl font-black tracking-tighter text-white leading-none",children:["My ",i.jsx("span",{className:"text-primary italic",children:"Matches"})]})]}),i.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-[1.2rem] flex items-center justify-center border border-white/10 text-primary",children:i.jsx("span",{className:"material-symbols-rounded text-2xl",children:"confirmation_number"})})]}),i.jsx("div",{className:"flex gap-2 p-1 bg-white/5 rounded-[1.2rem] border border-white/5 overflow-x-auto no-scrollbar",children:[{key:"upcoming",label:"Active",icon:"bolt"},{key:"past",label:"History",icon:"history"},{key:"cancelled",label:"Others",icon:"close"}].map(({key:O,label:L,icon:q})=>i.jsxs("button",{onClick:()=>c(O),className:`flex-1 min-w-[80px] flex items-center justify-center gap-2 py-2.5 rounded-[0.8rem] transition-all duration-300 ${l===O?"bg-primary text-slate-900 shadow-lg shadow-primary/20":"text-slate-500 hover:text-slate-300 hover:bg-white/5"}`,children:[i.jsx("span",{className:`material-symbols-rounded text-sm ${l===O?"text-slate-900":""}`,children:q}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:L})]},O))})]}),i.jsx("div",{className:"px-6 mt-4 space-y-4 animate-in fade-in slide-in-from-bottom-8 duration-700",children:u?i.jsxs("div",{className:"bg-white/5 p-16 rounded-[2.5rem] flex flex-col items-center justify-center border border-white/5",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-2 border-primary border-t-transparent rounded-full mb-4"}),i.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] animate-pulse",children:"Loading..."})]}):K.length===0?i.jsxs("div",{className:"bg-white/5 p-12 rounded-[2.5rem] text-center border border-white/5",children:[i.jsx("span",{className:"material-symbols-rounded text-4xl text-slate-700 mb-4",children:"sports_soccer"}),i.jsx("p",{className:"text-white font-black text-lg tracking-tight uppercase mb-4",children:"No Matches Found"}),i.jsx("button",{onClick:()=>s("/"),className:"bg-white/5 hover:bg-white/10 text-primary px-6 py-3 rounded-full font-black text-[10px] uppercase tracking-widest transition-colors",children:"Find a Pitch"})]}):K.map(O=>{const L=un(O,"pitches"),q=L?un(L,"complexes"):null,re=S(O.start_time),P=(re.getTime()-new Date().getTime())/(1e3*60*60),Q=!(S(O.start_time)<new Date)&&(O.status==="pending"||O.status==="approved")&&P>=24;return i.jsxs("div",{className:"bg-slate-900/50 backdrop-blur-md p-5 rounded-[2rem] border border-white/5 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary/5 rounded-full -mr-12 -mt-12 blur-[40px] group-hover:bg-primary/10 transition-all duration-700"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-white/5 p-2.5 rounded-xl border border-white/5 text-primary",children:i.jsx("span",{className:"material-symbols-rounded text-lg",children:"calendar_today"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[13px] font-black text-white uppercase leading-none mb-0.5",children:re.toLocaleDateString(void 0,{month:"short",day:"numeric"})}),i.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wide",children:re.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})})]})]}),z(O)]}),i.jsxs("div",{className:"mb-4 pl-1",children:[i.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1 truncate",children:(q==null?void 0:q.name)||"Venue"}),i.jsx("h3",{className:"font-black text-xl text-white tracking-tight truncate group-hover:text-primary transition-colors",children:(L==null?void 0:L.name)||"Pro Pitch"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-xl font-black text-white tracking-tight",children:O.total_price}),i.jsx("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-0.5",children:"TND"})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[O.status==="approved"&&i.jsxs("div",{className:"flex items-center gap-2 bg-primary/10 px-3 py-1.5 rounded-lg border border-primary/20",children:[i.jsx(td,{size:12,className:"text-primary"}),i.jsx("span",{className:"text-[10px] font-black text-primary tracking-widest font-mono",children:O.access_code})]}),Q&&i.jsx("button",{onClick:oe=>{oe.stopPropagation(),p(O)},className:"w-8 h-8 flex items-center justify-center rounded-xl bg-rose-500/10 text-rose-500 hover:bg-rose-500/20 transition-all",children:i.jsx(md,{size:14})})]})]})]})]},O.id)})}),m&&i.jsx(qs,{isOpen:!0,title:"Cancel Match?",message:"Are you sure you want to request a cancellation? This action cannot be undone.",confirmText:x?"Processing...":"Confirm Cancel",onConfirm:A,onCancel:()=>p(null),type:"warning"}),i.jsx(ja,{isOpen:y,title:"Request Sent",message:"Cancellation request submitted to the venue owner.",onClose:()=>j(!1)}),i.jsx(ja,{isOpen:E,title:"Error",message:N,onClose:()=>k(!1)})]})},lN=()=>i.jsxs("div",{className:"p-6 bg-slate-950 min-h-screen pb-24 text-white",children:[i.jsx("h1",{className:"text-2xl font-black mb-6 text-white uppercase tracking-tighter italic",children:"Venue Command"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-white/5 shadow-sm",children:[i.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold mb-1",children:"Daily Revenue"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:"TND 1,240"}),i.jsx("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:" 12% vs last week"})]}),i.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-white/5 shadow-sm",children:[i.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold mb-1",children:"Occupancy"}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"82%"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"4 slots remaining"})]})]}),i.jsxs("div",{className:"bg-slate-900/50 rounded-2xl border border-white/5 shadow-sm overflow-hidden mb-6",children:[i.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[i.jsx("h3",{className:"font-black text-xs text-white uppercase tracking-widest",children:"Dynamic Pricing Engine"}),i.jsx("div",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-[9px] font-black uppercase",children:"ACTIVE"})]}),i.jsxs("div",{className:"p-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-tight",children:"Rain Protocol"}),i.jsx("span",{className:"font-black text-primary",children:"-10%"})]}),i.jsxs("div",{className:"flex justify-between py-2 border-b border-white/5",children:[i.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-tight",children:"Peak Surcharge"}),i.jsx("span",{className:"font-black text-primary",children:"+15%"})]}),i.jsxs("div",{className:"flex justify-between py-2",children:[i.jsx("span",{className:"text-slate-400 font-bold text-xs uppercase tracking-tight",children:"Last Minute"}),i.jsx("span",{className:"font-black text-rose-500",children:"-25%"})]})]})]}),i.jsx("button",{className:"w-full bg-white/5 border border-white/5 text-slate-300 font-black py-4 rounded-2xl mb-4 text-[11px] uppercase tracking-widest hover:bg-white/10 transition-all italic",children:"Manage Block Bookings"}),i.jsx("button",{className:"w-full bg-rose-500/10 border border-rose-500/20 text-rose-500 font-black py-4 rounded-2xl text-[11px] uppercase tracking-widest hover:bg-rose-500/20 transition-all italic",children:"Maintenance Mode"})]}),oN=()=>{const{complexId:s}=fr(),a=rt(),[n,l]=v.useState([]),[c,u]=v.useState("all"),[f,m]=v.useState(!0),[p,x]=v.useState(!1),[g,y]=v.useState(""),[j,E]=v.useState(null),[k,N]=v.useState("");v.useEffect(()=>{s&&_()},[s,c]);const _=async()=>{m(!0);const q=await Wl(s,c==="all"?void 0:c);l(q||[]),m(!1)},S=async(L,q,re=!1)=>{try{re?await ax(L):await tx(L,q),_()}catch{y("Action failed. Please try again."),x(!0)}},A=(()=>{const L=[],q=new Date;for(let re=0;re<7;re++){const P=new Date(q);P.setDate(q.getDate()+re),L.push(P)}return L})(),M=L=>L==="approved"?"bg-primary text-slate-950":L==="pending"?"bg-orange-500 text-white":L==="cancel_request"||L==="rejected"?"bg-red-500 text-white":"bg-slate-500 text-white",K=L=>L==="approved"?"CONFIRMED":L==="pending"?"PENDING":L==="cancel_request"?"CANC":L==="rejected"?"CANCELLED":L.toUpperCase(),z=L=>{const q=(L||"").toLowerCase();return q.includes("football")||q.includes("soccer")?"sports_soccer":q.includes("padel")||q.includes("tennis")?"sports_tennis":q.includes("basketball")?"sports_basketball":"sports_soccer"},O=n.filter(L=>{if(j){const q=new Date(L.start_time),re=j.toDateString();if(q.toDateString()!==re)return!1}if(k){const q=un(L,"pitches"),re=un(L,"user_profiles"),P=k.toLowerCase();return((q==null?void 0:q.name)||"").toLowerCase().includes(P)||((re==null?void 0:re.name)||"").toLowerCase().includes(P)}return!0});return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-24 font-sans text-white",children:[i.jsxs("div",{className:"bg-slate-950 px-6 pt-[calc(3rem+env(safe-area-inset-top))] pb-6 border-b border-white/5 sticky top-0 z-50 backdrop-blur-xl bg-slate-950/80",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>a("/owner"),className:"w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 text-white flex items-center justify-center transition-all active:scale-90",children:i.jsx(ki,{size:20})}),i.jsx("div",{children:i.jsxs("h1",{className:"text-2xl font-black tracking-tighter text-white leading-none",children:["Manage ",i.jsx("span",{className:"text-primary",children:"Bookings"})]})})]}),i.jsx("div",{className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center",children:i.jsx(H_,{size:20,className:"text-slate-400"})})]}),i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"relative",children:[i.jsx(R_,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Search customer or pitch...",value:k,onChange:L=>N(L.target.value),className:"w-full bg-slate-900/60 border border-white/5 rounded-2xl pl-12 pr-4 py-3.5 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:border-primary/30 transition-all"})]})}),i.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar mb-4 pb-2",children:A.map((L,q)=>{const re=L.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase(),P=L.getDate(),Q=n.some(ge=>new Date(ge.start_time).toDateString()===L.toDateString()),oe=j?L.toDateString()===j.toDateString():!1;return i.jsxs("button",{onClick:()=>{j&&L.toDateString()===j.toDateString()?E(null):E(L)},className:`flex-shrink-0 px-4 py-2.5 rounded-full text-[11px] font-black uppercase tracking-tight transition-all relative ${oe?"bg-primary text-slate-950 shadow-lg shadow-primary/20":"bg-slate-900/60 text-white border border-white/5"} ${Q?"":"opacity-50"}`,children:[re," ",P,Q&&!oe&&i.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full"})]},q)})}),i.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:["all","approved","pending","cancel_request"].map(L=>i.jsx("button",{onClick:()=>u(L),className:`px-5 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${c===L?"bg-slate-900/60 text-white border border-white/5":"bg-transparent text-slate-400 hover:text-white"}`,children:L==="cancel_request"?"CANC":L.replace("_"," ").toUpperCase()},L))})]}),i.jsx("div",{className:"px-6 pt-6 space-y-3",children:f?i.jsxs("div",{className:"bg-slate-900/50 p-24 rounded-3xl flex flex-col items-center justify-center border border-white/5",children:[i.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full mb-6"}),i.jsx("p",{className:"text-[11px] font-black text-slate-300 uppercase tracking-widest",children:"Loading bookings..."})]}):O.length===0?i.jsx("div",{className:"bg-slate-900/30 p-20 rounded-3xl text-center border border-white/5",children:i.jsx("p",{className:"text-slate-300 font-black uppercase tracking-widest text-[10px]",children:"No bookings found"})}):O.map(L=>{const q=un(L,"pitches"),re=un(L,"user_profiles"),P=new Date(L.start_time),Q=new Date(L.end_time);return i.jsx("div",{className:"bg-slate-900/60 rounded-3xl p-5 border border-white/5 group hover:bg-slate-900 transition-all",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary",children:z((q==null?void 0:q.name)||"")})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-black text-[15px] text-white uppercase tracking-tight mb-1 truncate",children:(q==null?void 0:q.name)||"Main Pitch"}),i.jsxs("p",{className:"text-[12px] text-slate-300 font-bold mb-1",children:[P.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})," - ",Q.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-slate-400",children:[i.jsx("span",{className:"material-symbols-rounded text-sm",children:"person"}),i.jsx("span",{className:"w-1 h-1 bg-slate-500 rounded-full"}),i.jsx("span",{children:(re==null?void 0:re.name)||"Player"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${M(L.status)}`,children:K(L.status)}),i.jsx("button",{onClick:()=>{L.status==="pending"?S(L.id,"approved"):L.status==="cancel_request"&&S(L.id,"cancelled",!0)},className:"w-8 h-8 bg-white/5 rounded-full flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx("span",{className:"material-symbols-rounded text-lg text-slate-400",children:"more_vert"})})]})]})},L.id)})}),i.jsx(ja,{isOpen:p,title:"Error",message:g,onClose:()=>x(!1)})]})},hx=({collection:s,recordId:a,fieldName:n,currentImages:l=[],maxFiles:c=10,onUploadComplete:u})=>{const[f,m]=v.useState(!1),[p,x]=v.useState(()=>(l||[]).filter(N=>typeof N=="string"&&N.trim().length>0)),g=v.useRef(null),[y,j]=v.useState({isOpen:!1,message:""});v.useEffect(()=>{const N=(l||[]).filter(_=>typeof _=="string"&&_.trim().length>0);x(N)},[l]);const E=async N=>{var T,A,M;const _=N.target.files;if(!_||_.length===0)return;const S=Array.from(_).slice(0,c-p.length);if(S.length===0){j({isOpen:!0,message:`Maximum ${c} images allowed`});return}m(!0);try{const K=[...p];for(const Q of S){if(!Q.type.startsWith("image/")){j({isOpen:!0,message:`${Q.name} is not an image file. Skipping...`});continue}try{const oe=await X0(Q),ge=oe.replace(/\]+$/,"").trim();if(ge&&ge.startsWith("http"))K.push(ge),console.log(`[ImageUpload] Successfully uploaded: ${Q.name} -> ${ge}`);else throw new Error(`Invalid image URL returned: ${oe}`)}catch(oe){console.error(`[ImageUpload] Failed to upload ${Q.name}:`,oe),j({isOpen:!0,message:`Failed to upload ${Q.name}: ${oe.message||"Unknown error"}`})}}const z=K.map(Q=>typeof Q=="string"?Q.replace(/\]+$/,"").trim():null).filter(Q=>Q!==null&&Q.length>0&&Q.startsWith("http"));if(z.length===0)throw new Error("No valid images to save");console.log("[ImageUpload] Cleaned URLs to save:",z);const O=n==="images"||s==="complexes"||s==="pitches"?{images:z}:{image:z[z.length-1]||null};if(console.log(`[ImageUpload] Updating ${s} ${a} with ${z.length} images:`,z),console.log("[ImageUpload] Update field:",O),!a||a.trim()==="")throw new Error("Invalid record ID. Cannot save images.");const{data:L,error:q}=await Y.from(s).select("id, images").eq("id",a).single();if(q)throw console.error("[ImageUpload] Error checking record:",q),new Error(`Record not found: ${q.message}`);console.log("[ImageUpload] Existing record:",L);const{error:re,data:P}=await Y.from(s).update(O).eq("id",a).select();if(re)throw console.error("[ImageUpload] Supabase update error:",re),console.error("[ImageUpload] Update field:",O),console.error("[ImageUpload] Record ID:",a),console.error("[ImageUpload] Collection:",s),re.code==="PGRST116"?new Error("Record not found. Please save the pitch first before uploading images."):(T=re.message)!=null&&T.includes("column")&&((A=re.message)!=null&&A.includes("does not exist"))?new Error("Images column not found in database. Please run the SQL migration to add it."):new Error(re.message||"Failed to save images to database.");console.log("[ImageUpload] Successfully updated:",P),x(z),u&&setTimeout(()=>{u()},100)}catch(K){console.error("Upload error:",K);const z=(K==null?void 0:K.message)||((M=K==null?void 0:K.error)==null?void 0:M.message)||"Unknown error";j({isOpen:!0,message:`Failed to save images: ${z}`}),x(uploadedUrls.filter(O=>typeof O=="string"&&O.trim().length>0))}m(!1),g.current&&(g.current.value="")},k=async N=>{var _;m(!0);try{const S=p.filter(M=>M!==N).filter(M=>typeof M=="string"&&M.trim().length>0),T=n==="images"||s==="complexes"||s==="pitches"?{images:S}:{image:S[0]||null},{error:A}=await Y.from(s).update(T).eq("id",a);if(A)throw console.error("Supabase update error:",A),A;x(S),u&&setTimeout(()=>{u()},100)}catch(S){console.error("Remove error:",S);const T=(S==null?void 0:S.message)||((_=S==null?void 0:S.error)==null?void 0:_.message)||"Unknown error";j({isOpen:!0,message:`Failed to remove image: ${T}`}),x(p)}m(!1)};return i.jsxs("div",{className:"space-y-6 font-sans",children:[i.jsxs("div",{className:"relative",children:[i.jsx("input",{ref:g,type:"file",accept:"image/*",multiple:!0,onChange:E,className:"hidden",disabled:f||p.length>=c}),i.jsx("button",{onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},disabled:f||p.length>=c,className:"w-full bg-slate-900/60 border border-white/5 overflow-hidden relative group text-white h-16 rounded-2xl font-black text-[11px] flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95 shadow-lg uppercase tracking-widest",children:f?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-primary border-t-transparent rounded-full"}),i.jsx("span",{className:"text-primary",children:"Uploading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center text-primary group-hover:scale-110 transition-transform border border-primary/20",children:i.jsx("span",{className:"material-symbols-rounded text-xl",children:"add_photo_alternate"})}),i.jsxs("span",{className:"relative z-10",children:["Add Images ",i.jsxs("span",{className:"text-slate-400 font-bold ml-1 text-[9px]",children:["(",p.length,"/",c,")"]})]})]})}),i.jsx("p",{className:"text-[9px] text-slate-400 mt-3 text-center font-bold uppercase tracking-widest leading-relaxed",children:"PNG, JPG, WEBP  Max 5MB"})]}),p.length>0&&i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.map((N,_)=>!N||typeof N!="string"||N.trim().length===0?null:i.jsxs("div",{className:"relative aspect-square group",children:[i.jsx("div",{className:"absolute inset-0 rounded-2xl border border-white/5 overflow-hidden shadow-lg group-hover:border-primary/30 transition-colors bg-slate-800",children:i.jsx("img",{src:N,alt:`Upload ${_+1}`,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",onError:S=>{console.error("Failed to load image:",N),S.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23334155" width="100" height="100"/%3E%3Ctext x="50" y="50" text-anchor="middle" dy=".3em" fill="%2394a3b8" font-size="12"%3EFailed%3C/text%3E%3C/svg%3E'}})}),i.jsx("button",{onClick:()=>k(N),disabled:f,className:"absolute -top-1 -right-1 w-7 h-7 bg-red-500 text-white rounded-lg shadow-lg border border-white/10 opacity-0 group-hover:opacity-100 transition-all active:scale-90 flex items-center justify-center z-10",children:i.jsx("span",{className:"material-symbols-rounded text-sm",children:"close"})})]},`${N}-${_}`)),p.length<c&&!f&&i.jsx("button",{onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},className:"aspect-square rounded-2xl bg-slate-900/60 border-2 border-dashed border-white/10 flex items-center justify-center text-slate-400 hover:text-primary hover:border-primary/30 transition-all group",children:i.jsx("span",{className:"material-symbols-rounded text-2xl group-hover:scale-110 transition-transform",children:"add_circle"})})]}),p.length===0&&!f&&i.jsxs("div",{onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},className:"border-2 border-dashed border-white/10 rounded-3xl p-12 text-center group cursor-pointer hover:bg-slate-900/40 transition-colors",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-2xl shadow-lg border border-white/5 flex items-center justify-center mx-auto mb-4 group-hover:rotate-6 transition-transform",children:i.jsx("span",{className:"material-symbols-rounded text-3xl text-primary",children:"landscape"})}),i.jsx("h3",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1",children:"No Images"}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Click to upload images"})]}),i.jsx(qs,{isOpen:y.isOpen,title:"Error",message:y.message,confirmText:"OK",cancelText:"",type:"danger",onConfirm:()=>j({isOpen:!1,message:""}),onCancel:()=>j({isOpen:!1,message:""})})]})},cN=()=>{const{complexId:s}=fr(),a=rt(),[n,l]=v.useState("pitches"),[c,u]=v.useState([]),[f,m]=v.useState(null),[p,x]=v.useState(!0),[g,y]=v.useState(null),[j,E]=v.useState(!1),[k,N]=v.useState(!1),[_,S]=v.useState(!1),[T,A]=v.useState(""),[M,K]=v.useState({description:"",phone:"",email:"",facilities:[]}),z=["Parking","Changing Rooms","Showers","Cafe","WiFi","First Aid","Equipment Rental","Coaching","Floodlights","Spectator Seating","Disability Access","Security"];v.useEffect(()=>{s&&O()},[s]);const O=async()=>{x(!0);try{const[P,Q]=await Promise.all([Wu(s),sx(s)]);u(P),m(Q),K({description:Q.description||"",phone:Q.phone||"",email:Q.email||"",facilities:Q.facilities||[]})}catch(P){console.error("Error fetching data:",P)}x(!1)},L=async()=>{const P=await Wu(s);u(P)},q=async()=>{E(!0);try{const{error:P}=await Y.from("complexes").update(M).eq("id",s);if(P)throw P;E(!1),N(!0),O()}catch(P){console.error("Error saving settings:",P),E(!1),A("Failed to save settings. Please try again."),S(!0)}},re=P=>{K(Q=>({...Q,facilities:Q.facilities.includes(P)?Q.facilities.filter(oe=>oe!==P):[...Q.facilities,P]}))};return p?i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-950 px-8 text-center text-white",children:[i.jsx("div",{className:"animate-spin h-10 w-10 border-4 border-primary border-t-transparent rounded-full mb-6"}),i.jsx("p",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.3em]",children:"Establishing Link..."})]}):f?i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-32 font-sans text-white",children:[i.jsxs("div",{className:"bg-slate-950 px-6 pt-[calc(3rem+env(safe-area-inset-top))] pb-6 border-b border-white/5 sticky top-0 z-50 backdrop-blur-xl bg-slate-950/80",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("button",{onClick:()=>a("/owner"),className:"w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 text-white flex items-center justify-center transition-all active:scale-90",children:i.jsx(ki,{size:20})}),i.jsxs("h1",{className:"text-2xl font-black tracking-tighter text-white leading-none",children:["Edit Pitch ",i.jsx("span",{className:"text-primary",children:"Details"})]})]}),i.jsx("div",{className:"flex bg-white/5 rounded-2xl p-1 border border-white/5",children:["pitches","complex","images"].map(P=>i.jsx("button",{onClick:()=>l(P),className:`flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all ${n===P?"bg-primary text-slate-900 shadow-lg shadow-primary/10":"text-slate-500 hover:text-slate-300"}`,children:P},P))})]}),i.jsxs("div",{className:"px-6 pt-6",children:[n==="pitches"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3",children:"YOUR INVENTORY"}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h2",{className:"text-2xl font-black text-white leading-none",children:["Active Pitches ",i.jsx("span",{className:"text-primary",children:c.length})]})})]}),c.map(P=>{const Q=()=>{const ge=(P.name||"").toLowerCase();return ge.includes("football")||ge.includes("soccer")?"sports_soccer":ge.includes("padel")||ge.includes("tennis")?"sports_tennis":ge.includes("basketball")?"sports_basketball":"sports_soccer"},oe=()=>(P.name||"").toLowerCase().includes("indoor")?"INDOOR":"OUTDOOR";return i.jsx("div",{className:"bg-slate-900/60 rounded-3xl p-5 border border-white/5 group hover:bg-slate-900 transition-all",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"w-20 h-20 bg-slate-800 rounded-2xl flex items-center justify-center flex-shrink-0 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-transparent"}),i.jsx("span",{className:"material-symbols-rounded text-4xl text-primary relative z-10",children:Q()})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-black text-[16px] text-white uppercase tracking-tight mb-2 truncate",children:P.name}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${oe()==="OUTDOOR"?"bg-primary text-slate-950":"bg-blue-500 text-white"}`,children:oe()}),i.jsxs("span",{className:"text-[11px] text-slate-400 font-bold",children:[P.size,"  ",P.surface]})]})]}),i.jsx("button",{onClick:()=>y(P),className:"w-10 h-10 bg-white/5 rounded-full flex items-center justify-center hover:bg-primary/10 hover:text-primary transition-all border border-white/5",children:i.jsx("span",{className:"material-symbols-rounded text-xl text-primary",children:"edit"})})]})},P.id)}),i.jsxs("div",{className:"bg-slate-900/40 rounded-3xl p-8 border-2 border-dashed border-white/10 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(c0,{size:24,className:"text-slate-400"})}),i.jsx("p",{className:"text-[12px] text-slate-400 font-bold leading-relaxed mb-6",children:"Expand your venue by adding new facilities or courts to your listing."}),i.jsxs("button",{onClick:()=>y({name:"",size:"11 a side",surface:"Grass",price_per_hour:0,complex_id:s}),className:"w-full bg-primary text-slate-950 font-black py-4 rounded-2xl text-sm uppercase tracking-widest shadow-lg shadow-primary/20 hover:brightness-110 transition-all active:scale-95 flex items-center justify-center gap-2",children:[i.jsx(c0,{size:20}),"ADD NEW PITCH"]})]})]}),n==="complex"&&i.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest px-2 mb-4 block",children:"About Venue"}),i.jsx("textarea",{value:M.description,onChange:P=>K({...M,description:P.target.value}),className:"w-full bg-slate-900/50 border border-white/5 rounded-[2.5rem] p-6 text-sm font-bold text-white focus:ring-2 focus:ring-primary/20 focus:border-primary/30 transition-all placeholder:text-slate-700 min-h-[150px] shadow-inner",placeholder:"Share your venue's story..."})]}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest px-2 mb-4 block",children:"Direct Contact"}),i.jsxs("div",{className:"relative group",children:[i.jsx(__,{size:16,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors"}),i.jsx("input",{type:"tel",value:M.phone,onChange:P=>K({...M,phone:P.target.value}),className:"w-full bg-slate-900/50 border border-white/5 rounded-[1.8rem] pl-14 pr-6 py-4 text-sm font-black text-white focus:ring-2 focus:ring-primary/20 transition-all",placeholder:"Phone Number"})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest px-2 mb-6 block",children:"Venue Tech & Comfort"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:z.map(P=>i.jsxs("button",{onClick:()=>re(P),className:`flex items-center gap-3 p-4 rounded-2xl border transition-all ${M.facilities.includes(P)?"bg-primary/10 border-primary/20 text-primary shadow-lg shadow-primary/5":"bg-slate-900/50 border-white/5 text-slate-500 hover:text-slate-300"}`,children:[i.jsx("div",{className:`w-5 h-5 rounded-lg border flex items-center justify-center transition-all ${M.facilities.includes(P)?"bg-primary border-primary text-slate-900":"bg-slate-950 border-white/10"}`,children:M.facilities.includes(P)&&i.jsx(n_,{size:12,strokeWidth:4})}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-tight",children:P})]},P))})]}),i.jsx("div",{className:"pt-6 fixed bottom-24 left-8 right-8 z-[60]",children:i.jsxs("button",{onClick:q,disabled:j,className:"w-full bg-primary text-slate-900 font-black py-5 rounded-[2rem] text-xs uppercase tracking-[0.2em] shadow-2xl shadow-primary/30 flex items-center justify-center gap-3 active:scale-95 disabled:opacity-50 transition-all",children:[j?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-slate-900 border-t-transparent rounded-full"}):i.jsx(T_,{size:20}),j?"Syncing...":"Deploy Updates"]})})]}),n==="images"&&i.jsx("div",{className:"animate-in fade-in duration-500 space-y-6",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3",children:"VENUE GALLERY"}),i.jsx("h2",{className:"text-2xl font-black text-white leading-none mb-6",children:"Complex Images"}),f&&i.jsx(hx,{collection:"complexes",recordId:f.id,fieldName:"images",currentImages:Ls(f.images,f.image),maxFiles:10,onUploadComplete:O})]})})]}),g&&i.jsx(uN,{pitch:g,complexId:s,onClose:()=>{y(null),L()},onPitchUpdate:L}),i.jsx(ja,{isOpen:k,title:"Settings Saved",message:"Your complex settings have been updated successfully.",onClose:()=>N(!1)}),i.jsx(ja,{isOpen:_,title:"Error",message:T,onClose:()=>S(!1)})]}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white",children:i.jsx("p",{className:"text-slate-500 uppercase font-black tracking-widest text-xs italic",children:"Signal Lost - Venue Not Found"})})},uN=({pitch:s,complexId:a,onClose:n,onPitchUpdate:l})=>{const c=!s.id,[u,f]=v.useState(s);v.useEffect(()=>{!c&&s.id&&(async()=>{try{const{data:_,error:S}=await Y.from("pitches").select("*").eq("id",s.id).single();!S&&_&&f(_)}catch(_){console.error("[PitchEditModal] Error fetching pitch:",_)}})()},[s.id,c]);const[m,p]=v.useState({name:s.name||"",size:s.size||"11 a side",surface:s.surface||"Grass",sport_type:s.sport_type||"Football",price_per_hour:s.price_per_hour||0,opening_hour:s.opening_hour||8,closing_hour:s.closing_hour||23,match_duration:s.match_duration||75,status:s.status||"active"}),[x,g]=v.useState(!1),[y,j]=v.useState(""),E=async()=>{if(!(c||!s.id))try{const{data:N,error:_}=await Y.from("pitches").select("*").eq("id",s.id).single();!_&&N&&f(N)}catch(N){console.error("[PitchEditModal] Error refreshing pitch data:",N)}},k=async()=>{if(!m.name.trim()){j("Pitch name is required");return}g(!0),j("");try{const N={...m,complex_id:a};if(c){const{error:_}=await Y.from("pitches").insert([N]);if(_)throw _}else{const{error:_}=await Y.from("pitches").update(N).eq("id",s.id);if(_)throw _}n(),l&&l()}catch(N){console.error("Error saving pitch:",N),j(N.message||"Failed to save pitch. Please try again.")}g(!1)};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-xl z-[100] flex items-end md:items-center justify-center p-6 animate-in fade-in duration-300",children:i.jsxs("div",{className:"bg-slate-900 rounded-[3rem] w-full max-w-md border border-white/10 shadow-2xl animate-in slide-in-from-bottom duration-500 max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsx("div",{className:"p-8 border-b border-white/5 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:c?"Add New Pitch":"Edit Pitch"}),i.jsx("button",{onClick:n,className:"w-10 h-10 flex items-center justify-center bg-white/5 hover:bg-white/10 rounded-full text-slate-400 transition-all",children:i.jsx(md,{size:20})})]})}),i.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto flex-1",children:[y&&i.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-2xl p-4",children:i.jsx("p",{className:"text-red-400 text-sm font-bold",children:y})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Pitch Name"}),i.jsx("input",{type:"text",value:m.name,onChange:N=>p({...m,name:N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white focus:border-primary/50 transition-all outline-none",placeholder:"e.g., Main Football Pitch"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Sport Type"}),i.jsxs("select",{value:m.sport_type,onChange:N=>p({...m,sport_type:N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white appearance-none focus:border-primary/50 transition-all outline-none",children:[i.jsx("option",{value:"Football",children:"Football"}),i.jsx("option",{value:"Padel",children:"Padel"}),i.jsx("option",{value:"Tennis",children:"Tennis"}),i.jsx("option",{value:"Basketball",children:"Basketball"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Size"}),i.jsxs("select",{value:m.size,onChange:N=>p({...m,size:N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white appearance-none focus:border-primary/50 transition-all outline-none",children:[i.jsx("option",{value:"6 a side",children:"6 a side"}),i.jsx("option",{value:"7 a side",children:"7 a side"}),i.jsx("option",{value:"11 a side",children:"11 a side"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Surface"}),i.jsxs("select",{value:m.surface,onChange:N=>p({...m,surface:N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white appearance-none focus:border-primary/50 transition-all outline-none",children:[i.jsx("option",{value:"Grass",children:"Grass"}),i.jsx("option",{value:"3G",children:"3G"}),i.jsx("option",{value:"4G",children:"4G"}),i.jsx("option",{value:"outdoor",children:"Outdoor"}),i.jsx("option",{value:"indoor",children:"Indoor"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Operating Hours"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Opening"}),i.jsx("input",{type:"number",min:"0",max:"23",value:m.opening_hour,onChange:N=>p({...m,opening_hour:+N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white focus:border-primary/50 transition-all outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:"Closing"}),i.jsx("input",{type:"number",min:"0",max:"23",value:m.closing_hour,onChange:N=>p({...m,closing_hour:+N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white focus:border-primary/50 transition-all outline-none"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Price Per Hour (TND)"}),i.jsx("input",{type:"number",min:"0",step:"0.01",value:m.price_per_hour,onChange:N=>p({...m,price_per_hour:+N.target.value}),className:"w-full bg-slate-950 border border-white/5 rounded-2xl p-4 text-sm font-black text-white focus:border-primary/50 transition-all outline-none"})]}),!c&&s.id&&i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Pitch Images"}),i.jsx(hx,{collection:"pitches",recordId:s.id,fieldName:"images",currentImages:Ls(u==null?void 0:u.images,u==null?void 0:u.image),maxFiles:10,onUploadComplete:async()=>{await E(),l&&l()}})]})]}),i.jsxs("div",{className:"p-8 border-t border-white/5 flex-shrink-0 flex gap-3",children:[i.jsx("button",{onClick:n,className:"flex-1 bg-white/5 text-slate-400 py-4 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-white/10 transition-all",children:"Cancel"}),i.jsx("button",{onClick:k,disabled:x,className:"flex-1 bg-primary text-slate-950 py-4 rounded-2xl font-black text-sm uppercase tracking-widest shadow-lg shadow-primary/20 hover:brightness-110 active:scale-95 disabled:opacity-50 transition-all",children:x?i.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-slate-950 border-t-transparent rounded-full mx-auto"}):c?"Create Pitch":"Save Changes"})]})]})})},dN=()=>{rt();const[s,a]=v.useState([]),[n,l]=v.useState(!0),[c,u]=v.useState(null),[f,m]=v.useState(null),[p,x]=v.useState(!1),[g,y]=v.useState({childName:"",childAge:""});v.useEffect(()=>{j(),E()},[]);const j=async()=>{const{data:_,error:S}=await Y.from("academies").select(`
        *,
        complexes (
          name,
          location,
          latitude,
          longitude
        )
      `);if(S){console.error("Error loading academies:",S);return}a(_),l(!1)},E=()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(_=>{const S={lat:_.coords.latitude,lng:_.coords.longitude};u(S)})};v.useEffect(()=>{if(c&&s.length>0){const _=[...s].map(S=>{var T,A;if((T=S.complexes)!=null&&T.latitude&&((A=S.complexes)!=null&&A.longitude)){const M=k(c.lat,c.lng,S.complexes.latitude,S.complexes.longitude);return{...S,distance:parseFloat(M)}}return{...S,distance:9999}}).sort((S,T)=>(S.distance||0)-(T.distance||0));a(_)}},[c,s.length]);const k=(_,S,T,A)=>{const K=(T-_)*Math.PI/180,z=(A-S)*Math.PI/180,O=Math.sin(K/2)*Math.sin(K/2)+Math.cos(_*Math.PI/180)*Math.cos(T*Math.PI/180)*Math.sin(z/2)*Math.sin(z/2);return(6371*(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)))).toFixed(1)},N=async _=>{if(_.preventDefault(),!f)return;const{data:{user:S}}=await Y.auth.getUser();if(!S){alert("Please sign in to register");return}const{error:T}=await Y.from("academy_registrations").insert({academy_id:f.id,user_id:S.id,child_name:g.childName,child_age:parseInt(g.childAge),status:"pending"});T?alert("Error: "+T.message):(alert("Request sent! The academy will contact you soon."),m(null),x(!1))};return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-24",children:[i.jsxs("div",{className:"p-6 pt-12",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[i.jsx(C_,{className:"text-primary"}),"Academies"]}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Train with the best coaches"})]}),i.jsx("button",{className:"p-3 bg-slate-900 rounded-2xl border border-white/5",children:i.jsx(m_,{className:"text-slate-400 w-5 h-5"})})]}),c&&i.jsxs("div",{className:"mb-8 p-4 bg-primary/10 border border-primary/20 rounded-2xl flex items-center gap-3",children:[i.jsx(ox,{className:"text-primary w-5 h-5"}),i.jsx("p",{className:"text-xs font-bold text-primary uppercase tracking-wider",children:"Sorting by nearest to you"})]}),i.jsx("div",{className:"space-y-6",children:n?i.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[i.jsx("div",{className:"w-10 h-10 border-4 border-primary/20 border-t-primary rounded-full animate-spin mb-4"}),i.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest",children:"Searching..."})]}):s.map(_=>{var S;return i.jsxs("div",{onClick:()=>m(_),className:"bg-slate-900/50 rounded-[2rem] border border-white/5 overflow-hidden group active:scale-[0.98] transition-all",children:[i.jsxs("div",{className:"aspect-[2/1] bg-slate-800 relative",children:[_.cover_url?i.jsx("img",{src:_.cover_url,className:"w-full h-full object-cover",alt:""}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-700 text-4xl font-bold",children:_.name[0]}),i.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 bg-black/50 backdrop-blur-md rounded-full text-[10px] font-bold text-white",children:_.distance?`${_.distance} km`:"Discovery"})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("span",{className:"text-[10px] font-black uppercase text-primary tracking-widest",children:(S=_.complexes)==null?void 0:S.name})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:_.name}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-[10px] font-bold uppercase",children:[i.jsx(I_,{className:"w-3 h-3"}),"5-16 Years"]}),i.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 text-[10px] font-bold uppercase",children:[i.jsx(lx,{className:"w-3 h-3"}),"3 Sessions/Week"]})]})]})]},_.id)})})]}),f&&i.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-950 flex flex-col pt-12",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 mb-6",children:[i.jsx("button",{onClick:()=>{m(null),x(!1)},className:"p-3 bg-slate-900 rounded-2xl",children:i.jsx(e_,{className:"text-white"})}),i.jsx("h2",{className:"text-lg font-bold",children:"Academy Details"}),i.jsx("div",{className:"w-10"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-6 space-y-8 pb-12",children:[i.jsx("div",{className:"aspect-square bg-slate-900 rounded-[3rem] overflow-hidden border border-white/5",children:f.cover_url?i.jsx("img",{src:f.cover_url,className:"w-full h-full object-cover",alt:""}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-800 text-7xl font-bold",children:f.name[0]})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary text-[10px] font-black uppercase rounded-lg tracking-widest",children:"Training Hub"}),i.jsx("span",{className:"px-3 py-1 bg-white/5 text-slate-500 text-[10px] font-black uppercase rounded-lg tracking-widest",children:f.distance?`${f.distance} km away`:"Discovery"})]}),i.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:f.name}),i.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8",children:f.description})]}),i.jsxs("div",{className:"p-8 bg-slate-900/80 rounded-[2.5rem] border border-white/5",children:[i.jsx("h4",{className:"text-xs font-black uppercase text-slate-500 tracking-widest mb-6",children:"Training Programs"}),i.jsx("div",{className:"space-y-4",children:(f.programs||[]).map((_,S)=>i.jsxs("div",{className:"p-4 bg-black/20 rounded-2xl flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-white",children:_.name}),i.jsxs("p",{className:"text-[10px] text-slate-500 uppercase font-black",children:[_.ageGroup,"  ",_.schedule]})]}),i.jsxs("p",{className:"text-primary font-bold text-sm",children:[_.price," TND"]})]},S))})]}),p?i.jsxs("form",{onSubmit:N,className:"space-y-4 pt-4",children:[i.jsx("h4",{className:"text-lg font-bold text-white",children:"Enrollment Form"}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500 ml-1",children:"Child's Name"}),i.jsx("input",{type:"text",required:!0,value:g.childName,onChange:_=>y({...g,childName:_.target.value}),className:"w-full bg-slate-900 border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary transition-all",placeholder:"Enter full name"})]}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("label",{className:"text-[10px] font-black uppercase text-slate-500 ml-1",children:"Child's Age"}),i.jsx("input",{type:"number",required:!0,value:g.childAge,onChange:_=>y({...g,childAge:_.target.value}),className:"w-full bg-slate-900 border-white/5 rounded-2xl p-4 text-sm text-white focus:border-primary transition-all",placeholder:"Current age"})]}),i.jsx("button",{type:"submit",className:"w-full bg-primary text-slate-950 py-5 rounded-[2rem] font-bold text-lg shadow-xl shadow-primary/20",children:"Submit Registration"}),i.jsx("button",{type:"button",onClick:()=>x(!1),className:"w-full py-4 text-slate-500 font-bold uppercase text-[10px] tracking-widest",children:"Go Back"})]}):i.jsx("button",{onClick:()=>x(!0),className:"w-full bg-primary text-slate-950 py-5 rounded-[2rem] font-bold text-lg shadow-xl shadow-primary/20",children:"Join Academy"})]})]})]})},hN=()=>{var x;const[s,a]=v.useState(null),[n,l]=v.useState(!0);v.useEffect(()=>{c()},[]);const c=async()=>{const{data:{user:g}}=await Y.auth.getUser();if(!g)return;const{data:y,error:j}=await Y.from("academy_students").select(`
        *,
        academy_registrations!inner (
          child_name,
          child_age,
          academies (
            name,
            programs
          )
        )
      `).eq("academy_registrations.user_id",g.id).single();if(j){console.error("Error loading student:",j),l(!1);return}a(y),l(!1)};if(n)return i.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:i.jsx("div",{className:"w-10 h-10 border-4 border-primary/20 border-t-primary rounded-full animate-spin"})});if(!s)return i.jsxs("div",{className:"min-h-screen bg-slate-950 p-8 flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-slate-900 border border-white/5 rounded-3xl flex items-center justify-center mb-6",children:i.jsx(cx,{className:"text-slate-700 w-10 h-10"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Active Enrollment"}),i.jsx("p",{className:"text-slate-500 text-sm max-w-xs mb-8",children:"Join an academy today to start your professional training journey!"}),i.jsx("button",{onClick:()=>window.location.href="#/academies",className:"bg-primary text-slate-950 px-8 py-4 rounded-2xl font-bold",children:"Discover Academies"})]});const u=s.academy_registrations,f=u.academies,m=((x=s.additional_details)==null?void 0:x.program)||"Elite",p=(f.programs||[]).find(g=>g.name===m);return i.jsxs("div",{className:"min-h-screen bg-slate-950 pb-24",children:[i.jsxs("div",{className:"p-8 pb-12 bg-gradient-to-b from-primary/10 to-transparent",children:[i.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[i.jsx("div",{className:"w-24 h-24 rounded-[2rem] bg-slate-900 border-4 border-slate-950 shadow-2xl overflow-hidden relative",children:s.photo_url?i.jsx("img",{src:s.photo_url,className:"w-full h-full object-cover",alt:""}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-800 text-4xl font-bold",children:u.child_name[0]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx("span",{className:"px-2 py-0.5 bg-primary/20 text-primary text-[8px] font-black uppercase rounded tracking-widest",children:s.student_code})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:u.child_name}),i.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:f.name})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-900/80 p-5 rounded-3xl border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(td,{className:"text-amber-400 w-3 h-3"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Rank XP"})]}),i.jsx("p",{className:"text-2xl font-bold text-white",children:"1,250"})]}),i.jsxs("div",{className:"bg-slate-900/80 p-5 rounded-3xl border border-white/5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(u_,{className:"text-green-400 w-3 h-3"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Attendance"})]}),i.jsx("p",{className:"text-2xl font-bold text-white",children:"92%"})]})]})]}),i.jsxs("div",{className:"px-8 space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-4 flex items-center justify-between",children:["Your Badges",i.jsx(o_,{className:"w-4 h-4"})]}),i.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2 -mx-2 px-2 scrollbar-hide",children:[[{icon:i.jsx(ux,{className:"text-amber-400"}),label:"Champion"},{icon:i.jsx(td,{className:"text-primary"}),label:"Speed"},{icon:i.jsx(B_,{className:"text-secondary"}),label:"Sniper"}].map((g,y)=>i.jsxs("div",{className:"flex-shrink-0 w-20 h-20 bg-slate-900 border border-white/5 rounded-2xl flex flex-col items-center justify-center gap-2",children:[g.icon,i.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500",children:g.label})]},y)),i.jsx("div",{className:"flex-shrink-0 w-20 h-20 bg-slate-900/30 border border-dashed border-white/5 rounded-2xl flex items-center justify-center text-slate-800",children:i.jsx("span",{className:"text-xs font-bold font-mono",children:"?"})})]})]}),i.jsxs("div",{className:"p-8 bg-slate-900 rounded-[2.5rem] border border-white/5",children:[i.jsx("h3",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-6",children:"Weekly Schedule"}),p?i.jsxs("div",{className:"bg-black/20 p-5 rounded-2xl flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-2xl flex items-center justify-center text-primary",children:i.jsx(lx,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-white",children:p.schedule}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:[p.name," Squad"]})]})]}):i.jsx("p",{className:"text-slate-500 text-xs text-center py-4",children:"No schedule available."})]}),i.jsxs("div",{className:"p-8 bg-primary text-slate-950 rounded-[2.5rem] relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"}),i.jsx("h3",{className:"text-[10px] font-black uppercase tracking-widest mb-4 opacity-50",children:"Latest Feedback"}),i.jsx("p",{className:"text-sm font-bold leading-relaxed mb-6",children:`"Fantastic focus during today's technical drills. Keep working on that weak foot!"`}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-black/10 flex items-center justify-center text-[10px] font-bold",children:"S"}),i.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Coach Salim"})]})]})]})]})},fN=()=>{const{pathname:s}=La();return v.useEffect(()=>{window.scrollTo(0,0)},[s]),null},mN=()=>{const[s,a]=v.useState(null),[n,l]=v.useState(!0),[c,u]=v.useState(!0),[f,m]=v.useState({}),[p,x]=v.useState(0),g=v.useRef(null);v.useEffect(()=>{const k=setTimeout(()=>u(!1),2800);return()=>clearTimeout(k)},[]),v.useEffect(()=>{y()},[]);const y=async()=>{var k,N,_,S;try{const{data:{session:T}}=await Y.auth.getSession();if(T){const A={id:T.user.id,email:T.user.email,name:((k=T.user.user_metadata)==null?void 0:k.name)||((N=T.user.email)==null?void 0:N.split("@")[0])||"User",avatar:((_=T.user.user_metadata)==null?void 0:_.avatar_url)||null,role:((S=T.user.user_metadata)==null?void 0:S.role)||"user",phone:T.user.phone||null};a(A),j(T.user),Da.isNativePlatform()&&i0(T.user.id).catch(M=>console.error("Push error:",M))}}catch(T){console.error("Error checking user:",T)}finally{l(!1)}},j=async k=>{var N,_,S,T,A;try{const{data:M,error:K}=await Y.from("user_profiles").select("*").eq("id",k.id).single();if(K){console.error("Error fetching profile from DB:",K),a({id:k.id,email:k.email,name:((N=k.user_metadata)==null?void 0:N.name)||((_=k.email)==null?void 0:_.split("@")[0])||"User",avatar:((S=k.user_metadata)==null?void 0:S.avatar_url)||null,role:((T=k.user_metadata)==null?void 0:T.role)||"user",phone:k.phone||null});return}const z={id:k.id,email:k.email,name:M.name||((A=k.email)==null?void 0:A.split("@")[0])||"User",avatar:M.avatar||null,role:M.role||"user",phone:M.phone||null,takwira_id:M.takwira_id,created_at:M.created_at};a(z),console.log(" [App] Profile synced from database:",z.name)}catch(M){console.error("Critical error in fetchAndSetUserProfile:",M)}},E=async()=>{const{data:{session:k}}=await Y.auth.getSession();k!=null&&k.user&&await j(k.user)};return v.useEffect(()=>{const{data:{subscription:k}}=Y.auth.onAuthStateChange(async(N,_)=>{var S,T,A,M;if(_){console.log(` [Auth] ${N} event detected for user:`,_.user.id),Da.isNativePlatform()&&Yl.close().catch(()=>{});const K={id:_.user.id,email:_.user.email,name:((S=_.user.user_metadata)==null?void 0:S.name)||((T=_.user.email)==null?void 0:T.split("@")[0])||"User",avatar:((A=_.user.user_metadata)==null?void 0:A.avatar_url)||null,role:((M=_.user.user_metadata)==null?void 0:M.role)||"user",phone:_.user.phone||null};a(K),j(_.user),Da.isNativePlatform()?(console.log(" [Push] Initializing for user:",_.user.id),i0(_.user.id).then(z=>console.log(" [Push] Init result:",z)).catch(z=>console.error(" [Push] Init error:",z))):console.log(" [Push] Skipping - web platform")}else a(null)});return()=>k.unsubscribe()},[]),v.useEffect(()=>{if(!Da.isNativePlatform())return;console.log(" [Deep Link] Setting up App URL listener for native platform...");const k=D0.addListener("appUrlOpen",async N=>{if(console.log(" [Deep Link] Received URL:",N.url),N.url.includes("oauth-callback")||N.url.includes("#access_token")){console.log(" [Deep Link] OAuth callback detected. Parsing tokens...");const _=new URL(N.url.replace("#","?")),S=_.searchParams.get("access_token"),T=_.searchParams.get("refresh_token");if(S&&T){console.log(" [Deep Link] Tokens found. Setting session...");try{const{error:A}=await Y.auth.setSession({access_token:S,refresh_token:T});if(A)throw A;console.log(" [Deep Link] Session established successfully!"),await Yl.close(),console.log(" [Deep Link] Browser closed"),y()}catch(A){console.error(" [Deep Link] Auth error:",A.message)}}else console.warn(" [Deep Link] No tokens found in URL"),Yl.close().catch(()=>{})}});return()=>{k.then(N=>N.remove()),console.log(" [Deep Link] Listener removed")}},[]),v.useEffect(()=>{let k=!0,N;const _=async T=>{const{count:A}=await Y.from("friendships").select("id",{count:"exact"}).eq("friend_id",T).eq("status","pending");k&&x(A||0)},S=T=>{_(T);const A=Y.channel(`public: friendships: friend_id = eq.${T} `).on("postgres_changes",{event:"*",schema:"public",table:"friendships",filter:`friend_id = eq.${T} `},()=>{_(T)}).subscribe(),M=()=>_(T);window.addEventListener("refreshPendingRequests",M);const K=Y.channel("online-users",{config:{presence:{key:T}}});return K.on("presence",{event:"sync"},()=>{const z=K.presenceState(),O={};Object.keys(z).forEach(L=>{O[L]=z[L][0]}),k&&m(O)}).subscribe(async z=>{z==="SUBSCRIBED"&&await K.track({user_id:T,online_at:new Date().toISOString(),status:"online"})}),g.current=K,()=>{Y.removeChannel(A),Y.removeChannel(K),window.removeEventListener("refreshPendingRequests",M)}};return s!=null&&s.id&&(N=S(s.id)),()=>{k=!1,N&&N()}},[s==null?void 0:s.id]),n?i.jsx(l0,{show:!0}):s?i.jsxs(rv,{children:[i.jsx(fN,{}),i.jsx(l0,{show:c}),i.jsxs("div",{className:"min-h-screen bg-slate-950 text-white font-sans",children:[i.jsxs(My,{children:[i.jsx(Ve,{path:"/",element:i.jsx(W_,{user:s,pendingCount:p})}),i.jsx(Ve,{path:"/profile",element:i.jsx(hj,{user:s,onLogout:()=>a(null),onRefresh:E})}),i.jsx(Ve,{path:"/social",element:i.jsx(r0,{currentUser:s,onlineUsers:f})}),i.jsx(Ve,{path:"/crew",element:i.jsx(r0,{currentUser:s,onlineUsers:f})}),i.jsx(Ve,{path:"/chat",element:i.jsx(n0,{currentUser:s,onlineUsers:f})}),i.jsx(Ve,{path:"/chat/:friendshipId",element:i.jsx(n0,{currentUser:s,onlineUsers:f})}),i.jsx(Ve,{path:"/complex/:id",element:i.jsx(aN,{user:s})}),i.jsx(Ve,{path:"/pitch/:id",element:i.jsx(rN,{})}),i.jsx(Ve,{path:"/booking/confirm",element:i.jsx(nN,{})}),i.jsx(Ve,{path:"/bookings",element:i.jsx(iN,{})}),i.jsx(Ve,{path:"/achievements",element:i.jsx(yj,{})}),i.jsx(Ve,{path:"/history",element:i.jsx(vj,{})}),i.jsx(Ve,{path:"/teams",element:i.jsx(wj,{})}),i.jsx(Ve,{path:"/preferences",element:i.jsx(jj,{})}),i.jsx(Ve,{path:"/spaces",element:i.jsx(Gj,{currentUser:s})}),i.jsx(Ve,{path:"/lobby/:id",element:i.jsx(Ij,{currentUser:s})}),i.jsx(Ve,{path:"/team/:id",element:i.jsx(Vj,{currentUser:s})}),i.jsx(Ve,{path:"/admin",element:i.jsx(lN,{})}),i.jsx(Ve,{path:"/owner",element:i.jsx(bj,{user:s})}),i.jsx(Ve,{path:"/owner/bookings/:complexId",element:i.jsx(oN,{})}),i.jsx(Ve,{path:"/owner/pitches/:complexId",element:i.jsx(cN,{})}),i.jsx(Ve,{path:"/academies",element:i.jsx(dN,{})}),i.jsx(Ve,{path:"/academy-student",element:i.jsx(hN,{})}),i.jsx(Ve,{path:"/confirm-email",element:i.jsx(u0,{})}),i.jsx(Ve,{path:"/email-confirmed",element:i.jsx(u0,{})})]}),i.jsx(tN,{pendingCount:p})]})]}):i.jsx(ij,{onSuccess:()=>y()})},fx=document.getElementById("root");if(!fx)throw new Error("Could not find root element to mount to");const pN=zg.createRoot(fx);pN.render(i.jsx(Ag.StrictMode,{children:i.jsx(mN,{})}));export{so as W};
